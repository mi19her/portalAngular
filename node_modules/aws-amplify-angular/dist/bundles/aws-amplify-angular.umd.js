!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@aws-amplify/core"),require("lodash"),require("@aws-sdk/credential-provider-node"),require("@aws-sdk/hash-node"),require("@aws-sdk/node-http-handler"),require("@aws-sdk/region-provider"),require("@aws-sdk/url-parser-node"),require("@aws-sdk/util-base64-node"),require("@aws-sdk/util-body-length-node"),require("@aws-sdk/util-user-agent-node"),require("@aws-sdk/util-utf8-node"),require("@aws-sdk/config-resolver"),require("@aws-sdk/middleware-content-length"),require("@aws-sdk/middleware-host-header"),require("@aws-sdk/middleware-retry"),require("@aws-sdk/middleware-signing"),require("@aws-sdk/middleware-user-agent"),require("@aws-sdk/smithy-client"),require("@aws-sdk/protocol-http"),require("@aws-sdk/middleware-serde"),require("uuid"),require("@aws-sdk/eventstream-serde-node"),require("@aws-sdk/eventstream-serde-config-resolver"),require("@aws-sdk/util-utf8-browser"),require("crypto-js/core"),require("crypto-js/lib-typedarrays"),require("crypto-js/sha256"),require("crypto-js/hmac-sha256"),require("crypto-js/enc-base64"),require("js-cookie"),require("@aws-sdk/hash-stream-node"),require("@aws-sdk/middleware-bucket-endpoint"),require("@aws-sdk/middleware-expect-continue"),require("@aws-sdk/middleware-sdk-s3"),require("@aws-sdk/xml-builder"),require("fast-xml-parser"),require("@aws-sdk/middleware-ssec"),require("@aws-sdk/middleware-location-constraint"),require("@aws-sdk/middleware-apply-body-checksum"),require("@aws-sdk/util-format-url"),require("@aws-sdk/util-create-request"),require("@aws-sdk/s3-request-presigner"),require("@aws-sdk/querystring-builder"),require("axios"),require("@aws-sdk/fetch-http-handler"),require("zen-observable"),require("paho-mqtt"),require("@aws-amplify/ui")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@aws-amplify/core","lodash","@aws-sdk/credential-provider-node","@aws-sdk/hash-node","@aws-sdk/node-http-handler","@aws-sdk/region-provider","@aws-sdk/url-parser-node","@aws-sdk/util-base64-node","@aws-sdk/util-body-length-node","@aws-sdk/util-user-agent-node","@aws-sdk/util-utf8-node","@aws-sdk/config-resolver","@aws-sdk/middleware-content-length","@aws-sdk/middleware-host-header","@aws-sdk/middleware-retry","@aws-sdk/middleware-signing","@aws-sdk/middleware-user-agent","@aws-sdk/smithy-client","@aws-sdk/protocol-http","@aws-sdk/middleware-serde","uuid","@aws-sdk/eventstream-serde-node","@aws-sdk/eventstream-serde-config-resolver","@aws-sdk/util-utf8-browser","crypto-js/core","crypto-js/lib-typedarrays","crypto-js/sha256","crypto-js/hmac-sha256","crypto-js/enc-base64","js-cookie","@aws-sdk/hash-stream-node","@aws-sdk/middleware-bucket-endpoint","@aws-sdk/middleware-expect-continue","@aws-sdk/middleware-sdk-s3","@aws-sdk/xml-builder","fast-xml-parser","@aws-sdk/middleware-ssec","@aws-sdk/middleware-location-constraint","@aws-sdk/middleware-apply-body-checksum","@aws-sdk/util-format-url","@aws-sdk/util-create-request","@aws-sdk/s3-request-presigner","@aws-sdk/querystring-builder","axios","@aws-sdk/fetch-http-handler","zen-observable","paho-mqtt","@aws-amplify/ui"],t):t((e=e||self)["aws-amplify-angular"]={},e.ng.core,e.ng.common,e.Amplify,e._,e.credentialProviderNode,e.hashNode,e.nodeHttpHandler,e.regionProvider,e.urlParserNode,e.utilBase64Node,e.utilBodyLengthNode,e.utilUserAgentNode,e.utilUtf8Node,e.configResolver,e.middlewareContentLength,e.middlewareHostHeader,e.middlewareRetry,e.middlewareSigning,e.middlewareUserAgent,e.smithyClient,e.protocolHttp,e.middlewareSerde,e.uuid,e.eventstreamSerdeNode,e.eventstreamSerdeConfigResolver,e.utilUtf8Browser,e.CryptoJS,e.libTypedarrays,e.SHA256,e.HmacSHA256,e.Base64,e.Cookies,e.hashStreamNode,e.middlewareBucketEndpoint,e.middlewareExpectContinue,e.middlewareSdkS3,e.xmlBuilder,e.fastXmlParser,e.middlewareSsec,e.middlewareLocationConstraint,e.middlewareApplyBodyChecksum,e.utilFormatUrl,e.utilCreateRequest,e.s3RequestPresigner,e.querystringBuilder,e.axios,e.fetchHttpHandler,e.zenObservable,e.Paho,e.AmplifyUI)}(this,function(e,h,t,x,y,n,r,o,i,s,a,u,c,l,p,d,f,m,g,v,b,w,S,_,C,E,I,A,P,k,O,T,N,U,R,M,D,F,L,j,B,V,q,z,H,K,G,W,$,Y,J){"use strict";var Z="default"in x?x.default:x;A=A&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A,P=P&&Object.prototype.hasOwnProperty.call(P,"default")?P.default:P,k=k&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k,O=O&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O,T=T&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T,G=G&&Object.prototype.hasOwnProperty.call(G,"default")?G.default:G,$=$&&Object.prototype.hasOwnProperty.call($,"default")?$.default:$;var Q=function(e,t){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function X(e,t){function n(){this.constructor=e}Q(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ee=function(){return(ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function te(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(i<3?o(s):3<i?o(t,n,s):o(t,n))||s);return 3<i&&s&&Object.defineProperty(t,n,s),s}function ne(n,r){return function(e,t){r(e,t,n)}}function re(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function oe(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function ie(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function se(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ae(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function ue(e){return"function"==typeof e}var ce=!1,le={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,ce=e},get useDeprecatedSynchronousErrorHandling(){return ce}};function pe(e){setTimeout(function(){throw e},0)}var de={closed:!0,next:function(e){},error:function(e){if(le.useDeprecatedSynchronousErrorHandling)throw e;pe(e)},complete:function(){}},he=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function fe(e){return null!==e&&"object"==typeof e}var me=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),ge=function(){function a(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var e;return a.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this._parentOrParents,n=this._unsubscribe,r=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(var o=0;o<e.length;++o){e[o].remove(this)}if(ue(n))try{n.call(this)}catch(e){t=e instanceof me?ye(e.errors):[e]}if(he(r))for(var o=-1,i=r.length;++o<i;){var s=r[o];if(fe(s))try{s.unsubscribe()}catch(e){t=t||[],e instanceof me?t=t.concat(ye(e.errors)):t.push(e)}}if(t)throw new me(t)}},a.prototype.add=function(e){var t,n=e;if(!e)return a.EMPTY;switch(typeof e){case"function":n=new a(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof a||(t=n,(n=new a)._subscriptions=[t]);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof a){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},a.prototype.remove=function(e){var t,n=this._subscriptions;!n||-1!==(t=n.indexOf(e))&&n.splice(t,1)},a.EMPTY=((e=new a).closed=!0,e),a}();function ye(e){return e.reduce(function(e,t){return e.concat(t instanceof me?t.errors:t)},[])}var ve=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),be=function(o){function i(e,t,n){var r=o.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=de;break;case 1:if(!e){r.destination=de;break}if("object"==typeof e){e instanceof i?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new we(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new we(r,e,t,n)}return r}return X(i,o),i.prototype[ve]=function(){return this},i.create=function(e,t,n){var r=new i(e,t,n);return r.syncErrorThrowable=!1,r},i.prototype.next=function(e){this.isStopped||this._next(e)},i.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(e){this.destination.next(e)},i.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},i}(ge),we=function(a){function e(e,t,n,r){var o,i=a.call(this)||this;i._parentSubscriber=e;var s=i;return ue(t)?o=t:t&&(o=t.next,n=t.error,r=t.complete,t!==de&&(ue((s=Object.create(t)).unsubscribe)&&i.add(s.unsubscribe.bind(s)),s.unsubscribe=i.unsubscribe.bind(i))),i._context=s,i._next=o,i._error=n,i._complete=r,i}return X(e,a),e.prototype.next=function(e){var t;!this.isStopped&&this._next&&(t=this._parentSubscriber,le.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e))},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=le.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):pe(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;pe(e)}}},e.prototype.complete=function(){var e,t,n=this;this.isStopped||(e=this._parentSubscriber,this._complete&&(t=function(){return n._complete.call(n._context)},le.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,t):this.__tryOrUnsub(t)),this.unsubscribe())},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),le.useDeprecatedSynchronousErrorHandling)throw e;pe(e)}},e.prototype.__tryOrSetError=function(t,e,n){if(!le.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return le.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0):(pe(e),!0)}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(be);var Se=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function _e(e){return e}var Ce=function(){function n(e){this._isScalar=!1,e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,n){var r=this.operator,o=function(e,t,n){if(e){if(e instanceof be)return e;if(e[ve])return e[ve]()}return e||t||n?new be(e,t,n):new be(de)}(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||le.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),le.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){le.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(e){for(;e;){var t=e.closed,n=e.destination,r=e.isStopped;if(t||r)return;e=n&&n instanceof be?n:null}return 1}(t)?console.warn(e):t.error(e)}},n.prototype.forEach=function(r,e){var o=this;return new(e=Ee(e))(function(e,t){var n=o.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},n.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},n.prototype[Se]=function(){return this},n.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:(0===(t=e).length?_e:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},n.prototype.toPromise=function(e){var r=this;return new(e=Ee(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},n.create=function(e){return new n(e)},n}();function Ee(e){if(!(e=e||Promise))throw new Error("no Promise impl found");return e}var Ie=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),Ae=function(r){function e(e,t){var n=r.call(this)||this;return n.subject=e,n.subscriber=t,n.closed=!1,n}return X(e,r),e.prototype.unsubscribe=function(){var e,t,n;this.closed||(this.closed=!0,t=(e=this.subject).observers,this.subject=null,!t||0===t.length||e.isStopped||e.closed||-1!==(n=t.indexOf(this.subscriber))&&t.splice(n,1))},e}(ge),Pe=function(n){function e(e){var t=n.call(this,e)||this;return t.destination=e,t}return X(e,n),e}(be),ke=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return X(e,t),e.prototype[ve]=function(){return new Pe(this)},e.prototype.lift=function(e){var t=new Oe(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new Ie;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].next(e)},e.prototype.error=function(e){if(this.closed)throw new Ie;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Ie;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new Ie;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new Ie;return this.hasError?(e.error(this.thrownError),ge.EMPTY):this.isStopped?(e.complete(),ge.EMPTY):(this.observers.push(e),new Ae(this,e))},e.prototype.asObservable=function(){var e=new Ce;return e.source=this,e},e.create=function(e,t){return new Oe(e,t)},e}(Ce),Oe=function(r){function e(e,t){var n=r.call(this)||this;return n.destination=e,n.source=t,n}return X(e,r),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):ge.EMPTY},e}(ke);function Te(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new xe(t,n))}}var xe=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Ne(e,this.project,this.thisArg))},e}(),Ne=function(o){function e(e,t,n){var r=o.call(this,e)||this;return r.project=t,r.count=0,r.thisArg=n||r,r}return X(e,o),e.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(be);function Ue(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Re=Ue(),Me=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function De(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Fe=function(e){if(e&&"function"==typeof e[Se])return i=e,function(e){var t=i[Se]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Me(e))return o=e,function(e){for(var t=0,n=o.length;t<n&&!e.closed;t++)e.next(o[t]);e.complete()};if(De(e))return n=e,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,pe),t};if(e&&"function"==typeof e[Re])return r=e,function(t){for(var e=r[Re]();;){var n=void 0;try{n=e.next()}catch(e){return t.error(e),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof e.return&&t.add(function(){e.return&&e.return()}),t};var r,n,o,i,t=fe(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Le(e,t){if(null!=e){if((c=e)&&"function"==typeof c[Se])return a=e,u=t,new Ce(function(t){var n=new ge;return n.add(u.schedule(function(){var e=a[Se]();n.add(e.subscribe({next:function(e){n.add(u.schedule(function(){return t.next(e)}))},error:function(e){n.add(u.schedule(function(){return t.error(e)}))},complete:function(){n.add(u.schedule(function(){return t.complete()}))}}))})),n});if(De(e))return i=e,s=t,new Ce(function(t){var n=new ge;return n.add(s.schedule(function(){return i.then(function(e){n.add(s.schedule(function(){t.next(e),n.add(s.schedule(function(){return t.complete()}))}))},function(e){n.add(s.schedule(function(){return t.error(e)}))})})),n});if(Me(e))return r=e,o=t,new Ce(function(e){var t=new ge,n=0;return t.add(o.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t});if((n=e)&&"function"==typeof n[Re]||"string"==typeof e)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new Ce(function(r){var o,e=new ge;return e.add(function(){o&&"function"==typeof o.return&&o.return()}),e.add(n.schedule(function(){o=t[Re](),e.add(n.schedule(function(){if(!r.closed){try{var e=o.next(),t=e.value,n=e.done}catch(e){return void r.error(e)}n?r.complete():(r.next(t),this.schedule())}}))})),e})}(e,t)}var n,r,o,i,s,a,u,c;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function je(e,t){return t?Le(e,t):e instanceof Ce?e:new Ce(Fe(e))}function Be(u,c){return new Ce(function(r){var o=u.length;if(0!==o)for(var i=new Array(o),s=0,a=0,e=0;e<o;e++)!function(t){var e=je(u[t]),n=!1;r.add(e.subscribe({next:function(e){n||(n=!0,a++),i[t]=e},error:function(e){return r.error(e)},complete:function(){++s!==o&&n||(a===o&&r.next(c?c.reduce(function(e,t,n){return e[t]=i[n],e},{}):i),r.complete())}}))}(e);else r.complete()})}var Ve=null;var qe=(Object.defineProperty(ze.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),ze);function ze(){this.resourceLoaderType=null}var He,Ke=(X(Ge,He=qe),Ge.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},Ge.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},Ge.prototype.supportsDOMEvents=function(){return!0},Ge.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},Ge.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},Ge.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},Ge.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},Ge);function Ge(){var t=He.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var e=["Webkit","Moz","O","ms"],r=0;r<e.length;r++)if(null!=t.getStyle(n,e[r]+"AnimationName")){t._animationPrefix="-"+e[r].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=o[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}var We,$e={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Ye={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Je={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","Â":"NumLock"};h["Éµglobal"].Node&&(We=h["Éµglobal"].Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var Ze,Qe=(X(Xe,Ze=Ke),Xe.prototype.parse=function(e){throw new Error("parse not implemented")},Xe.makeCurrent=function(){var e;e=new Xe,Ve=Ve||e},Xe.prototype.hasProperty=function(e,t){return t in e},Xe.prototype.setProperty=function(e,t,n){e[t]=n},Xe.prototype.getProperty=function(e,t){return e[t]},Xe.prototype.invoke=function(e,t,n){e[t].apply(e,n)},Xe.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},Xe.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},Xe.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},Xe.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(Xe.prototype,"attrToPropMap",{get:function(){return $e},enumerable:!0,configurable:!0}),Xe.prototype.contains=function(e,t){return We.call(e,t)},Xe.prototype.querySelector=function(e,t){return e.querySelector(t)},Xe.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},Xe.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},Xe.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},Xe.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},Xe.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},Xe.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},Xe.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},Xe.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},Xe.prototype.getInnerHTML=function(e){return e.innerHTML},Xe.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},Xe.prototype.getOuterHTML=function(e){return e.outerHTML},Xe.prototype.nodeName=function(e){return e.nodeName},Xe.prototype.nodeValue=function(e){return e.nodeValue},Xe.prototype.type=function(e){return e.type},Xe.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},Xe.prototype.firstChild=function(e){return e.firstChild},Xe.prototype.nextSibling=function(e){return e.nextSibling},Xe.prototype.parentElement=function(e){return e.parentNode},Xe.prototype.childNodes=function(e){return e.childNodes},Xe.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},Xe.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},Xe.prototype.appendChild=function(e,t){e.appendChild(t)},Xe.prototype.removeChild=function(e,t){e.removeChild(t)},Xe.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},Xe.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},Xe.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},Xe.prototype.insertAllBefore=function(t,n,e){e.forEach(function(e){return t.insertBefore(e,n)})},Xe.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},Xe.prototype.setInnerHTML=function(e,t){e.innerHTML=t},Xe.prototype.getText=function(e){return e.textContent},Xe.prototype.setText=function(e,t){e.textContent=t},Xe.prototype.getValue=function(e){return e.value},Xe.prototype.setValue=function(e,t){e.value=t},Xe.prototype.getChecked=function(e){return e.checked},Xe.prototype.setChecked=function(e,t){e.checked=t},Xe.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},Xe.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},Xe.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},Xe.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},Xe.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},Xe.prototype.createScriptTag=function(e,t,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r},Xe.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},Xe.prototype.createShadowRoot=function(e){return e.createShadowRoot()},Xe.prototype.getShadowRoot=function(e){return e.shadowRoot},Xe.prototype.getHost=function(e){return e.host},Xe.prototype.clone=function(e){return e.cloneNode(!0)},Xe.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},Xe.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},Xe.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},Xe.prototype.addClass=function(e,t){e.classList.add(t)},Xe.prototype.removeClass=function(e,t){e.classList.remove(t)},Xe.prototype.hasClass=function(e,t){return e.classList.contains(t)},Xe.prototype.setStyle=function(e,t,n){e.style[t]=n},Xe.prototype.removeStyle=function(e,t){e.style[t]=""},Xe.prototype.getStyle=function(e,t){return e.style[t]},Xe.prototype.hasStyle=function(e,t,n){var r=this.getStyle(e,t)||"";return n?r==n:0<r.length},Xe.prototype.tagName=function(e){return e.tagName},Xe.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var o=n.item(r);t.set(o.name,o.value)}return t},Xe.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},Xe.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},Xe.prototype.getAttribute=function(e,t){return e.getAttribute(t)},Xe.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},Xe.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},Xe.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},Xe.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},Xe.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},Xe.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},Xe.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},Xe.prototype.getDefaultDocument=function(){return document},Xe.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},Xe.prototype.getTitle=function(e){return e.title},Xe.prototype.setTitle=function(e,t){e.title=t||""},Xe.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},Xe.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},Xe.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},Xe.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},Xe.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},Xe.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},Xe.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},Xe.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},Xe.prototype.adoptNode=function(e){return document.adoptNode(e)},Xe.prototype.getHref=function(e){return e.getAttribute("href")},Xe.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Je.hasOwnProperty(t)&&(t=Je[t]))}return Ye[t]||t},Xe.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},Xe.prototype.getHistory=function(){return window.history},Xe.prototype.getLocation=function(){return window.location},Xe.prototype.getBaseHref=function(e){var t=(tt=tt||document.querySelector("base"))?tt.getAttribute("href"):null;return null==t?null:function(e){return(et=et||document.createElement("a")).setAttribute("href",e),"/"===et.pathname.charAt(0)?et.pathname:"/"+et.pathname}(t)},Xe.prototype.resetBaseElement=function(){tt=null},Xe.prototype.getUserAgent=function(){return window.navigator.userAgent},Xe.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},Xe.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},Xe.prototype.getComputedStyle=function(e){return getComputedStyle(e)},Xe.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},Xe.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},Xe.prototype.supportsCookies=function(){return!0},Xe.prototype.getCookie=function(e){return t["ÉµparseCookieValue"](document.cookie,e)},Xe.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},Xe);function Xe(){return null!==Ze&&Ze.apply(this,arguments)||this}var et,tt=null;var nt=t.DOCUMENT;function rt(){return window.history.pushState}var ot,it=(X(st,ot=t.PlatformLocation),st.prototype._init=function(){this.location=Ve.getLocation(),this._history=Ve.getHistory()},st.prototype.getBaseHrefFromDOM=function(){return Ve.getBaseHref(this._doc)},st.prototype.onPopState=function(e){Ve.getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},st.prototype.onHashChange=function(e){Ve.getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(st.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(st.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),st.prototype.pushState=function(e,t,n){rt()?this._history.pushState(e,t,n):this.location.hash=n},st.prototype.replaceState=function(e,t,n){rt()?this._history.replaceState(e,t,n):this.location.hash=n},st.prototype.forward=function(){this._history.forward()},st.prototype.back=function(){this._history.back()},st.decorators=[{type:h.Injectable}],st.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[nt]}]}]},st);function st(e){var t=ot.call(this)||this;return t._doc=e,t._init(),t}at.prototype.addTag=function(e,t){return void 0===t&&(t=!1),e?this._getOrCreateElement(e,t):null},at.prototype.addTags=function(e,n){var r=this;return void 0===n&&(n=!1),e?e.reduce(function(e,t){return t&&e.push(r._getOrCreateElement(t,n)),e},[]):[]},at.prototype.getTag=function(e){return e&&this._dom.querySelector(this._doc,"meta["+e+"]")||null},at.prototype.getTags=function(e){if(!e)return[];var t=this._dom.querySelectorAll(this._doc,"meta["+e+"]");return t?[].slice.call(t):[]},at.prototype.updateTag=function(e,t){if(!e)return null;t=t||this._parseSelector(e);var n=this.getTag(t);return n?this._setMetaElementAttributes(e,n):this._getOrCreateElement(e,!0)},at.prototype.removeTag=function(e){this.removeTagElement(this.getTag(e))},at.prototype.removeTagElement=function(e){e&&this._dom.remove(e)},at.prototype._getOrCreateElement=function(e,t){if(void 0===t&&(t=!1),!t){var n=this._parseSelector(e),r=this.getTag(n);if(r&&this._containsAttributes(e,r))return r}var o=this._dom.createElement("meta");this._setMetaElementAttributes(e,o);var i=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(i,o),o},at.prototype._setMetaElementAttributes=function(t,n){var r=this;return Object.keys(t).forEach(function(e){return r._dom.setAttribute(n,e,t[e])}),n},at.prototype._parseSelector=function(e){var t=e.name?"name":"property";return t+'="'+e[t]+'"'},at.prototype._containsAttributes=function(t,n){var r=this;return Object.keys(t).every(function(e){return r._dom.getAttribute(n,e)===t[e]})},at.decorators=[{type:h.Injectable}],at.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[nt]}]}]};function at(e){this._doc=e,this._dom=Ve}new h.InjectionToken("TRANSITION_ID");var ut=(ct.init=function(){h.setTestabilityGetter(new ct)},ct.prototype.addToWindow=function(r){h["Éµglobal"].getAngularTestability=function(e,t){void 0===t&&(t=!0);var n=r.findTestabilityInTree(e,t);if(null==n)throw new Error("Could not find testability for element.");return n},h["Éµglobal"].getAllAngularTestabilities=function(){return r.getAllTestabilities()},h["Éµglobal"].getAllAngularRootElements=function(){return r.getAllRootElements()},h["Éµglobal"].frameworkStabilizers||(h["Éµglobal"].frameworkStabilizers=[]),h["Éµglobal"].frameworkStabilizers.push(function(t){function n(e){o=o||e,0==--r&&t(o)}var e=h["Éµglobal"].getAllAngularTestabilities(),r=e.length,o=!1;e.forEach(function(e){e.whenStable(n)})})},ct.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?Ve.isShadowRoot(t)?this.findTestabilityInTree(e,Ve.getHost(t),!0):this.findTestabilityInTree(e,Ve.parentElement(t),!0):null},ct);function ct(){}lt.prototype.getTitle=function(){return Ve.getTitle(this._doc)},lt.prototype.setTitle=function(e){Ve.setTitle(this._doc,e)},lt.decorators=[{type:h.Injectable}],lt.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[nt]}]}]};function lt(e){this._doc=e}function pt(e,t){"undefined"!=typeof COMPILED&&COMPILED||((h["Éµglobal"].ng=h["Éµglobal"].ng||{})[e]=t)}var dt={ApplicationRef:h.ApplicationRef,NgZone:h.NgZone};function ht(e){return h.getDebugNode(e)}h.APP_INITIALIZER,h.NgProbeToken,new h.Optional;var ft=new h.InjectionToken("EventManagerPlugins"),mt=(gt.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},gt.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},gt.prototype.getZone=function(){return this._zone},gt.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var o=n[r];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error("No event manager plugin found for event "+e)},gt.decorators=[{type:h.Injectable}],gt.ctorParameters=function(){return[{type:Array,decorators:[{type:h.Inject,args:[ft]}]},{type:h.NgZone}]},gt);function gt(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}var yt=(vt.prototype.addGlobalEventListener=function(e,t,n){var r=Ve.getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target "+r+" for event "+t);return this.addEventListener(r,t,n)},vt);function vt(e){this._doc=e}var bt=(wt.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},wt.prototype.onStylesAdded=function(e){},wt.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},wt.decorators=[{type:h.Injectable}],wt.ctorParameters=function(){return[]},wt);function wt(){this._stylesSet=new Set}var St,_t=(X(Ct,St=bt),Ct.prototype._addStylesToHost=function(e,n){var r=this;e.forEach(function(e){var t=r._doc.createElement("style");t.textContent=e,r._styleNodes.add(n.appendChild(t))})},Ct.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},Ct.prototype.removeHost=function(e){this._hostNodes.delete(e)},Ct.prototype.onStylesAdded=function(t){var n=this;this._hostNodes.forEach(function(e){return n._addStylesToHost(t,e)})},Ct.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return Ve.remove(e)})},Ct.decorators=[{type:h.Injectable}],Ct.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[nt]}]}]},Ct);function Ct(e){var t=St.call(this)||this;return t._doc=e,t._hostNodes=new Set,t._styleNodes=new Set,t._hostNodes.add(e.head),t}var Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},It=/%COMP%/g,At="_nghost-%COMP%",Pt="_ngcontent-%COMP%";function kt(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?kt(e,o,n):(o=o.replace(It,e),n.push(o))}return n}function Ot(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}Tt.prototype.createRenderer=function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case h.ViewEncapsulation.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new Dt(this.eventManager,this.sharedStylesHost,t),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case h.ViewEncapsulation.Native:return new jt(this.eventManager,this.sharedStylesHost,e,t);default:var r;return this.rendererByCompId.has(t.id)||(r=kt(t.id,t.styles,[]),this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)),this.defaultRenderer}},Tt.prototype.begin=function(){},Tt.prototype.end=function(){},Tt.decorators=[{type:h.Injectable}],Tt.ctorParameters=function(){return[{type:mt},{type:_t}]};function Tt(e,t){this.eventManager=e,this.sharedStylesHost=t,this.rendererByCompId=new Map,this.defaultRenderer=new xt(e)}var xt=(Nt.prototype.destroy=function(){},Nt.prototype.createElement=function(e,t){return t?document.createElementNS(Et[t],e):document.createElement(e)},Nt.prototype.createComment=function(e){return document.createComment(e)},Nt.prototype.createText=function(e){return document.createTextNode(e)},Nt.prototype.appendChild=function(e,t){e.appendChild(t)},Nt.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},Nt.prototype.removeChild=function(e,t){e&&e.removeChild(t)},Nt.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},Nt.prototype.parentNode=function(e){return e.parentNode},Nt.prototype.nextSibling=function(e){return e.nextSibling},Nt.prototype.setAttribute=function(e,t,n,r){var o;r?(t=r+":"+t,(o=Et[r])?e.setAttributeNS(o,t,n):e.setAttribute(t,n)):e.setAttribute(t,n)},Nt.prototype.removeAttribute=function(e,t,n){var r;n?(r=Et[n])?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t):e.removeAttribute(t)},Nt.prototype.addClass=function(e,t){e.classList.add(t)},Nt.prototype.removeClass=function(e,t){e.classList.remove(t)},Nt.prototype.setStyle=function(e,t,n,r){r&h.RendererStyleFlags2.DashCase?e.style.setProperty(t,n,r&h.RendererStyleFlags2.Important?"important":""):e.style[t]=n},Nt.prototype.removeStyle=function(e,t,n){n&h.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},Nt.prototype.setProperty=function(e,t,n){Rt(t,"property"),e[t]=n},Nt.prototype.setValue=function(e,t){e.nodeValue=t},Nt.prototype.listen=function(e,t,n){return Rt(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ot(n)):this.eventManager.addEventListener(e,t,Ot(n))},Nt);function Nt(e){this.eventManager=e,this.data=Object.create(null)}var Ut="@".charCodeAt(0);function Rt(e,t){if(e.charCodeAt(0)===Ut)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Mt,Dt=(X(Ft,Mt=xt),Ft.prototype.applyToHost=function(e){Mt.prototype.setAttribute.call(this,e,this.hostAttr,"")},Ft.prototype.createElement=function(e,t){var n=Mt.prototype.createElement.call(this,e,t);return Mt.prototype.setAttribute.call(this,n,this.contentAttr,""),n},Ft);function Ft(e,t,n){var r,o,i=Mt.call(this,e)||this,s=kt((i.component=n).id,n.styles,[]);return t.addStyles(s),i.contentAttr=(r=n.id,Pt.replace(It,r)),i.hostAttr=(o=n.id,At.replace(It,o)),i}var Lt,jt=(X(Bt,Lt=xt),Bt.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},Bt.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},Bt.prototype.appendChild=function(e,t){return Lt.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),t)},Bt.prototype.insertBefore=function(e,t,n){return Lt.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),t,n)},Bt.prototype.removeChild=function(e,t){return Lt.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),t)},Bt.prototype.parentNode=function(e){return this.nodeOrShadowRoot(Lt.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},Bt);function Bt(e,t,n,r){var o=Lt.call(this,e)||this;o.sharedStylesHost=t,o.hostEl=n,o.component=r,o.shadowRoot=n.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var i=kt(r.id,r.styles,[]),s=0;s<i.length;s++){var a=document.createElement("style");a.textContent=i[s],o.shadowRoot.appendChild(a)}return o}var Vt,qt="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},zt=qt("addEventListener"),Ht=qt("removeEventListener"),Kt={},Gt="removeEventListener",Wt="__zone_symbol__propagationStopped",$t="__zone_symbol__stopImmediatePropagation",Yt="undefined"!=typeof Zone&&Zone[qt("BLACK_LISTED_EVENTS")];Yt&&(Vt={},Yt.forEach(function(e){Vt[e]=e}));function Jt(e){return!!Vt&&Vt.hasOwnProperty(e)}function Zt(e){var t=Kt[e.type];if(t){var n=this[t];if(n){var r=[e];if(1===n.length)return(o=n[0]).zone!==Zone.current?o.zone.run(o.handler,this,r):o.handler.apply(this,r);for(var o,i=n.slice(),s=0;s<i.length&&!0!==e[Wt];s++){(o=i[s]).zone!==Zone.current?o.zone.run(o.handler,this,r):o.handler.apply(this,r)}}}}var Qt;X(Xt,Qt=yt),Xt.prototype.patchEvent=function(){var e;Event&&Event.prototype&&(Event.prototype[$t]||(e=Event.prototype[$t]=Event.prototype.stopImmediatePropagation,Event.prototype.stopImmediatePropagation=function(){this&&(this[Wt]=!0),e&&e.apply(this,arguments)}))},Xt.prototype.supports=function(e){return!0},Xt.prototype.addEventListener=function(e,t,n){var r=this,o=e[zt],i=n;if(!o||h.NgZone.isInAngularZone()&&!Jt(t))e.addEventListener(t,i,!1);else{var s=(s=Kt[t])||(Kt[t]=qt("ANGULAR"+t+"FALSE")),a=(u=e[s])&&0<u.length,u=u||(e[s]=[]),c=Jt(t)?Zone.root:Zone.current;if(0===u.length)u.push({zone:c,handler:i});else{for(var l=!1,p=0;p<u.length;p++)if(u[p].handler===i){l=!0;break}l||u.push({zone:c,handler:i})}a||e[zt](t,Zt,!1)}return function(){return r.removeEventListener(e,t,i)}},Xt.prototype.removeEventListener=function(e,t,n){var r=e[Ht];if(!r)return e[Gt].apply(e,[t,n,!1]);var o=Kt[t],i=o&&e[o];if(!i)return e[Gt].apply(e,[t,n,!1]);for(var s=!1,a=0;a<i.length;a++)if(i[a].handler===n){s=!0,i.splice(a,1);break}s?0===i.length&&r.apply(e,[t,Zt,!1]):e[Gt].apply(e,[t,n,!1])},Xt.decorators=[{type:h.Injectable}],Xt.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[nt]}]},{type:h.NgZone}]};function Xt(e,t){var n=Qt.call(this,e)||this;return n.ngZone=t,n.patchEvent(),n}var en={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},tn=new h.InjectionToken("HammerGestureConfig"),nn=(rn.prototype.buildHammer=function(e){var t=new Hammer(e);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t},rn.decorators=[{type:h.Injectable}],rn.ctorParameters=function(){return[]},rn);function rn(){this.events=[],this.overrides={}}var on;X(sn,on=yt),sn.prototype.supports=function(e){if(!en.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+e+" event");return!0},sn.prototype.addEventListener=function(n,r,o){var i=this,s=this.manager.getZone();return r=r.toLowerCase(),s.runOutsideAngular(function(){function e(e){s.runGuarded(function(){o(e)})}var t=i._config.buildHammer(n);return t.on(r,e),function(){return t.off(r,e)}})},sn.prototype.isCustomEvent=function(e){return-1<this._config.events.indexOf(e)},sn.decorators=[{type:h.Injectable}],sn.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[nt]}]},{type:nn,decorators:[{type:h.Inject,args:[tn]}]}]};function sn(e,t){var n=on.call(this,e)||this;return n._config=t,n}var an,un=["alt","control","meta","shift"],cn={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}};X(ln,an=yt),ln.prototype.supports=function(e){return null!=ln.parseEventName(e)},ln.prototype.addEventListener=function(e,t,n){var r=ln.parseEventName(t),o=ln.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Ve.onAndCancel(e,r.domEventName,o)})},ln.parseEventName=function(e){var n=e.toLowerCase().split("."),t=n.shift();if(0===n.length||"keydown"!==t&&"keyup"!==t)return null;var r=ln._normalizeKey(n.pop()),o="";if(un.forEach(function(e){var t=n.indexOf(e);-1<t&&(n.splice(t,1),o+=e+".")}),o+=r,0!=n.length||0===r.length)return null;var i={};return i.domEventName=t,i.fullKey=o,i},ln.getEventFullKey=function(t){var n="",r=Ve.getEventKey(t);return" "===(r=r.toLowerCase())?r="space":"."===r&&(r="dot"),un.forEach(function(e){e!=r&&(0,cn[e])(t)&&(n+=e+".")}),n+=r},ln.eventCallback=function(t,n,r){return function(e){ln.getEventFullKey(e)===t&&r.runGuarded(function(){return n(e)})}},ln._normalizeKey=function(e){switch(e){case"esc":return"escape";default:return e}},ln.decorators=[{type:h.Injectable}],ln.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[nt]}]}]};function ln(e){return an.call(this,e)||this}var pn=(dn.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null);var n=t.response.body;return n.removeChild(n.firstChild),n},dn.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},dn.prototype.getInertBodyElement_InertDocument=function(e){var t=this.DOM.createElement("template");return"content"in t?(this.DOM.setInnerHTML(t,e),t):(this.DOM.setInnerHTML(this.inertBodyElement,e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},dn.prototype.stripCustomNsAttrs=function(n){var r=this;this.DOM.attributeMap(n).forEach(function(e,t){"xmlns:ns1"!==t&&0!==t.indexOf("ns1:")||r.DOM.removeAttribute(n,t)});for(var e=0,t=this.DOM.childNodesAsList(n);e<t.length;e++){var o=t[e];this.DOM.isElementNode(o)&&this.stripCustomNsAttrs(o)}},dn);function dn(e,t){this.defaultDoc=e,this.DOM=t;var n,r=this.DOM.createHtmlDocument();this.inertBodyElement=r.body,null==this.inertBodyElement&&(n=this.DOM.createElement("html",r),this.inertBodyElement=this.DOM.createElement("body",r),this.DOM.appendChild(n,this.inertBodyElement),this.DOM.appendChild(r,n)),this.DOM.setInnerHTML(this.inertBodyElement,'<svg><g onload="this.parentNode.remove()"></g></svg>'),!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.DOM.setInnerHTML(this.inertBodyElement,'<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement=this.getInertBodyElement_DOMParser:this.getInertBodyElement=this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}var hn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,fn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function mn(e){return(e=String(e)).match(hn)||e.match(fn)?e:(h.isDevMode()&&Ve.log("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function gn(e){for(var t={},n=0,r=e.split(",");n<r.length;n++){t[r[n]]=!0}return t}function yn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,o=e;r<o.length;r++){var i=o[r];for(var s in i)i.hasOwnProperty(s)&&(n[s]=!0)}return n}var vn=gn("area,br,col,hr,img,wbr"),bn=gn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),wn=gn("rp,rt"),Sn=yn(wn,bn),_n=yn(bn,gn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Cn=yn(wn,gn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),En=yn(vn,_n,Cn,Sn),In=gn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),An=gn("srcset"),Pn=gn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),kn=yn(In,An,Pn),On=(Tn.prototype.sanitizeChildren=function(e){for(var t=this.DOM.firstChild(e);t;)if(this.DOM.isElementNode(t)?this.startElement(t):this.DOM.isTextNode(t)?this.chars(this.DOM.nodeValue(t)):this.sanitizedSomething=!0,this.DOM.firstChild(t))t=this.DOM.firstChild(t);else for(;t;){this.DOM.isElementNode(t)&&this.endElement(t);var n=this.checkClobberedElement(t,this.DOM.nextSibling(t));if(n){t=n;break}t=this.checkClobberedElement(t,this.DOM.parentElement(t))}return this.buf.join("")},Tn.prototype.startElement=function(e){var o=this,t=this.DOM.nodeName(e).toLowerCase();En.hasOwnProperty(t)?(this.buf.push("<"),this.buf.push(t),this.DOM.attributeMap(e).forEach(function(e,t){var n,r=t.toLowerCase();kn.hasOwnProperty(r)?(In[r]&&(e=mn(e)),An[r]&&(n=e,e=(n=String(n)).split(",").map(function(e){return mn(e.trim())}).join(", ")),o.buf.push(" "),o.buf.push(t),o.buf.push('="'),o.buf.push(Rn(e)),o.buf.push('"')):o.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},Tn.prototype.endElement=function(e){var t=this.DOM.nodeName(e).toLowerCase();En.hasOwnProperty(t)&&!vn.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))},Tn.prototype.chars=function(e){this.buf.push(Rn(e))},Tn.prototype.checkClobberedElement=function(e,t){if(t&&this.DOM.contains(e,t))throw new Error("Failed to sanitize html because the element is clobbered: "+this.DOM.getOuterHTML(e));return t},Tn);function Tn(){this.sanitizedSomething=!1,this.buf=[],this.DOM=Ve}var xn,Nn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Un=/([^\#-~ |!])/g;function Rn(e){return e.replace(/&/g,"&amp;").replace(Nn,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Un,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Mn=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Dn=/^url\(([^)]+)\)$/;function Fn(e){if(!(e=String(e).trim()))return"";var t=e.match(Dn);return t&&mn(t[1])===t[1]||e.match(Mn)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var o=e.charAt(r);"'"===o&&n?t=!t:'"'===o&&t&&(n=!n)}return t&&n}(e)?e:(h.isDevMode()&&Ve.log("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}var Ln;X(jn,Ln=function(){}),jn.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case h.SecurityContext.NONE:return t;case h.SecurityContext.HTML:return t instanceof zn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=Ve,r=null;try{xn=xn||new pn(e,n);var o=t?String(t):"",r=xn.getInertBodyElement(o),i=5,s=o;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,o=s,s=n.getInnerHTML(r),r=xn.getInertBodyElement(o)}while(o!==s);var a=new On,u=a.sanitizeChildren(n.getTemplateContent(r)||r);return h.isDevMode()&&a.sanitizedSomething&&n.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}finally{if(r)for(var c=n.getTemplateContent(r)||r,l=0,p=n.childNodesAsList(c);l<p.length;l++){var d=p[l];n.removeChild(c,d)}}}(this._doc,String(t)));case h.SecurityContext.STYLE:return t instanceof Gn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),Fn(t));case h.SecurityContext.SCRIPT:if(t instanceof Yn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case h.SecurityContext.URL:return t instanceof tr||t instanceof Qn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),mn(String(t)));case h.SecurityContext.RESOURCE_URL:if(t instanceof tr)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},jn.prototype.checkNotSafeValue=function(e,t){if(e instanceof Bn)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},jn.prototype.bypassSecurityTrustHtml=function(e){return new zn(e)},jn.prototype.bypassSecurityTrustStyle=function(e){return new Gn(e)},jn.prototype.bypassSecurityTrustScript=function(e){return new Yn(e)},jn.prototype.bypassSecurityTrustUrl=function(e){return new Qn(e)},jn.prototype.bypassSecurityTrustResourceUrl=function(e){return new tr(e)},jn.decorators=[{type:h.Injectable}],jn.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[nt]}]}]};function jn(e){var t=Ln.call(this)||this;return t._doc=e,t}var Bn=(Vn.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},Vn);function Vn(e){this.changingThisBreaksApplicationSecurity=e}var qn,zn=(X(Hn,qn=Bn),Hn.prototype.getTypeName=function(){return"HTML"},Hn);function Hn(){return null!==qn&&qn.apply(this,arguments)||this}var Kn,Gn=(X(Wn,Kn=Bn),Wn.prototype.getTypeName=function(){return"Style"},Wn);function Wn(){return null!==Kn&&Kn.apply(this,arguments)||this}var $n,Yn=(X(Jn,$n=Bn),Jn.prototype.getTypeName=function(){return"Script"},Jn);function Jn(){return null!==$n&&$n.apply(this,arguments)||this}var Zn,Qn=(X(Xn,Zn=Bn),Xn.prototype.getTypeName=function(){return"URL"},Xn);function Xn(){return null!==Zn&&Zn.apply(this,arguments)||this}var er,tr=(X(nr,er=Bn),nr.prototype.getTypeName=function(){return"ResourceURL"},nr);function nr(){return null!==er&&er.apply(this,arguments)||this}var rr=[{provide:h.PLATFORM_ID,useValue:t["ÉµPLATFORM_BROWSER_ID"]},{provide:h.PLATFORM_INITIALIZER,useValue:function(){Qe.makeCurrent(),ut.init()},multi:!0},{provide:t.PlatformLocation,useClass:it,deps:[nt]},{provide:nt,useFactory:function(){return document},deps:[]}];h.createPlatformFactory(h.platformCore,"browser",rr);or.init=function(e){var t=new or;return t.store=e,t},or.prototype.get=function(e,t){return void 0!==this.store[e]?this.store[e]:t},or.prototype.set=function(e,t){this.store[e]=t},or.prototype.remove=function(e){delete this.store[e]},or.prototype.hasKey=function(e){return this.store.hasOwnProperty(e)},or.prototype.onSerialize=function(e,t){this.onSerializeCallbacks[e]=t},or.prototype.toJson=function(){for(var e in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(e))try{this.store[e]=this.onSerializeCallbacks[e]()}catch(e){console.warn("Exception in onSerialize callback: ",e)}return JSON.stringify(this.store)},or.decorators=[{type:h.Injectable}],or.ctorParameters=function(){return[]};function or(){this.store={},this.onSerializeCallbacks={}}new h.Version("5.2.11");var ir=(Object.defineProperty(sr.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(sr.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(sr.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(sr.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(sr.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(sr.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(sr.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(sr.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(sr.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(sr.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(sr.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(sr.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(sr.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(sr.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(sr.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),sr.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},sr.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},sr.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},sr);function sr(){}var ar,ur=(X(cr,ar=ir),Object.defineProperty(cr.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(cr.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),cr);function cr(){return null!==ar&&ar.apply(this,arguments)||this}function lr(e){return null==e||0===e.length}var pr=new h.InjectionToken("NgValidators"),dr=new h.InjectionToken("NgAsyncValidators"),hr=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,fr=(mr.min=function(n){return function(e){if(lr(e.value)||lr(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}},mr.max=function(n){return function(e){if(lr(e.value)||lr(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&n<t?{max:{max:n,actual:e.value}}:null}},mr.required=function(e){return lr(e.value)?{required:!0}:null},mr.requiredTrue=function(e){return!0===e.value?null:{required:!0}},mr.email=function(e){return lr(e.value)||hr.test(e.value)?null:{email:!0}},mr.minLength=function(n){return function(e){if(lr(e.value))return null;var t=e.value?e.value.length:0;return t<n?{minlength:{requiredLength:n,actualLength:t}}:null}},mr.maxLength=function(n){return function(e){var t=e.value?e.value.length:0;return n<t?{maxlength:{requiredLength:n,actualLength:t}}:null}},mr.pattern=function(e){if(!e)return mr.nullValidator;var n,r="string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),new RegExp(n)):(n=e.toString(),e);return function(e){if(lr(e.value))return null;var t=e.value;return r.test(t)?null:{pattern:{requiredPattern:n,actualValue:t}}}},mr.nullValidator=function(e){return null},mr.compose=function(e){if(!e)return null;var n=e.filter(gr);return 0==n.length?null:function(e){return vr((t=e,n.map(function(e){return e(t)})));var t}},mr.composeAsync=function(e){if(!e)return null;var n=e.filter(gr);return 0==n.length?null:function(e){var t;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(he(n))return Be(n,null);if(fe(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return Be(r.map(function(e){return n[e]}),r)}}if("function"!=typeof e[e.length-1])return Be(e,null);var o=e.pop();return Be(e=1===e.length&&he(e[0])?e[0]:e,null).pipe(Te(function(e){return o.apply(void 0,e)}))}((t=e,n.map(function(e){return e(t)}).map(yr))).pipe(Te(vr))}},mr);function mr(){}function gr(e){return null!=e}function yr(e){var t=h["ÉµisPromise"](e)?je(e):e;if(!h["ÉµisObservable"](t))throw new Error("Expected validator to return Promise or Observable.");return t}function vr(e){var t=e.reduce(function(e,t){return null!=t?ee({},e,t):e},{});return 0===Object.keys(t).length?null:t}var br=new h.InjectionToken("NgValueAccessor"),wr={provide:br,useExisting:h.forwardRef(function(){return Sr}),multi:!0},Sr=(_r.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},_r.prototype.registerOnChange=function(e){this.onChange=e},_r.prototype.registerOnTouched=function(e){this.onTouched=e},_r.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},te([h.Directive({selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[wr]}),re("design:paramtypes",[h.Renderer2,h.ElementRef])],_r));function _r(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var Cr={provide:br,useExisting:h.forwardRef(function(){return Ir}),multi:!0};var Er=new h.InjectionToken("CompositionEventMode"),Ir=(Ar.prototype.writeValue=function(e){var t=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",t)},Ar.prototype.registerOnChange=function(e){this.onChange=e},Ar.prototype.registerOnTouched=function(e){this.onTouched=e},Ar.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Ar.prototype._handleInput=function(e){this._compositionMode&&(!this._compositionMode||this._composing)||this.onChange(e)},Ar.prototype._compositionStart=function(){this._composing=!0},Ar.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},te([h.Directive({selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[Cr]}),ne(2,h.Optional()),ne(2,h.Inject(Er)),re("design:paramtypes",[h.Renderer2,h.ElementRef,Boolean])],Ar));function Ar(e,t,n){var r;this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(r=Ve?Ve.getUserAgent():"",!/android (\d+)/.test(r.toLowerCase())))}function Pr(t){return t.validate?function(e){return t.validate(e)}:t}function kr(t){return t.validate?function(e){return t.validate(e)}:t}var Or={provide:br,useExisting:h.forwardRef(function(){return Tr}),multi:!0},Tr=(xr.prototype.writeValue=function(e){var t=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",t)},xr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},xr.prototype.registerOnTouched=function(e){this.onTouched=e},xr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},te([h.Directive({selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[Or]}),re("design:paramtypes",[h.Renderer2,h.ElementRef])],xr));function xr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}function Nr(){throw new Error("unimplemented")}var Ur,Rr=(X(Mr,Ur=ir),Object.defineProperty(Mr.prototype,"validator",{get:Nr,enumerable:!0,configurable:!0}),Object.defineProperty(Mr.prototype,"asyncValidator",{get:Nr,enumerable:!0,configurable:!0}),Mr);function Mr(){var e=null!==Ur&&Ur.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}var Dr={provide:br,useExisting:h.forwardRef(function(){return jr}),multi:!0},Fr=(Lr.prototype.add=function(e,t){this._accessors.push([e,t])},Lr.prototype.remove=function(e){for(var t=this._accessors.length-1;0<=t;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},Lr.prototype.select=function(t){var n=this;this._accessors.forEach(function(e){n._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})},Lr.prototype._isSameGroup=function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name},te([h.Injectable()],Lr));function Lr(){this._accessors=[]}var jr=(Br.prototype.ngOnInit=function(){this._control=this._injector.get(Rr),this._checkName(),this._registry.add(this._control,this)},Br.prototype.ngOnDestroy=function(){this._registry.remove(this)},Br.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},Br.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},Br.prototype.fireUncheck=function(e){this.writeValue(e)},Br.prototype.registerOnTouched=function(e){this.onTouched=e},Br.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Br.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},Br.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},te([h.Input(),re("design:type",String)],Br.prototype,"name",void 0),te([h.Input(),re("design:type",String)],Br.prototype,"formControlName",void 0),te([h.Input(),re("design:type",Object)],Br.prototype,"value",void 0),te([h.Directive({selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[Dr]}),re("design:paramtypes",[h.Renderer2,h.ElementRef,Fr,h.Injector])],Br));function Br(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}var Vr={provide:br,useExisting:h.forwardRef(function(){return qr}),multi:!0},qr=(zr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},zr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},zr.prototype.registerOnTouched=function(e){this.onTouched=e},zr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},te([h.Directive({selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[Vr]}),re("design:paramtypes",[h.Renderer2,h.ElementRef])],zr));function zr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var Hr='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Kr='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Gr='\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',Wr='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',$r='\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ',Yr=(Jr.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Hr)},Jr.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+Kr+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+Wr)},Jr.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Hr)},Jr.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Kr)},Jr.arrayParentException=function(){throw new Error("formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        "+Gr)},Jr.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},Jr.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},Jr);function Jr(){}var Zr={provide:br,useExisting:h.forwardRef(function(){return Xr}),multi:!0};function Qr(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var Xr=(Object.defineProperty(eo.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),eo.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=Qr(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)},eo.prototype.registerOnChange=function(t){var n=this;this.onChange=function(e){n.value=n._getOptionValue(e),t(n.value)}},eo.prototype.registerOnTouched=function(e){this.onTouched=e},eo.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},eo.prototype._registerOption=function(){return(this._idCounter++).toString()},eo.prototype._getOptionId=function(e){var t,n;try{for(var r=se(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i),e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},eo.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t):e},te([h.Input(),re("design:type",Function),re("design:paramtypes",[Function])],eo.prototype,"compareWith",null),te([h.Directive({selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[Zr]}),re("design:paramtypes",[h.Renderer2,h.ElementRef])],eo));function eo(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=h["ÉµlooseIdentical"]}var to=(Object.defineProperty(no.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Qr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(no.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),no.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},no.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},te([h.Input("ngValue"),re("design:type",Object),re("design:paramtypes",[Object])],no.prototype,"ngValue",null),te([h.Input("value"),re("design:type",Object),re("design:paramtypes",[Object])],no.prototype,"value",null),te([h.Directive({selector:"option"}),ne(2,h.Optional()),ne(2,h.Host()),re("design:paramtypes",[h.ElementRef,h.Renderer2,Xr])],no));function no(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}var ro={provide:br,useExisting:h.forwardRef(function(){return io}),multi:!0};function oo(e,t){return null==e?""+t:("string"==typeof t&&(t="'"+t+"'"),t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var io=(Object.defineProperty(so.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),so.prototype.writeValue=function(e){var n,t,r=this;this.value=e,t=Array.isArray(e)?(n=e.map(function(e){return r._getOptionId(e)}),function(e,t){e._setSelected(-1<n.indexOf(t.toString()))}):function(e,t){e._setSelected(!1)},this._optionMap.forEach(t)},so.prototype.registerOnChange=function(s){var a=this;this.onChange=function(e){var t=[];if(e.hasOwnProperty("selectedOptions"))for(var n=e.selectedOptions,r=0;r<n.length;r++){var o=n.item(r),i=a._getOptionValue(o.value);t.push(i)}else for(n=e.options,r=0;r<n.length;r++)(o=n.item(r)).selected&&(i=a._getOptionValue(o.value),t.push(i));a.value=t,s(t)}},so.prototype.registerOnTouched=function(e){this.onTouched=e},so.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},so.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},so.prototype._getOptionId=function(e){var t,n;try{for(var r=se(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i)._value,e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},so.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t)._value:e},te([h.Input(),re("design:type",Function),re("design:paramtypes",[Function])],so.prototype,"compareWith",null),te([h.Directive({selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[ro]}),re("design:paramtypes",[h.Renderer2,h.ElementRef])],so));function so(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=h["ÉµlooseIdentical"]}var ao=(Object.defineProperty(uo.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(oo(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(uo.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(oo(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),uo.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},uo.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},uo.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},te([h.Input("ngValue"),re("design:type",Object),re("design:paramtypes",[Object])],uo.prototype,"ngValue",null),te([h.Input("value"),re("design:type",Object),re("design:paramtypes",[Object])],uo.prototype,"value",null),te([h.Directive({selector:"option"}),ne(2,h.Optional()),ne(2,h.Host()),re("design:paramtypes",[h.ElementRef,h.Renderer2,io])],uo));function uo(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}function co(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ae(arguments[t]));return e}(t.path,[e])}function lo(t,n){var r,o,i,e,s;t||mo(n,"Cannot find control with"),n.valueAccessor||mo(n,"No value accessor for form control with"),t.validator=fr.compose([t.validator,n.validator]),t.asyncValidator=fr.composeAsync([t.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(t.value),r=t,(o=n).valueAccessor.registerOnChange(function(e){r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&po(r,o)}),i=n,t.registerOnChange(function(e,t){i.valueAccessor.writeValue(e),t&&i.viewToModelUpdate(e)}),e=t,(s=n).valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&po(e,s),"submit"!==e.updateOn&&e.markAsTouched()}),n.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(e){n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function po(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function ho(e,t){null==e&&mo(t,"Cannot find control with"),e.validator=fr.compose([e.validator,t.validator]),e.asyncValidator=fr.composeAsync([e.asyncValidator,t.asyncValidator])}function fo(e){return mo(e,"There is no FormControl instance attached to form control element with")}function mo(e,t){var n=1<e.path.length?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute";throw new Error(t+" "+n)}function go(e){return null!=e?fr.compose(e.map(Pr)):null}function yo(e){return null!=e?fr.composeAsync(e.map(kr)):null}function vo(e,t){if(e.hasOwnProperty("model")){var n=e.model;return n.isFirstChange()||!h["ÉµlooseIdentical"](t,n.currentValue)}}var bo=[Sr,qr,Tr,Xr,io,jr];function wo(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function So(n,e){if(!e)return null;Array.isArray(e)||mo(n,"Value accessor was not provided as an array for form control with");var r=void 0,o=void 0,i=void 0;return e.forEach(function(e){var t;e.constructor===Ir?r=e:(t=e,bo.some(function(e){return t.constructor===e})?(o&&mo(n,"More than one built-in value accessor matches form control with"),o=e):(i&&mo(n,"More than one custom value accessor matches form control with"),i=e))}),i||(o||(r||(mo(n,"No valid value accessor for form control with"),null)))}function _o(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function Co(e,t,n,r){h.isDevMode()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(Yr.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}var Eo,Io=(X(Ao,Eo=ur),Ao.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},Ao.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(Ao.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Ao.prototype,"path",{get:function(){return co(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Ao.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Ao.prototype,"validator",{get:function(){return go(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Ao.prototype,"asyncValidator",{get:function(){return yo(this._asyncValidators)},enumerable:!0,configurable:!0}),Ao.prototype._checkParentType=function(){},Ao);function Ao(){return null!==Eo&&Eo.apply(this,arguments)||this}var Po=(Object.defineProperty(ko.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(ko.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(ko.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(ko.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(ko.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(ko.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(ko.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),ko);function ko(e){this._cd=e}var Oo,To={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},xo=(X(No,Oo=Po),te([h.Directive({selector:"[formControlName],[ngModel],[formControl]",host:To}),ne(0,h.Self()),re("design:paramtypes",[Rr])],No));function No(e){return Oo.call(this,e)||this}var Uo,Ro=(X(Mo,Uo=Po),te([h.Directive({selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:To}),ne(0,h.Self()),re("design:paramtypes",[ur])],Mo));function Mo(e){return Uo.call(this,e)||this}var Do="VALID",Fo="INVALID",Lo="PENDING",jo="DISABLED";function Bo(e){var t=qo(e)?e.validators:e;return Array.isArray(t)?go(t):t||null}function Vo(e,t){var n=qo(t)?t.asyncValidators:e;return Array.isArray(n)?yo(n):n||null}function qo(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var zo=(Object.defineProperty(Ho.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(Ho.prototype,"valid",{get:function(){return this.status===Do},enumerable:!0,configurable:!0}),Object.defineProperty(Ho.prototype,"invalid",{get:function(){return this.status===Fo},enumerable:!0,configurable:!0}),Object.defineProperty(Ho.prototype,"pending",{get:function(){return this.status==Lo},enumerable:!0,configurable:!0}),Object.defineProperty(Ho.prototype,"disabled",{get:function(){return this.status===jo},enumerable:!0,configurable:!0}),Object.defineProperty(Ho.prototype,"enabled",{get:function(){return this.status!==jo},enumerable:!0,configurable:!0}),Object.defineProperty(Ho.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(Ho.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(Ho.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),Ho.prototype.setValidators=function(e){this.validator=Bo(e)},Ho.prototype.setAsyncValidators=function(e){this.asyncValidator=Vo(e)},Ho.prototype.clearValidators=function(){this.validator=null},Ho.prototype.clearAsyncValidators=function(){this.asyncValidator=null},Ho.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},Ho.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},Ho.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},Ho.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},Ho.prototype.markAsPending=function(e){void 0===e&&(e={}),!(this.status=Lo)!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},Ho.prototype.disable=function(t){void 0===t&&(t={}),this.status=jo,this.errors=null,this._forEachChild(function(e){e.disable(ee({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!0)})},Ho.prototype.enable=function(t){void 0===t&&(t={}),this.status=Do,this._forEachChild(function(e){e.enable(ee({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!1)})},Ho.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},Ho.prototype.setParent=function(e){this._parent=e},Ho.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Do&&this.status!==Lo||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},Ho.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},Ho.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?jo:Do},Ho.prototype._runValidator=function(){return this.validator?this.validator(this):null},Ho.prototype._runAsyncValidator=function(t){var e,n=this;this.asyncValidator&&(this.status=Lo,e=yr(this.asyncValidator(this)),this._asyncValidationSubscription=e.subscribe(function(e){return n.setErrors(e,{emitEvent:t})}))},Ho.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},Ho.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},Ho.prototype.get=function(e){return t=this,r=".",null==(n=e)?null:(n instanceof Array||(n=n.split(r)),n instanceof Array&&0===n.length?null:n.reduce(function(e,t){return e instanceof Yo?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Qo&&e.at(t)||null},t));var t,n,r},Ho.prototype.getError=function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null},Ho.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(Ho.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),Ho.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},Ho.prototype._initObservables=function(){this.valueChanges=new h.EventEmitter,this.statusChanges=new h.EventEmitter},Ho.prototype._calculateStatus=function(){return this._allControlsDisabled()?jo:this.errors?Fo:this._anyControlsHaveStatus(Lo)?Lo:this._anyControlsHaveStatus(Fo)?Fo:Do},Ho.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},Ho.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},Ho.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},Ho.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},Ho.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},Ho.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},Ho.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},Ho.prototype._setUpdateStrategy=function(e){qo(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},Ho);function Ho(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}var Ko,Go=(X(Wo,Ko=zo),Wo.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},Wo.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},Wo.prototype.reset=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},Wo.prototype._updateValue=function(){},Wo.prototype._anyControls=function(e){return!1},Wo.prototype._allControlsDisabled=function(){return this.disabled},Wo.prototype.registerOnChange=function(e){this._onChange.push(e)},Wo.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},Wo.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},Wo.prototype._forEachChild=function(e){},Wo.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},Wo.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},Wo);function Wo(e,t,n){void 0===e&&(e=null);var r=Ko.call(this,Bo(t),Vo(n,t))||this;return r._onChange=[],r._applyFormState(e),r._setUpdateStrategy(t),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r._initObservables(),r}var $o,Yo=(X(Jo,$o=zo),Jo.prototype.registerControl=function(e,t){return this.controls[e]?this.controls[e]:((this.controls[e]=t).setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},Jo.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},Jo.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},Jo.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},Jo.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},Jo.prototype.setValue=function(t,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(e){r._throwIfControlMissing(e),r.controls[e].setValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Jo.prototype.patchValue=function(t,n){var r=this;void 0===n&&(n={}),Object.keys(t).forEach(function(e){r.controls[e]&&r.controls[e].patchValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Jo.prototype.reset=function(n,r){void 0===n&&(n={}),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},Jo.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof Go?t.value:t.getRawValue(),e})},Jo.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},Jo.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},Jo.prototype._forEachChild=function(t){var n=this;Object.keys(this.controls).forEach(function(e){return t(n.controls[e],e)})},Jo.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},Jo.prototype._updateValue=function(){this.value=this._reduceValue()},Jo.prototype._anyControls=function(n){var r=this,o=!1;return this._forEachChild(function(e,t){o=o||r.contains(t)&&n(e)}),o},Jo.prototype._reduceValue=function(){var r=this;return this._reduceChildren({},function(e,t,n){return(t.enabled||r.disabled)&&(e[n]=t.value),e})},Jo.prototype._reduceChildren=function(e,n){var r=e;return this._forEachChild(function(e,t){r=n(r,e,t)}),r},Jo.prototype._allControlsDisabled=function(){var t,e;try{for(var n=se(Object.keys(this.controls)),r=n.next();!r.done;r=n.next()){var o=r.value;if(this.controls[o].enabled)return!1}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return 0<Object.keys(this.controls).length||this.disabled},Jo.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control with name: '"+t+"'.")})},Jo);function Jo(e,t,n){var r=$o.call(this,Bo(t),Vo(n,t))||this;return r.controls=e,r._initObservables(),r._setUpdateStrategy(t),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}var Zo,Qo=(X(Xo,Zo=zo),Xo.prototype.at=function(e){return this.controls[e]},Xo.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},Xo.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},Xo.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},Xo.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(Xo.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),Xo.prototype.setValue=function(e,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),e.forEach(function(e,t){r._throwIfControlMissing(t),r.at(t).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Xo.prototype.patchValue=function(e,n){var r=this;void 0===n&&(n={}),e.forEach(function(e,t){r.at(t)&&r.at(t).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Xo.prototype.reset=function(n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},Xo.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof Go?e.value:e.getRawValue()})},Xo.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},Xo.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},Xo.prototype._forEachChild=function(n){this.controls.forEach(function(e,t){n(e,t)})},Xo.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(e){return e.value})},Xo.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},Xo.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},Xo.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control at index: "+t+".")})},Xo.prototype._allControlsDisabled=function(){var t,e;try{for(var n=se(this.controls),r=n.next();!r.done;r=n.next())if(r.value.enabled)return!1}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return 0<this.controls.length||this.disabled},Xo.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},Xo);function Xo(e,t,n){var r=Zo.call(this,Bo(t),Vo(n,t))||this;return r.controls=e,r._initObservables(),r._setUpdateStrategy(t),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}var ei,ti={provide:ur,useExisting:h.forwardRef(function(){return ri})},ni=Promise.resolve(null),ri=(X(oi,ei=ur),oi.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(oi.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),oi.prototype.addControl=function(t){var n=this;ni.then(function(){var e=n._findContainer(t.path);t.control=e.registerControl(t.name,t.control),lo(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),n._directives.push(t)})},oi.prototype.getControl=function(e){return this.form.get(e.path)},oi.prototype.removeControl=function(t){var n=this;ni.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name),_o(n._directives,t)})},oi.prototype.addFormGroup=function(n){var r=this;ni.then(function(){var e=r._findContainer(n.path),t=new Yo({});ho(t,n),e.registerControl(n.name,t),t.updateValueAndValidity({emitEvent:!1})})},oi.prototype.removeFormGroup=function(t){var n=this;ni.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name)})},oi.prototype.getFormGroup=function(e){return this.form.get(e.path)},oi.prototype.updateModel=function(e,t){var n=this;ni.then(function(){n.form.get(e.path).setValue(t)})},oi.prototype.setValue=function(e){this.control.setValue(e)},oi.prototype.onSubmit=function(e){return this.submitted=!0,wo(this.form,this._directives),this.ngSubmit.emit(e),!1},oi.prototype.onReset=function(){this.resetForm()},oi.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},oi.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},oi.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},te([h.Input("ngFormOptions"),re("design:type",Object)],oi.prototype,"options",void 0),te([h.Directive({selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[ti],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}),ne(0,h.Optional()),ne(0,h.Self()),ne(0,h.Inject(pr)),ne(1,h.Optional()),ne(1,h.Self()),ne(1,h.Inject(dr)),re("design:paramtypes",[Array,Array])],oi));function oi(e,t){var n=ei.call(this)||this;return n.submitted=!1,n._directives=[],n.ngSubmit=new h.EventEmitter,n.form=new Yo({},go(e),yo(t)),n}var ii=(si.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+Hr+"\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      "+$r)},si.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+Kr+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+Wr)},si.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},si.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+Kr+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+Wr)},si);function si(){}var ai,ui,ci={provide:ur,useExisting:h.forwardRef(function(){return li})},li=(X(pi,ai=Io),(ui=pi).prototype._checkParentType=function(){this._parent instanceof ui||this._parent instanceof ri||ii.modelGroupParentException()},te([h.Input("ngModelGroup"),re("design:type",String)],pi.prototype,"name",void 0),ui=te([h.Directive({selector:"[ngModelGroup]",providers:[ci],exportAs:"ngModelGroup"}),ne(0,h.Host()),ne(0,h.SkipSelf()),ne(1,h.Optional()),ne(1,h.Self()),ne(1,h.Inject(pr)),ne(2,h.Optional()),ne(2,h.Self()),ne(2,h.Inject(dr)),re("design:paramtypes",[ur,Array,Array])],pi));function pi(e,t,n){var r=ai.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var di,hi={provide:Rr,useExisting:h.forwardRef(function(){return mi})},fi=Promise.resolve(null),mi=(X(gi,di=Rr),gi.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),vo(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},gi.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(gi.prototype,"path",{get:function(){return this._parent?co(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(gi.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(gi.prototype,"validator",{get:function(){return go(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(gi.prototype,"asyncValidator",{get:function(){return yo(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),gi.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},gi.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},gi.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},gi.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},gi.prototype._setUpStandalone=function(){lo(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},gi.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},gi.prototype._checkParentType=function(){!(this._parent instanceof li)&&this._parent instanceof Io?ii.formGroupNameException():this._parent instanceof li||this._parent instanceof ri||ii.modelParentException()},gi.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||ii.missingNameException()},gi.prototype._updateValue=function(e){var t=this;fi.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},gi.prototype._updateDisabled=function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;fi.then(function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()})},te([h.Input(),re("design:type",String)],gi.prototype,"name",void 0),te([h.Input("disabled"),re("design:type",Boolean)],gi.prototype,"isDisabled",void 0),te([h.Input("ngModel"),re("design:type",Object)],gi.prototype,"model",void 0),te([h.Input("ngModelOptions"),re("design:type",Object)],gi.prototype,"options",void 0),te([h.Output("ngModelChange"),re("design:type",Object)],gi.prototype,"update",void 0),te([h.Directive({selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[hi],exportAs:"ngModel"}),ne(0,h.Optional()),ne(0,h.Host()),ne(1,h.Optional()),ne(1,h.Self()),ne(1,h.Inject(pr)),ne(2,h.Optional()),ne(2,h.Self()),ne(2,h.Inject(dr)),ne(3,h.Optional()),ne(3,h.Self()),ne(3,h.Inject(br)),re("design:paramtypes",[ur,Array,Array,Array])],gi));function gi(e,t,n,r){var o=di.call(this)||this;return o.control=new Go,o._registered=!1,o.update=new h.EventEmitter,o._parent=e,o._rawValidators=t||[],o._rawAsyncValidators=n||[],o.valueAccessor=So(o,r),o}var yi,vi,bi=new h.InjectionToken("NgModelWithFormControlWarning"),wi={provide:Rr,useExisting:h.forwardRef(function(){return Si})},Si=(X(_i,yi=Rr),vi=_i,Object.defineProperty(_i.prototype,"isDisabled",{set:function(e){Yr.disabledAttrWarning()},enumerable:!0,configurable:!0}),_i.prototype.ngOnChanges=function(e){this._isControlChanged(e)&&(lo(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),vo(e,this.viewModel)&&(Co("formControl",vi,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(_i.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(_i.prototype,"validator",{get:function(){return go(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(_i.prototype,"asyncValidator",{get:function(){return yo(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(_i.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),_i.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},_i.prototype._isControlChanged=function(e){return e.hasOwnProperty("form")},_i._ngModelWarningSentOnce=!1,te([h.Input("formControl"),re("design:type",Go)],_i.prototype,"form",void 0),te([h.Input("disabled"),re("design:type",Boolean),re("design:paramtypes",[Boolean])],_i.prototype,"isDisabled",null),te([h.Input("ngModel"),re("design:type",Object)],_i.prototype,"model",void 0),te([h.Output("ngModelChange"),re("design:type",Object)],_i.prototype,"update",void 0),vi=te([h.Directive({selector:"[formControl]",providers:[wi],exportAs:"ngForm"}),ne(0,h.Optional()),ne(0,h.Self()),ne(0,h.Inject(pr)),ne(1,h.Optional()),ne(1,h.Self()),ne(1,h.Inject(dr)),ne(2,h.Optional()),ne(2,h.Self()),ne(2,h.Inject(br)),ne(3,h.Optional()),ne(3,h.Inject(bi)),re("design:paramtypes",[Array,Array,Array,Object])],_i));function _i(e,t,n,r){var o=yi.call(this)||this;return o._ngModelWarningConfig=r,o.update=new h.EventEmitter,o._ngModelWarningSent=!1,o._rawValidators=e||[],o._rawAsyncValidators=t||[],o.valueAccessor=So(o,n),o}var Ci,Ei={provide:ur,useExisting:h.forwardRef(function(){return Ii})},Ii=(X(Ai,Ci=ur),Ai.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(Ai.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Ai.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(Ai.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Ai.prototype.addControl=function(e){var t=this.form.get(e.path);return lo(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},Ai.prototype.getControl=function(e){return this.form.get(e.path)},Ai.prototype.removeControl=function(e){_o(this.directives,e)},Ai.prototype.addFormGroup=function(e){var t=this.form.get(e.path);ho(t,e),t.updateValueAndValidity({emitEvent:!1})},Ai.prototype.removeFormGroup=function(e){},Ai.prototype.getFormGroup=function(e){return this.form.get(e.path)},Ai.prototype.addFormArray=function(e){var t=this.form.get(e.path);ho(t,e),t.updateValueAndValidity({emitEvent:!1})},Ai.prototype.removeFormArray=function(e){},Ai.prototype.getFormArray=function(e){return this.form.get(e.path)},Ai.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},Ai.prototype.onSubmit=function(e){return this.submitted=!0,wo(this.form,this.directives),this.ngSubmit.emit(e),!1},Ai.prototype.onReset=function(){this.resetForm()},Ai.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},Ai.prototype._updateDomValue=function(){var o=this;this.directives.forEach(function(e){var t,n,r=o.form.get(e.path);e.control!==r&&(t=e.control,(n=e).valueAccessor.registerOnChange(function(){return fo(n)}),n.valueAccessor.registerOnTouched(function(){return fo(n)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t&&t._clearChangeFns(),r&&lo(r,e),e.control=r)}),this.form._updateTreeValidity({emitEvent:!1})},Ai.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange(function(){return e._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},Ai.prototype._updateValidators=function(){var e=go(this._validators);this.form.validator=fr.compose([this.form.validator,e]);var t=yo(this._asyncValidators);this.form.asyncValidator=fr.composeAsync([this.form.asyncValidator,t])},Ai.prototype._checkFormPresent=function(){this.form||Yr.missingFormException()},te([h.Input("formGroup"),re("design:type",Yo)],Ai.prototype,"form",void 0),te([h.Output(),re("design:type",Object)],Ai.prototype,"ngSubmit",void 0),te([h.Directive({selector:"[formGroup]",providers:[Ei],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}),ne(0,h.Optional()),ne(0,h.Self()),ne(0,h.Inject(pr)),ne(1,h.Optional()),ne(1,h.Self()),ne(1,h.Inject(dr)),re("design:paramtypes",[Array,Array])],Ai));function Ai(e,t){var n=Ci.call(this)||this;return n._validators=e,n._asyncValidators=t,n.submitted=!1,n.directives=[],n.form=null,n.ngSubmit=new h.EventEmitter,n}var Pi,ki={provide:ur,useExisting:h.forwardRef(function(){return Oi})},Oi=(X(Ti,Pi=Io),Ti.prototype._checkParentType=function(){Mi(this._parent)&&Yr.groupParentException()},te([h.Input("formGroupName"),re("design:type",String)],Ti.prototype,"name",void 0),te([h.Directive({selector:"[formGroupName]",providers:[ki]}),ne(0,h.Optional()),ne(0,h.Host()),ne(0,h.SkipSelf()),ne(1,h.Optional()),ne(1,h.Self()),ne(1,h.Inject(pr)),ne(2,h.Optional()),ne(2,h.Self()),ne(2,h.Inject(dr)),re("design:paramtypes",[ur,Array,Array])],Ti));function Ti(e,t,n){var r=Pi.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var xi,Ni={provide:ur,useExisting:h.forwardRef(function(){return Ui})},Ui=(X(Ri,xi=ur),Ri.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},Ri.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(Ri.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Ri.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Ri.prototype,"path",{get:function(){return co(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Ri.prototype,"validator",{get:function(){return go(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Ri.prototype,"asyncValidator",{get:function(){return yo(this._asyncValidators)},enumerable:!0,configurable:!0}),Ri.prototype._checkParentType=function(){Mi(this._parent)&&Yr.arrayParentException()},te([h.Input("formArrayName"),re("design:type",String)],Ri.prototype,"name",void 0),te([h.Directive({selector:"[formArrayName]",providers:[Ni]}),ne(0,h.Optional()),ne(0,h.Host()),ne(0,h.SkipSelf()),ne(1,h.Optional()),ne(1,h.Self()),ne(1,h.Inject(pr)),ne(2,h.Optional()),ne(2,h.Self()),ne(2,h.Inject(dr)),re("design:paramtypes",[ur,Array,Array])],Ri));function Ri(e,t,n){var r=xi.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}function Mi(e){return!(e instanceof Oi||e instanceof Ii||e instanceof Ui)}var Di,Fi,Li={provide:Rr,useExisting:h.forwardRef(function(){return ji})},ji=(X(Bi,Di=Rr),Fi=Bi,Object.defineProperty(Bi.prototype,"isDisabled",{set:function(e){Yr.disabledAttrWarning()},enumerable:!0,configurable:!0}),Bi.prototype.ngOnChanges=function(e){this._added||this._setUpControl(),vo(e,this.viewModel)&&(Co("formControlName",Fi,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},Bi.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Bi.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(Bi.prototype,"path",{get:function(){return co(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Bi.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Bi.prototype,"validator",{get:function(){return go(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Bi.prototype,"asyncValidator",{get:function(){return yo(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Bi.prototype._checkParentType=function(){!(this._parent instanceof Oi)&&this._parent instanceof Io?Yr.ngModelGroupException():this._parent instanceof Oi||this._parent instanceof Ii||this._parent instanceof Ui||Yr.controlParentException()},Bi.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},Bi._ngModelWarningSentOnce=!1,te([h.Input("formControlName"),re("design:type",String)],Bi.prototype,"name",void 0),te([h.Input("disabled"),re("design:type",Boolean),re("design:paramtypes",[Boolean])],Bi.prototype,"isDisabled",null),te([h.Input("ngModel"),re("design:type",Object)],Bi.prototype,"model",void 0),te([h.Output("ngModelChange"),re("design:type",Object)],Bi.prototype,"update",void 0),Fi=te([h.Directive({selector:"[formControlName]",providers:[Li]}),ne(0,h.Optional()),ne(0,h.Host()),ne(0,h.SkipSelf()),ne(1,h.Optional()),ne(1,h.Self()),ne(1,h.Inject(pr)),ne(2,h.Optional()),ne(2,h.Self()),ne(2,h.Inject(dr)),ne(3,h.Optional()),ne(3,h.Self()),ne(3,h.Inject(br)),ne(4,h.Optional()),ne(4,h.Inject(bi)),re("design:paramtypes",[ur,Array,Array,Array,Object])],Bi));function Bi(e,t,n,r,o){var i=Di.call(this)||this;return i._ngModelWarningConfig=o,i._added=!1,i.update=new h.EventEmitter,i._ngModelWarningSent=!1,i._parent=e,i._rawValidators=t||[],i._rawAsyncValidators=n||[],i.valueAccessor=So(i,r),i}var Vi={provide:pr,useExisting:h.forwardRef(function(){return zi}),multi:!0},qi={provide:pr,useExisting:h.forwardRef(function(){return Gi}),multi:!0},zi=(Object.defineProperty(Hi.prototype,"required",{get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),Hi.prototype.validate=function(e){return this.required?fr.required(e):null},Hi.prototype.registerOnValidatorChange=function(e){this._onChange=e},te([h.Input(),re("design:type",Object),re("design:paramtypes",[Object])],Hi.prototype,"required",null),te([h.Directive({selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[Vi],host:{"[attr.required]":'required ? "" : null'}})],Hi));function Hi(){}var Ki,Gi=(X(Wi,Ki=zi),Wi.prototype.validate=function(e){return this.required?fr.requiredTrue(e):null},te([h.Directive({selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[qi],host:{"[attr.required]":'required ? "" : null'}})],Wi));function Wi(){return null!==Ki&&Ki.apply(this,arguments)||this}var $i={provide:pr,useExisting:h.forwardRef(function(){return Yi}),multi:!0},Yi=(Object.defineProperty(Ji.prototype,"email",{set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),Ji.prototype.validate=function(e){return this._enabled?fr.email(e):null},Ji.prototype.registerOnValidatorChange=function(e){this._onChange=e},te([h.Input(),re("design:type",Object),re("design:paramtypes",[Object])],Ji.prototype,"email",null),te([h.Directive({selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[$i]})],Ji));function Ji(){}var Zi={provide:pr,useExisting:h.forwardRef(function(){return Qi}),multi:!0},Qi=(Xi.prototype.ngOnChanges=function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},Xi.prototype.validate=function(e){return null==this.minlength?null:this._validator(e)},Xi.prototype.registerOnValidatorChange=function(e){this._onChange=e},Xi.prototype._createValidator=function(){this._validator=fr.minLength(parseInt(this.minlength,10))},te([h.Input(),re("design:type",String)],Xi.prototype,"minlength",void 0),te([h.Directive({selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[Zi],host:{"[attr.minlength]":"minlength ? minlength : null"}})],Xi));function Xi(){}var es={provide:pr,useExisting:h.forwardRef(function(){return ts}),multi:!0},ts=(ns.prototype.ngOnChanges=function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},ns.prototype.validate=function(e){return null!=this.maxlength?this._validator(e):null},ns.prototype.registerOnValidatorChange=function(e){this._onChange=e},ns.prototype._createValidator=function(){this._validator=fr.maxLength(parseInt(this.maxlength,10))},te([h.Input(),re("design:type",String)],ns.prototype,"maxlength",void 0),te([h.Directive({selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[es],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}})],ns));function ns(){}var rs={provide:pr,useExisting:h.forwardRef(function(){return os}),multi:!0},os=(is.prototype.ngOnChanges=function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())},is.prototype.validate=function(e){return this._validator(e)},is.prototype.registerOnValidatorChange=function(e){this._onChange=e},is.prototype._createValidator=function(){this._validator=fr.pattern(this.pattern)},te([h.Input(),re("design:type",Object)],is.prototype,"pattern",void 0),te([h.Directive({selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[rs],host:{"[attr.pattern]":"pattern ? pattern : null"}})],is));function is(){}var ss=(as.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),r=null!=t?t.validator:null,o=null!=t?t.asyncValidator:null;return new Yo(n,r,o)},as.prototype.control=function(e,t,n){return new Go(e,t,n)},as.prototype.array=function(e,t,n){var r=this,o=e.map(function(e){return r._createControl(e)});return new Qo(o,t,n)},as.prototype._reduceControls=function(t){var n=this,r={};return Object.keys(t).forEach(function(e){r[e]=n._createControl(t[e])}),r},as.prototype._createControl=function(e){if(e instanceof Go||e instanceof Yo||e instanceof Qo)return e;if(Array.isArray(e)){var t=e[0],n=1<e.length?e[1]:null,r=2<e.length?e[2]:null;return this.control(t,n,r)}return this.control(e)},te([h.Injectable()],as));function as(){}new h.Version("6.1.10");function us(){}var cs=[te([h.Directive({selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}})],us),to,ao,Ir,Tr,qr,Sr,Xr,io,jr,xo,Ro,zi,Qi,ts,os,Gi,Yi],ls=[mi,li,ri],ps=[Si,Ii,ji,Oi,Ui],ds=te([h.NgModule({declarations:cs,exports:cs})],hs);function hs(){}var fs=te([h.NgModule({declarations:ls,providers:[Fr],exports:[ds,ls]})],ms);function ms(){}var gs;(gs=ys).withConfig=function(e){return{ngModule:gs,providers:[{provide:bi,useValue:e.warnOnNgModelWithFormControl}]}},gs=te([h.NgModule({declarations:[ps],providers:[ss,Fr],exports:[ds,ps]})],ys);function ys(){}var vs=(bs.decorators=[{type:h.Directive,args:[{selector:"[component-host]"}]}],bs.ctorParameters=function(){return[{type:h.ViewContainerRef}]},bs);function bs(e){this.viewContainerRef=e}var ws=function(e,t){this.component=e,this.data=t},Ss=new x.Logger("AuthDecorator");function _s(e,t){var n,o,r,i,s,a,u,c,l,p,d,h,f,m,g;n=e,t.currentAuthenticatedUser().then(function(e){Ss.debug("has authenticated user",e),n.next({state:"signedIn",user:e})}).catch(function(e){Ss.debug("no authenticated user",e),n.next({state:"signedOut",user:null})}),o=e,r=x.Amplify.configure(null),y.has(r,"Auth.oauth")&&x.Hub.listen("auth",{onHubCapsule:function(e){var t,n=e.channel,r=e.payload;"auth"===n&&(t=r.data.username,Ss.debug("authentication oauth event",r),o.next({state:r.event,user:{username:t}}))}},"angularAuthListener"),i=e,a=(s=t).signIn,s.signIn=function(e,t){return a.call(s,e,t).then(function(e){return Ss.debug("signIn success"),e.challengeName?(Ss.debug("signIn challenge: "+e.challengeName),"NEW_PASSWORD_REQUIRED"===e.challengeName?i.next({state:"requireNewPassword",user:e}):"MFA_SETUP"===e.challengeName?i.next({state:"setupMFA",user:e}):"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?i.next({state:"confirmSignIn",user:e}):Ss.debug("warning: unhandled challengeName "+e.challengeName)):i.next({state:"signedIn",user:e}),e}).catch(function(e){throw Ss.debug("signIn error",e),e})},u=e,l=(c=t).signOut,c.signOut=function(e){return l.call(c,e).then(function(e){return Ss.debug("signOut success"),u.next({state:"signedOut",user:null}),e}).catch(function(e){throw Ss.debug("signOut error",e),e})},p=e,h=(d=t).signUp,d.signUp=function(t,e,n,r){return h.call(d,t,e,n,r).then(function(e){return Ss.debug("signUp success"),p.next({state:"confirmSignUp",user:{username:t}}),e}).catch(function(e){throw Ss.debug("signUp error",e),e})},f=e,g=(m=t).confirmSignUp,m.confirmSignUp=function(t,e){return g.call(m,t,e).then(function(e){return Ss.debug("confirmSignUp success"),f.next({state:"signIn",user:{username:t}}),e}).catch(function(e){throw Ss.debug("confirmSignUp error",e),e})}}var Cs,Es="pinpoint.{region}.amazonaws.com",Is=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),As=new Set(["cn-north-1","cn-northwest-1"]),Ps=new Set(["us-iso-east-1"]),ks=new Set(["us-isob-east-1"]),Os=new Set(["us-gov-west-1","us-gov-east-1"]),Ts=ee(ee({},{apiVersion:"2016-12-01",disableHostPrefix:!1,regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",signingService:"mobiletargeting"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",signingService:"mobiletargeting"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",signingService:"mobiletargeting"};break;default:Is.has(e)&&(n={hostname:Es.replace("{region}",e),signingService:"mobiletargeting"}),As.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e)}),Ps.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e)}),ks.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e)}),Os.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:Es.replace("{region}",e),signingService:"mobiletargeting"})}return Promise.resolve(n)},signingName:"mobiletargeting"}),{runtime:"node",base64Decoder:a.fromBase64,base64Encoder:a.toBase64,bodyLengthChecker:u.calculateBodyLength,credentialDefaultProvider:n.defaultProvider,defaultUserAgent:c.defaultUserAgent("@aws-sdk/client-pinpoint","1.0.0-gamma.2"),regionDefaultProvider:i.defaultProvider,requestHandler:new o.NodeHttpHandler,sha256:r.Hash.bind(null,"sha256"),streamCollector:o.streamCollector,urlParser:s.parseUrl,utf8Decoder:l.fromUtf8,utf8Encoder:l.toUtf8}),xs=(X(Ns,Cs=b.Client),Ns.prototype.destroy=function(){Cs.prototype.destroy.call(this)},Ns);function Ns(e){var t=this,n=ee(ee({},Ts),e),r=p.resolveRegionConfig(n),o=p.resolveEndpointsConfig(r),i=g.resolveAwsAuthConfig(o),s=m.resolveRetryConfig(i),a=v.resolveUserAgentConfig(s),u=f.resolveHostHeaderConfig(a);return(t=Cs.call(this,u)||this).config=u,t.middlewareStack.use(g.getAwsAuthPlugin(t.config)),t.middlewareStack.use(m.getRetryPlugin(t.config)),t.middlewareStack.use(v.getUserAgentPlugin(t.config)),t.middlewareStack.use(d.getContentLengthPlugin(t.config)),t.middlewareStack.use(f.getHostHeaderPlugin(t.config)),t}function Us(e,t){return ee(ee(ee(ee(ee(ee(ee(ee({},void 0!==e.AppVersion&&{AppVersion:e.AppVersion}),void 0!==e.Locale&&{Locale:e.Locale}),void 0!==e.Make&&{Make:e.Make}),void 0!==e.Model&&{Model:e.Model}),void 0!==e.ModelVersion&&{ModelVersion:e.ModelVersion}),void 0!==e.Platform&&{Platform:e.Platform}),void 0!==e.PlatformVersion&&{PlatformVersion:e.PlatformVersion}),void 0!==e.Timezone&&{Timezone:e.Timezone})}function Rs(e,t){return ee(ee(ee(ee(ee(ee({},void 0!==e.City&&{City:e.City}),void 0!==e.Country&&{Country:e.Country}),void 0!==e.Latitude&&{Latitude:e.Latitude}),void 0!==e.Longitude&&{Longitude:e.Longitude}),void 0!==e.PostalCode&&{PostalCode:e.PostalCode}),void 0!==e.Region&&{Region:e.Region})}function Ms(e,t){return r=t,void 0===(n=e)&&(n=new Uint8Array),(n instanceof Uint8Array?Promise.resolve(n):r.streamCollector(n)||Promise.resolve(new Uint8Array)).then(function(e){return t.utf8Encoder(e)});var n,r}var Ds,Fs=function(f,m){return oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h;return ie(this,function(e){switch(e.label){case 0:return n=[ee({},f)],r={},[4,da(f.body,m)];case 1:switch(t=ee.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=ha(f,t.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return s=[{}],[4,Bs(t)];case 3:return o=ee.apply(void 0,[ee.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 4:return a=[{}],[4,Vs(t)];case 5:return o=ee.apply(void 0,[ee.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 6:return u=[{}],[4,qs(t)];case 7:return o=ee.apply(void 0,[ee.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 8:return c=[{}],[4,zs(t)];case 9:return o=ee.apply(void 0,[ee.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 10:return l=[{}],[4,Hs(t)];case 11:return o=ee.apply(void 0,[ee.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 12:return p=[{}],[4,Ks(t)];case 13:return o=ee.apply(void 0,[ee.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 14:d=t.body,i=d.code||d.Code||i,o=ee(ee({},d),{name:""+i,message:d.message||d.Message||i,$fault:"client",$metadata:pa(f)}),e.label=15;case 15:return h=o.message||o.Message||i,o.message=h,delete o.Message,[2,Promise.reject(Object.assign(new Error(h),o))]}})})},Ls=function(f,m){return oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h;return ie(this,function(e){switch(e.label){case 0:return n=[ee({},f)],r={},[4,da(f.body,m)];case 1:switch(t=ee.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=ha(f,t.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return s=[{}],[4,Bs(t)];case 3:return o=ee.apply(void 0,[ee.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 4:return a=[{}],[4,Vs(t)];case 5:return o=ee.apply(void 0,[ee.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 6:return u=[{}],[4,qs(t)];case 7:return o=ee.apply(void 0,[ee.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 8:return c=[{}],[4,zs(t)];case 9:return o=ee.apply(void 0,[ee.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 10:return l=[{}],[4,Hs(t)];case 11:return o=ee.apply(void 0,[ee.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 12:return p=[{}],[4,Ks(t)];case 13:return o=ee.apply(void 0,[ee.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 14:d=t.body,i=d.code||d.Code||i,o=ee(ee({},d),{name:""+i,message:d.message||d.Message||i,$fault:"client",$metadata:pa(f)}),e.label=15;case 15:return h=o.message||o.Message||i,o.message=h,delete o.Message,[2,Promise.reject(Object.assign(new Error(h),o))]}})})},js=function(f,m){return oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h;return ie(this,function(e){switch(e.label){case 0:return n=[ee({},f)],r={},[4,da(f.body,m)];case 1:switch(t=ee.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=ha(f,t.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return s=[{}],[4,Bs(t)];case 3:return o=ee.apply(void 0,[ee.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 4:return a=[{}],[4,Vs(t)];case 5:return o=ee.apply(void 0,[ee.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 6:return u=[{}],[4,qs(t)];case 7:return o=ee.apply(void 0,[ee.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 8:return c=[{}],[4,zs(t)];case 9:return o=ee.apply(void 0,[ee.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 10:return l=[{}],[4,Hs(t)];case 11:return o=ee.apply(void 0,[ee.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 12:return p=[{}],[4,Ks(t)];case 13:return o=ee.apply(void 0,[ee.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:pa(f)}]),[3,15];case 14:d=t.body,i=d.code||d.Code||i,o=ee(ee({},d),{name:""+i,message:d.message||d.Message||i,$fault:"client",$metadata:pa(f)}),e.label=15;case 15:return h=o.message||o.Message||i,o.message=h,delete o.Message,[2,Promise.reject(Object.assign(new Error(h),o))]}})})},Bs=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:pa(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Vs=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"ForbiddenException",$fault:"client",$metadata:pa(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},qs=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"InternalServerErrorException",$fault:"server",$metadata:pa(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},zs=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:pa(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Hs=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:pa(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Ks=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"TooManyRequestsException",$fault:"client",$metadata:pa(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Gs=function(e,t){return ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee({},void 0!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&{Attributes:Zs(e.Attributes)}),void 0!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&{Demographic:Us(e.Demographic)}),void 0!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&{Location:Rs(e.Location)}),void 0!==e.Metrics&&{Metrics:Qs(e.Metrics)}),void 0!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&{User:Ws(e.User)})},Ws=function(e,t){return ee(ee({},void 0!==e.UserAttributes&&{UserAttributes:Zs(e.UserAttributes)}),void 0!==e.UserId&&{UserId:e.UserId})},$s=function(e,t){return ee({},void 0!==e.BatchItem&&{BatchItem:Js(e.BatchItem)})},Ys=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r,o=ae(t,2),i=o[0],s=o[1];return ee(ee({},e),((n={})[i]=ee(ee(ee(ee(ee(ee(ee(ee(ee(ee({},void 0!==(r=s).AppPackageName&&{AppPackageName:r.AppPackageName}),void 0!==r.AppTitle&&{AppTitle:r.AppTitle}),void 0!==r.AppVersionCode&&{AppVersionCode:r.AppVersionCode}),void 0!==r.Attributes&&{Attributes:Xs(r.Attributes)}),void 0!==r.ClientSdkVersion&&{ClientSdkVersion:r.ClientSdkVersion}),void 0!==r.EventType&&{EventType:r.EventType}),void 0!==r.Metrics&&{Metrics:Qs(r.Metrics)}),void 0!==r.SdkName&&{SdkName:r.SdkName}),void 0!==r.Session&&{Session:ta(r.Session)}),void 0!==r.Timestamp&&{Timestamp:r.Timestamp}),n))},{})},Js=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r,o=ae(t,2),i=o[0],s=o[1];return ee(ee({},e),((n={})[i]=ee(ee({},void 0!==(r=s).Endpoint&&{Endpoint:ea(r.Endpoint)}),void 0!==r.Events&&{Events:Ys(r.Events)}),n))},{})},Zs=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r=ae(t,2),o=r[0],i=r[1];return ee(ee({},e),((n={})[o]=i.map(function(e){return e}),n))},{})},Qs=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r=ae(t,2),o=r[0],i=r[1];return ee(ee({},e),((n={})[o]=i,n))},{})},Xs=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r=ae(t,2),o=r[0],i=r[1];return ee(ee({},e),((n={})[o]=i,n))},{})},ea=function(e,t){return ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee({},void 0!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&{Attributes:Zs(e.Attributes)}),void 0!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&{Demographic:Us(e.Demographic)}),void 0!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&{Location:Rs(e.Location)}),void 0!==e.Metrics&&{Metrics:Qs(e.Metrics)}),void 0!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&{User:Ws(e.User)})},ta=function(e,t){return ee(ee(ee(ee({},void 0!==e.Duration&&{Duration:e.Duration}),void 0!==e.Id&&{Id:e.Id}),void 0!==e.StartTimestamp&&{StartTimestamp:e.StartTimestamp}),void 0!==e.StopTimestamp&&{StopTimestamp:e.StopTimestamp})},na=function(e,t){return{__type:"EndpointUser",UserAttributes:void 0!==e.UserAttributes&&null!==e.UserAttributes?ua(e.UserAttributes):void 0,UserId:void 0!==e.UserId&&null!==e.UserId?e.UserId:void 0}},ra=function(e,t){return{__type:"EndpointsResponse",Item:void 0!==e.Item&&null!==e.Item?ia(e.Item):void 0}},oa=function(e,t){return{__type:"EventsResponse",Results:void 0!==e.Results&&null!==e.Results?aa(e.Results):void 0}},ia=function(e,t){return(e||[]).map(function(e){return{__type:"EndpointResponse",Address:void 0!==(t=e).Address&&null!==t.Address?t.Address:void 0,ApplicationId:void 0!==t.ApplicationId&&null!==t.ApplicationId?t.ApplicationId:void 0,Attributes:void 0!==t.Attributes&&null!==t.Attributes?ua(t.Attributes):void 0,ChannelType:void 0!==t.ChannelType&&null!==t.ChannelType?t.ChannelType:void 0,CohortId:void 0!==t.CohortId&&null!==t.CohortId?t.CohortId:void 0,CreationDate:void 0!==t.CreationDate&&null!==t.CreationDate?t.CreationDate:void 0,Demographic:void 0!==t.Demographic&&null!==t.Demographic?{__type:"EndpointDemographic",AppVersion:void 0!==(r=t.Demographic).AppVersion&&null!==r.AppVersion?r.AppVersion:void 0,Locale:void 0!==r.Locale&&null!==r.Locale?r.Locale:void 0,Make:void 0!==r.Make&&null!==r.Make?r.Make:void 0,Model:void 0!==r.Model&&null!==r.Model?r.Model:void 0,ModelVersion:void 0!==r.ModelVersion&&null!==r.ModelVersion?r.ModelVersion:void 0,Platform:void 0!==r.Platform&&null!==r.Platform?r.Platform:void 0,PlatformVersion:void 0!==r.PlatformVersion&&null!==r.PlatformVersion?r.PlatformVersion:void 0,Timezone:void 0!==r.Timezone&&null!==r.Timezone?r.Timezone:void 0}:void 0,EffectiveDate:void 0!==t.EffectiveDate&&null!==t.EffectiveDate?t.EffectiveDate:void 0,EndpointStatus:void 0!==t.EndpointStatus&&null!==t.EndpointStatus?t.EndpointStatus:void 0,Id:void 0!==t.Id&&null!==t.Id?t.Id:void 0,Location:void 0!==t.Location&&null!==t.Location?{__type:"EndpointLocation",City:void 0!==(n=t.Location).City&&null!==n.City?n.City:void 0,Country:void 0!==n.Country&&null!==n.Country?n.Country:void 0,Latitude:void 0!==n.Latitude&&null!==n.Latitude?n.Latitude:void 0,Longitude:void 0!==n.Longitude&&null!==n.Longitude?n.Longitude:void 0,PostalCode:void 0!==n.PostalCode&&null!==n.PostalCode?n.PostalCode:void 0,Region:void 0!==n.Region&&null!==n.Region?n.Region:void 0}:void 0,Metrics:void 0!==t.Metrics&&null!==t.Metrics?ca(t.Metrics):void 0,OptOut:void 0!==t.OptOut&&null!==t.OptOut?t.OptOut:void 0,RequestId:void 0!==t.RequestId&&null!==t.RequestId?t.RequestId:void 0,User:void 0!==t.User&&null!==t.User?na(t.User):void 0};var t,n,r})},sa=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r,o=ae(t,2),i=o[0],s=o[1];return ee(ee({},e),((n={})[i]={__type:"EventItemResponse",Message:void 0!==(r=s).Message&&null!==r.Message?r.Message:void 0,StatusCode:void 0!==r.StatusCode&&null!==r.StatusCode?r.StatusCode:void 0},n))},{})},aa=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r,o,i=ae(t,2),s=i[0],a=i[1];return ee(ee({},e),((n={})[s]={__type:"ItemResponse",EndpointItemResponse:void 0!==(r=a).EndpointItemResponse&&null!==r.EndpointItemResponse?{__type:"EndpointItemResponse",Message:void 0!==(o=r.EndpointItemResponse).Message&&null!==o.Message?o.Message:void 0,StatusCode:void 0!==o.StatusCode&&null!==o.StatusCode?o.StatusCode:void 0}:void 0,EventsItemResponse:void 0!==r.EventsItemResponse&&null!==r.EventsItemResponse?sa(r.EventsItemResponse):void 0},n))},{})},ua=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r=ae(t,2),o=r[0],i=r[1];return ee(ee({},e),((n={})[o]=(i||[]).map(function(e){return e}),n))},{})},ca=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r=ae(t,2),o=r[0],i=r[1];return ee(ee({},e),((n={})[o]=i,n))},{})},la=function(e,t){return{__type:"MessageBody",Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,RequestID:void 0!==e.RequestID&&null!==e.RequestID?e.RequestID:void 0}},pa=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},da=function(e,t){return Ms(e,t).then(function(e){return e.length?JSON.parse(e):{}})},ha=function(e,t){function n(e){var t=e;return 0<=t.indexOf(":")&&(t=t.split(":")[0]),0<=t.indexOf("#")&&(t=t.split("#")[1]),t}var r,o,i=(r=e.headers,o="x-amzn-errortype",Object.keys(r).find(function(e){return e.toLowerCase()===o.toLowerCase()}));return void 0!==i?n(e.headers[i]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},fa=(X(ma,Ds=b.Command),ma.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},ma.prototype.serialize=function(e,t){return c=e,l=t,oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u;return ie(this,function(e){switch(e.label){case 0:if(t={"Content-Type":""},n="/v1/apps/{ApplicationId}/users/{UserId}",void 0===c.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((r=c.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(n=n.replace("{ApplicationId}",b.extendedEncodeURIComponent(r)),void 0===c.UserId)throw new Error("No value provided for input HTTP label: UserId.");if((r=c.UserId).length<=0)throw new Error("Empty value provided for input HTTP label: UserId.");return n=n.replace("{UserId}",b.extendedEncodeURIComponent(r)),[4,l.endpoint()];case 1:return o=e.sent(),i=o.hostname,s=o.protocol,a=void 0===s?"https":s,u=o.port,[2,new w.HttpRequest({protocol:a,hostname:i,port:u,method:"GET",headers:t,path:n,body:void 0})]}})});var c,l},ma.prototype.deserialize=function(e,t){return r=e,o=t,oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,Fs(r,o)]:(t={$metadata:pa(r),__type:"GetUserEndpointsResponse",EndpointsResponse:void 0},[4,da(r.body,o)]);case 1:return n=e.sent(),t.EndpointsResponse=ra(n),[2,Promise.resolve(t)]}})});var r,o},ma);function ma(e){var t=Ds.call(this)||this;return t.input=e,t}var ga,ya=(X(va,ga=b.Command),va.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},va.prototype.serialize=function(e,t){return l=e,p=t,oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return ie(this,function(e){switch(e.label){case 0:if(t={"Content-Type":"application/json"},n="/v1/apps/{ApplicationId}/events",void 0===l.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((r=l.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return n=n.replace("{ApplicationId}",b.extendedEncodeURIComponent(r)),void 0!==l.EventsRequest&&(o=$s(l.EventsRequest)),void 0===o&&(o={}),o=JSON.stringify(o),[4,p.endpoint()];case 1:return i=e.sent(),s=i.hostname,a=i.protocol,u=void 0===a?"https":a,c=i.port,[2,new w.HttpRequest({protocol:u,hostname:s,port:c,method:"POST",headers:t,path:n,body:o})]}})});var l,p},va.prototype.deserialize=function(e,t){return r=e,o=t,oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){switch(e.label){case 0:return 202!==r.statusCode&&400<=r.statusCode?[2,Ls(r,o)]:(t={$metadata:pa(r),__type:"PutEventsResponse",EventsResponse:void 0},[4,da(r.body,o)]);case 1:return n=e.sent(),t.EventsResponse=oa(n),[2,Promise.resolve(t)]}})});var r,o},va);function va(e){var t=ga.call(this)||this;return t.input=e,t}var ba,wa=(X(Sa,ba=b.Command),Sa.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Sa.prototype.serialize=function(e,t){return l=e,p=t,oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return ie(this,function(e){switch(e.label){case 0:if(t={"Content-Type":"application/json"},n="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===l.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((r=l.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(n=n.replace("{ApplicationId}",b.extendedEncodeURIComponent(r)),void 0===l.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((r=l.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return n=n.replace("{EndpointId}",b.extendedEncodeURIComponent(r)),void 0!==l.EndpointRequest&&(o=Gs(l.EndpointRequest)),void 0===o&&(o={}),o=JSON.stringify(o),[4,p.endpoint()];case 1:return i=e.sent(),s=i.hostname,a=i.protocol,u=void 0===a?"https":a,c=i.port,[2,new w.HttpRequest({protocol:u,hostname:s,port:c,method:"PUT",headers:t,path:n,body:o})]}})});var l,p},Sa.prototype.deserialize=function(e,t){return r=e,o=t,oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){switch(e.label){case 0:return 202!==r.statusCode&&400<=r.statusCode?[2,js(r,o)]:(t={$metadata:pa(r),__type:"UpdateEndpointResponse",MessageBody:void 0},[4,da(r.body,o)]);case 1:return n=e.sent(),t.MessageBody=la(n),[2,Promise.resolve(t)]}})});var r,o},Sa);function Sa(e){var t=ba.call(this)||this;return t.input=e,t}var _a={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new x.StorageHelper).getStorage()};function Ca(e){for(var t=0,t=e.length,n=e.length;0<=n;--n){var r=e.charCodeAt(n);127<r&&r<=2047?t+=1:2047<r&&r<=65535&&(t+=2),56320<=r&&r<=57343&&--n}return t}function Ea(){return(new Date).getTime()}function Ia(e){return Number.isInteger?Number.isInteger(e):"number"==typeof(t=e)&&isFinite(t)&&Math.floor(t)===t;var t}var Aa=new x.ConsoleLogger("StorageCache"),Pa=(ka.prototype.getModuleName=function(){return"Cache"},ka.prototype.checkConfig=function(){Ia(this.config.capacityInBytes)||(Aa.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=_a.capacityInBytes),Ia(this.config.itemMaxSize)||(Aa.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=_a.itemMaxSize),Ia(this.config.defaultTTL)||(Aa.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=_a.defaultTTL),Ia(this.config.defaultPriority)||(Aa.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=_a.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(Aa.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=_a.itemMaxSize),(5<this.config.defaultPriority||this.config.defaultPriority<1)&&(Aa.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=_a.defaultPriority),(1<Number(this.config.warningThreshold)||Number(this.config.warningThreshold)<0)&&(Aa.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=_a.warningThreshold),5242880<this.config.capacityInBytes&&(Aa.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=_a.capacityInBytes)},ka.prototype.fillCacheItem=function(e,t,n){var r={key:e,data:t,timestamp:Ea(),visitedTime:Ea(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0};return r.byteSize=Ca(JSON.stringify(r)),r.byteSize=Ca(JSON.stringify(r)),r},ka.prototype.configure=function(e){return e&&(e.keyPrefix&&Aa.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig()),this.config},ka);function ka(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}var Oa,Ta,xa=(Oa=function(e,t){return(Oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Oa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Na=new x.ConsoleLogger("Cache");function Ua(e){var t=this,n=e?Object.assign({},_a,e):_a;return(t=Ta.call(this,n)||this).config.storage=n.storage,t.getItem=t.getItem.bind(t),t.setItem=t.setItem.bind(t),t.removeItem=t.removeItem.bind(t),t}var Ra=new(xa(Ua,Ta=Pa),Ua.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},Ua.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},Ua.prototype._refreshItem=function(e,t){return e.visitedTime=Ea(),this.config.storage.setItem(t,JSON.stringify(e)),e},Ua.prototype._isExpired=function(e){var t=this.config.storage.getItem(e),n=JSON.parse(t);return Ea()>=n.expires},Ua.prototype._removeItem=function(e,t){var n=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(n),this.config.storage.removeItem(e)},Ua.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),Na.error("Failed to set item "+e)}},Ua.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,n=(1-this.config.warningThreshold)*this.config.capacityInBytes;return n<t?t:n},Ua.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},Ua.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},Ua.prototype._popOutItems=function(e,t){for(var n=[],r=t,o=0;o<e.length;o+=1){var i,s=this.config.storage.getItem(e[o]);null!=s&&(i=JSON.parse(s),n.push(i))}for(n.sort(function(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&e.visitedTime<t.visitedTime?-1:1}),o=0;o<n.length;o+=1)if(this._removeItem(n[o].key,n[o].byteSize),(r-=n[o].byteSize)<=0)return},Ua.prototype.setItem=function(e,t,n){Na.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t){var o={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+Ea()};if(o.priority<1||5<o.priority)Na.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var i=this.fillCacheItem(r,t,o);if(i.byteSize>this.config.itemMaxSize)Na.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var s,a,u=this.config.storage.getItem(r);u&&this._removeItem(r,JSON.parse(u).byteSize),this._isCacheFull(i.byteSize)&&(s=this._findValidKeys(),this._isCacheFull(i.byteSize)&&(a=this._sizeToPop(i.byteSize),this._popOutItems(s,a))),this._setItem(r,i)}catch(e){Na.warn("setItem failed! "+e)}}}else Na.warn("The value of item should not be undefined!");else Na.warn("Invalid key: should not be empty or 'CurSize'")},Ua.prototype.getItem=function(e,t){Na.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return Na.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var o=JSON.parse(n);return(o=this._refreshItem(o,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){var i=t.callback();return null!==i&&this.setItem(e,i,t),i}return null}catch(e){return Na.warn("getItem failed! "+e),null}},Ua.prototype.removeItem=function(e){Na.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(e){Na.warn("removeItem failed! "+e)}},Ua.prototype.clear=function(){Na.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){Na.warn("clear failed! "+e)}},Ua.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},Ua.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},Ua.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==_a.keyPrefix||(Na.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=Ea.toString()),new Ua(e)},Ua);x.Amplify.register(Ra);var Ma=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},Da=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Fa=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},La=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Fa(arguments[t]));return e},ja=new x.ConsoleLogger("EventsBuffer"),Ba=[429,500],Va=[202],qa=(za.prototype.push=function(e){var t;if(this._buffer>this._config.bufferSize)return ja.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var n=((t={})[e.params.event.eventId]=e,t);this._buffer.push(n)},za.prototype.pause=function(){this._pause=!0},za.prototype.resume=function(){this._pause=!1},za.prototype.updateClient=function(e){this._client=e},za.prototype.flush=function(){this._flush=!0},za.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},za.prototype._sendBatch=function(){var e,t,n,r=this._buffer.length;this._flush&&!r&&clearInterval(this._interval),!this._pause&&r&&(e=this._config.flushSize,t=Math.min(e,r),n=this._buffer.splice(0,t),this._putEvents(n))},za.prototype._putEvents=function(s){return Ma(this,void 0,void 0,function(){var t,n,r,o,i;return Da(this,function(e){switch(e.label){case 0:t=this._bufferToMap(s),n=this._generateBatchEventParams(t),e.label=1;case 1:return e.trys.push([1,3,,4]),r=new ya(n),[4,this._client.send(r)];case 2:return o=e.sent(),this._processPutEventsSuccessResponse(o,t),[3,4];case 3:return i=e.sent(),[2,this._handlePutEventsFailure(i,t)];case 4:return[2]}})})},za.prototype._generateBatchEventParams=function(e){var h={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach(function(e){var t=e.params,n=t.event,r=t.timestamp,o=t.config,i=n.name,s=n.attributes,a=n.metrics,u=n.eventId,c=n.session,l=o.appId,p=o.endpointId,d=h.EventsRequest.BatchItem;h.ApplicationId=h.ApplicationId||l,d[p]||(d[p]={Endpoint:{},Events:{}}),d[p].Events[u]={EventType:i,Timestamp:new Date(r).toISOString(),Attributes:s,Metrics:a,Session:c}}),h},za.prototype._handlePutEventsFailure=function(e,t){ja.debug("_putEvents Failed: ",e);var n,r=e.$metadata&&e.$metadata.httpStatusCode;Ba.includes(r)&&(n=Object.values(t),this._retry(n))},za.prototype._processPutEventsSuccessResponse=function(e,d){var t=e.EventsResponse.Results,h=[];Object.entries(t).forEach(function(e){var t=Fa(e,2),p=t[0],n=t[1].EventsItemResponse;Object.entries(n).forEach(function(e){var t,n,r=Fa(e,2),o=r[0],i=r[1],s=i.StatusCode,a=i.Message,u=d[o],c={EventsResponse:{Results:((t={})[p]={EventsItemResponse:((n={})[o]={StatusCode:s,Message:a},n)},t)}};if(Va.includes(s))u.handlers.resolve(c);else{if(!Ba.includes(s)){var l=u.params.event.name;return ja.error("event "+o+" : "+l+" failed with error: "+a),u.handlers.reject(c)}h.push(u)}})}),h.length&&this._retry(h)},za.prototype._retry=function(e){var t,s=[];e.forEach(function(e){var t,n=e.params,r=n.event,o=r.eventId,i=r.name;if(0<n.resendLimit--)return ja.debug("resending event "+o+" : "+i+" with "+n.resendLimit+" retry attempts remaining"),void s.push(((t={})[o]=e,t));ja.debug("no retry attempts remaining for event "+o+" : "+i)}),(t=this._buffer).unshift.apply(t,La(s))},za.prototype._bufferToMap=function(e){return e.reduce(function(e,t){var n=Fa(Object.entries(t),1),r=Fa(n[0],2),o=r[0],i=r[1];return e[o]=i,e},{})},za);function za(e,t){this._pause=!1,this._flush=!1,ja.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}function Ha(e,t){x.Hub.dispatch("analytics",{event:e,data:t},"Analytics",Ya)}var Ka=function(){return(Ka=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ga=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},Wa=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},$a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},Ya="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Ja=new x.ConsoleLogger("AWSPinpointProvider"),Za=[429,500],Qa=[202],Xa="_update_endpoint",eu="_session.stop",tu="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,nu=(ru.prototype.getCategory=function(){return ru.category},ru.prototype.getProviderName=function(){return ru.providerName},ru.prototype.configure=function(e){var t=this;Ja.debug("configure Analytics",e);var n,r=e||{};return this._config=Object.assign({},this._config,r),this._config.appId&&!this._config.disabled?this._config.endpointId?Ha("pinpointProvider_configured",null):(n=this.getProviderName()+"_"+this._config.appId,this._getEndpointId(n).then(function(e){Ja.debug("setting endpoint id from the cache",e),t._config.endpointId=e,Ha("pinpointProvider_configured",null)}).catch(function(e){Ja.debug("Failed to generate endpointId",e)})):this._flushBuffer(),this._config},ru.prototype.record=function(r,o){return Ga(this,void 0,void 0,function(){var t,n;return Wa(this,function(e){switch(e.label){case 0:return Ja.debug("_public record",r),[4,this._getCredentials()];case 1:return(t=e.sent())&&this._config.appId&&this._config.region?(this._initClients(t),n=(new Date).getTime(),this._generateSession(r),r.event.eventId=_.v1(),Object.assign(r,{timestamp:n,config:this._config}),r.event.immediate?[2,this._send(r,o)]:(this._putToBuffer(r,o),[2])):(Ja.debug("cannot send events without credentials, applicationId or region"),[2,o.reject(new Error("No credentials, applicationId or region"))])}})})},ru.prototype._sendEndpointUpdate=function(n){return Ga(this,void 0,void 0,function(){var t;return Wa(this,function(e){switch(e.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(n),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(n)]);case 1:return e.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}})})},ru.prototype._putToBuffer=function(e,t){e.event.name!==Xa?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},ru.prototype._generateSession=function(e){this._sessionId=this._sessionId||_.v1();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=_.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case eu:var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||_.v1(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||_.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},ru.prototype._send=function(t,n){return Ga(this,void 0,void 0,function(){return Wa(this,function(e){switch(t.event.name){case Xa:return[2,this._updateEndpoint({params:t,handlers:n})];case eu:return[2,this._pinpointSendStopSession(t,n)];default:return[2,this._pinpointPutEvents(t,n)]}})})},ru.prototype._generateBatchItemContext=function(e){var t,n=e.event,r=e.timestamp,o=e.config,i=n.name,s=n.attributes,a=n.metrics,u=n.eventId,c=n.session,l=o.appId,p=o.endpointId,d={ApplicationId:l,EventsRequest:{BatchItem:{}}},h={Endpoint:{}};return h.Events=((t={})[u]={EventType:i,Timestamp:new Date(r).toISOString(),Attributes:s,Metrics:a,Session:c},t),d.EventsRequest.BatchItem[p]=h,d},ru.prototype._pinpointPutEvents=function(l,p){return Ga(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return Wa(this,function(e){switch(e.label){case 0:t=l.event.eventId,n=l.config.endpointId,r=this._generateBatchItemContext(l),o=new ya(r),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.pinpointClient.send(o)];case 2:return i=e.sent(),s=i.EventsResponse.Results[n].EventsItemResponse[t],a=s.StatusCode,u=s.Message,Qa.includes(a)?(Ja.debug("record event success. ",i),[2,p.resolve(i)]):Za.includes(a)?(this._retry(l,p),[3,4]):(Ja.error("Event "+t+" is not accepted, the error is "+u),[2,p.reject(i)]);case 3:return c=e.sent(),this._eventError(c),[2,p.reject(c)];case 4:return[2]}})})},ru.prototype._pinpointSendStopSession=function(e,t){if(tu){var n=this._generateBatchItemContext(e),r=this._config.region,o=n.ApplicationId,i=n.EventsRequest,s={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},a="https://pinpoint."+r+".amazonaws.com/v1/apps/"+o+"/events/legacy",u=JSON.stringify(i),c={url:a,body:u,method:"POST"},l={region:r,service:"mobiletargeting"},p=x.Signer.signUrl(c,s,l,null);return navigator.sendBeacon(p,u)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},ru.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,0<e.resendLimit--?(Ja.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):Ja.debug("retry times used up for event "+e.eventName)},ru.prototype._updateEndpoint=function(h){return Ga(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d;return Wa(this,function(e){switch(e.label){case 0:t=h.params,n=h.handlers,r=t.config,o=t.event,i=r.appId,s=r.endpointId,a=this._endpointRequest(r,x.JS.transferKeyToLowerCase(o,[],["attributes","userAttributes","Attributes","UserAttributes"])),u={ApplicationId:i,EndpointId:s,EndpointRequest:a},e.label=1;case 1:return e.trys.push([1,3,,4]),c=new wa(u),[4,this.pinpointClient.send(c)];case 2:return l=e.sent(),Ja.debug("updateEndpoint success",l),this._endpointGenerating=!1,this._resumeBuffer(),n.resolve(l),[2];case 3:return p=e.sent(),d={err:p,update_params:u,endpointObject:h},[2,this._handleEndpointUpdateFailure(d)];case 4:return[2]}})})},ru.prototype._handleEndpointUpdateFailure=function(o){return Ga(this,void 0,void 0,function(){var t,n,r;return Wa(this,function(e){switch(t=o.err,n=o.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,Ja.debug("updateEndpoint failed",t),r){case 400:return[2,this._handleEndpointUpdateBadRequest(o)];case 403:return[2,this._handleEndpointUpdateForbidden(o)];default:if(Za.includes(r))return[2,this._retryEndpointUpdate(n,!0)];n.handlers.reject(t)}return[2]})})},ru.prototype._handleEndpointUpdateBadRequest=function(u){return Ga(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return Wa(this,function(e){switch(e.label){case 0:if(t=u.err,n=u.update_params,r=u.endpointObject,o=t.message,i=n.ApplicationId,s=n.EndpointRequest,!String(o).startsWith("Exceeded maximum endpoint per user count"))return[2,r.handlers.reject(t)];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._removeUnusedEndpoints(i,s.User.UserId)];case 2:return e.sent(),Ja.debug("Removed unused endpoints successfully"),this._retryEndpointUpdate(r),[3,4];case 3:return a=e.sent(),Ja.warn("Failed to remove unused endpoints with error: "+a),Ja.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:GetUserEndpoints" in order to get endpoints info of the user'),[2,r.handlers.reject(a)];case 4:return[2]}})})},ru.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,o=t.retryable;if("ExpiredTokenException"!==r&&!o)return n.handlers.reject(t);this._retryEndpointUpdate(n)},ru.prototype._retryEndpointUpdate=function(e,t){Ja.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,0<n.resendLimit--)return Ja.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));Ja.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&Ja.error("Initial endpoint update failed. ")},ru.prototype._removeUnusedEndpoints=function(h,f){return Ga(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d;return Wa(this,function(e){switch(e.label){case 0:return e.trys.push([0,6,,7]),t=new fa({ApplicationId:h,UserId:f}),[4,this.pinpointClient.send(t)];case 1:for(n=e.sent(),r=n.EndpointsResponse.Item,Ja.debug("get endpoints associated with the userId: "+f+" with data",r),o=r[0],i=1;i<r.length&&(s=Date.parse(o.EffectiveDate),a=Date.parse(r[i].EffectiveDate),!isNaN(s));i++){if(isNaN(a)){o=r[i];break}a<s&&(o=r[i])}u={ApplicationId:h,EndpointId:o.Id,EndpointRequest:{User:{UserId:""}}},e.label=2;case 2:return e.trys.push([2,4,,5]),c=new wa(u),[4,this.pinpointClient.send(c)];case 3:return l=e.sent(),Ja.debug("The old endpoint is updated with an empty string for user id"),[2,l];case 4:throw p=e.sent(),Ja.debug("Failed to update the endpoint",p),p;case 5:return[3,7];case 6:throw d=e.sent(),Ja.debug("Failed to get endpoints associated with the userId: "+f+" with error",d),d;case 7:return[2]}})})},ru.prototype._initClients=function(r){return Ga(this,void 0,void 0,function(){var t,n;return Wa(this,function(e){return Ja.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===r.sessionToken&&this._config.credentials.identityId===r.identityId?Ja.debug("no change for aws credentials, directly return from init"):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=r,n=this._config.region,Ja.debug("init clients with credentials",r),this.pinpointClient=new xs({region:n,credentials:r,customUserAgent:x.getAmplifyUserAgent()}),this._bufferExists()&&t===r.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq()),[2]})})},ru.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof qa},ru.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new qa(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},ru.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},ru.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},ru.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},ru.prototype._customizePinpointClientReq=function(){},ru.prototype._getEndpointId=function(n){return Ga(this,void 0,void 0,function(){var t;return Wa(this,function(e){switch(e.label){case 0:return[4,Ra.getItem(n)];case 1:return t=e.sent(),Ja.debug("endpointId from cache",t,"type",typeof t),t||(t=_.v1(),Ra.setItem(n,t)),[2,t]}})})},ru.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},o=e.clientContext||{},i=e.endpoint||{},s={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},a=$a(o,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"]),u=t.address?"android"===r.platform?"GCM":"APNS":void 0,c=Ka(Ka(Ka({channelType:u,requestId:_.v1(),effectiveDate:(new Date).toISOString()},i),t),{attributes:Ka(Ka({},i.attributes),t.attributes),demographic:Ka(Ka(Ka(Ka({},s),a),i.demographic),t.demographic),location:Ka(Ka({},i.location),t.location),metrics:Ka(Ka({},i.metrics),t.metrics),user:{userId:t.userId||i.userId||n.identityId,userAttributes:Ka(Ka({},i.userAttributes),t.userAttributes)}}),l=(c.userId,c.userAttributes,c.name,c.session,c.eventId,c.immediate,$a(c,["userId","userAttributes","name","session","eventId","immediate"]));return x.JS.transferKeyToUpperCase(l,[],["metrics","userAttributes","attributes"])},ru.prototype._eventError=function(e){Ja.error("record event failed.",e),Ja.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},ru.prototype._getCredentials=function(){return Ga(this,void 0,void 0,function(){var t,n;return Wa(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,x.Credentials.get()];case 1:return(t=e.sent())?(Ja.debug("set credentials for analytics",t),[2,x.Credentials.shear(t)]):[2,null];case 2:return n=e.sent(),Ja.debug("ensure credentials error",n),[2,null];case 3:return[2]}})})},ru.category="Analytics",ru.providerName="AWSPinpoint",ru);function ru(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=x.ClientDevice.clientInfo()}var ou=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},iu=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ou(arguments[t]));return e},su=[],au=(uu.add=function(e,t,n){cu(e,t).set(n)},uu.remove=function(e,t){cu(e,t).remove()},uu.prototype.set=function(n){var r=this;this.context[this.methodName]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r._originalMethod.apply(r,iu(e)))}},uu.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},uu);function uu(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}function cu(t,n){var e=su.filter(function(e){return e.context===t&&e.methodName===n})[0];return e||(e=new au(t,n),su.push(e)),e}var lu=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},pu=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},du=new x.ConsoleLogger("PageViewTracker"),hu="aws-amplify-analytics-prevUrl",fu={enable:!1,provider:"AWSPinpoint",getUrl:function(){return x.JS.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},mu=(gu.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},gu.prototype._isSameUrl=function(){return sessionStorage.getItem(hu)===this._config.getUrl()&&(du.debug("the url is same"),!0)},gu.prototype._pageViewTrackDefault=function(){return lu(this,void 0,void 0,function(){var t,n,r;return pu(this,function(e){switch(e.label){case 0:return x.JS.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(du.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return r=Object.assign({url:t},n),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch(function(e){du.debug("Failed to record the page view event",e)}),sessionStorage.setItem(hu,t)),[2]}})})},gu.prototype._trackFunc=function(){return lu(this,void 0,void 0,function(){var t,n,r;return pu(this,function(e){switch(e.label){case 0:return x.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(du.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return r=Object.assign({url:t},n),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch(function(e){du.debug("Failed to record the page view event",e)}),sessionStorage.setItem(hu,t)),[2]}})})},gu.prototype._pageViewTrackSPA=function(){x.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(au.add(history,"pushState",this._trackFunc),au.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(au.remove(history,"pushState"),au.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):du.debug("not in the supported web enviroment")},gu);function gu(e,t){du.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},fu,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}var yu=x.JS.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null,vu=yu?yu.matches||yu.matchesSelector||yu.webkitMatchesSelector||yu.mozMatchesSelector||yu.msMatchesSelector||yu.oMatchesSelector:null;function bu(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||wu(e,t);if("length"in t)for(var n,r=0;n=t[r];r++)if(e===n||wu(e,n))return 1}}function wu(e,t){if("string"!=typeof t)return!1;if(vu)return vu.call(e,t);for(var n,r=e.parentNode.querySelectorAll(t),o=0;n=r[o];o++)if(n===e)return!0;return!1}function Su(e,t,n){if(void 0===n&&(n=!1),e&&1===e.nodeType&&t)for(var r,o=(n?[e]:[]).concat(function(e){for(var t=[],n=e;n&&n.parentNode&&1===n.parentNode.nodeType;)n=n.parentNode,t.push(n);return t}(e)),i=0;r=o[i];i++)if(bu(r,t))return r}function _u(e,t,i,s,a){void 0===a&&(a={});function n(e){var t;if(a.composed&&"function"==typeof e.composedPath)for(var n,r=e.composedPath(),o=0;n=r[o];o++)1===n.nodeType&&bu(n,i)&&(t=n);else t=Su(e.target,i,!0);t&&s.call(t,e,t)}return e.addEventListener(t,n,a.useCapture),{destroy:function(){e.removeEventListener(t,n,a.useCapture)}}}var Cu=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},Eu=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Iu=new x.ConsoleLogger("EventTracker"),Au={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},Pu=(ku.prototype.configure=function(e){var t,n=this;return Object.assign(this._config,e),this._config.enable?this._config.enable&&0===Object.keys(this._delegates).length&&(t="["+this._config.selectorPrefix+"on]",this._config.events.forEach(function(e){n._delegates[e]=_u(document,e,t,n._trackFunc,{composed:!0,useCapture:!0})})):(Object.keys(this._delegates).forEach(function(e){"function"==typeof n._delegates[e].destroy&&n._delegates[e].destroy()}),this._delegates={}),this._config},ku.prototype._trackFunc=function(a,u){return Cu(this,void 0,void 0,function(){var n,t,r,o,i,s;return Eu(this,function(e){switch(e.label){case 0:return n={},t=u.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),r=u.getAttribute(this._config.selectorPrefix+"name"),(o=u.getAttribute(this._config.selectorPrefix+"attrs"))&&o.split(/\s*,\s*/).forEach(function(e){var t=e.trim().split(/\s*:\s*/);n[t[0]]=t[1]}),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return i=e.sent(),[3,3];case 2:i=this._config.attributes,e.label=3;case 3:return s=Object.assign({type:a.type,target:a.target.localName+" with id "+a.target.id},i,n),Iu.debug("events needed to be recorded",t),Iu.debug("attributes needed to be attached",n),t.indexOf(a.type)<0?Iu.debug("event "+a.type+" is not selected to be recorded"):this._tracker({name:r||"event",attributes:s},this._config.provider).catch(function(e){Iu.debug("Failed to record the "+a.type+" event', "+e)}),[2]}})})},ku);function ku(e,t){x.JS.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},Au,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),Iu.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):Iu.debug("not in the supported web environment")}var Ou=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},Tu=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},xu=new x.ConsoleLogger("SessionTracker"),Nu={enable:!1,provider:"AWSPinpoint"},Uu=!1,Ru=(Mu.prototype._envCheck=function(){if(!x.JS.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return xu.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return xu.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},Mu.prototype._trackFunc=function(){return Ou(this,void 0,void 0,function(){var t,n;return Tu(this,function(e){switch(e.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return n=Object.assign({},t),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:n},this._config.provider).catch(function(e){xu.debug("record session stop event failed.",e)}):this._tracker({name:"_session.start",attributes:n},this._config.provider).catch(function(e){xu.debug("record session start event failed.",e)}),[2]}})})},Mu.prototype._trackBeforeUnload=function(e){var n=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then(function(e){var t=Object.assign({},e);n._tracker({name:"_session.stop",attributes:t,immediate:!0},n._config.provider).catch(function(e){xu.debug("record session stop event failed.",e)})})},Mu.prototype._sendInitialEvent=function(){return Ou(this,void 0,void 0,function(){var t,n;return Tu(this,function(e){switch(e.label){case 0:return Uu?(xu.debug("the start session has been sent when the page is loaded"),[2]):(Uu=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return n=Object.assign({},t),this._tracker({name:"_session.start",attributes:n},this._config.provider).catch(function(e){xu.debug("record session start event failed.",e)}),[2]}})})},Mu.prototype.configure=function(e){return this._envCheck()&&(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1)),this._config},Mu);function Mu(e,t){this._config=Object.assign({},Nu,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}var Du=function(){return(Du=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Fu=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},Lu=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ju=new x.ConsoleLogger("AnalyticsClass"),Bu="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Vu={pageView:mu,event:Pu,session:Ru},qu=null,zu=(Hu.prototype.getModuleName=function(){return"Analytics"},Hu.prototype.configure=function(e){var n=this;if(!e)return this._config;ju.debug("configure Analytics",e);var t=x.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Analytics,e),this._config.disabled&&(this._disabled=!0),this._pluggables.forEach(function(e){var t="AWSPinpoint"!==e.getProviderName()||n._config.AWSPinpoint?n._config[e.getProviderName()]:n._config;e.configure(Du({disabled:n._config.disabled},t))}),0===this._pluggables.length&&this.addPluggable(new nu),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),x.Hub.dispatch("analytics",{event:"configured",data:null,message:"The Analytics category has been configured successfully"},"Analytics",Bu),ju.debug("current configuration",this._config),this._config},Hu.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,n=Du({disabled:this._config.disabled},t);return e.configure(n),n}},Hu.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return ju.debug("No plugin found with providerName",e),null},Hu.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;return t===this._pluggables.length?void ju.debug("No plugin found with providerName",e):void this._pluggables.splice(t,t+1)},Hu.prototype.disable=function(){this._disabled=!0},Hu.prototype.enable=function(){this._disabled=!1},Hu.prototype.startSession=function(n){return Fu(this,void 0,void 0,function(){var t;return Lu(this,function(e){return t={event:{name:"_session.start"},provider:n},[2,this._sendEvent(t)]})})},Hu.prototype.stopSession=function(n){return Fu(this,void 0,void 0,function(){var t;return Lu(this,function(e){return t={event:{name:"_session.stop"},provider:n},[2,this._sendEvent(t)]})})},Hu.prototype.record=function(n,r,o){return Fu(this,void 0,void 0,function(){var t;return Lu(this,function(e){return t=null,t="string"==typeof n?{event:{name:n,attributes:r,metrics:o},provider:"AWSPinpoint"}:{event:n,provider:r},[2,this._sendEvent(t)]})})},Hu.prototype.updateEndpoint=function(n,r){return Fu(this,void 0,void 0,function(){var t;return Lu(this,function(e){return t=Du(Du({},n),{name:"_update_endpoint"}),[2,this.record(t,r)]})})},Hu.prototype._sendEvent=function(r){var e=this;if(this._disabled)return ju.debug("Analytics has been disabled"),Promise.resolve();var o=r.provider?r.provider:"AWSPinpoint";return new Promise(function(t,n){e._pluggables.forEach(function(e){e.getProviderName()===o&&e.record(r,{resolve:t,reject:n})})})},Hu.prototype.autoTrack=function(e,t){var n;Vu[e]?("session"===e&&(this._config.autoSessionRecord=t.enable),(n=this._trackers[e])?n.configure(t):this._trackers[e]=new Vu[e](this.record,t)):ju.debug("invalid tracker type")},Hu);function Hu(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},(qu=this).record=this.record.bind(this),x.Hub.listen("auth",Qu),x.Hub.listen("storage",Qu),x.Hub.listen("analytics",Qu),x.Amplify.register(this)}var Ku,Gu,Wu,$u,Yu=!1,Ju=!1,Zu=!1,Qu=function(e){var t=e.channel,n=e.payload;switch(ju.debug("on hub capsule "+t,n),t){case"auth":ec(n);break;case"storage":Xu(n);break;case"analytics":tc(n)}},Xu=function(e){var t=e.data,n=t.attrs,r=t.metrics;n&&Zu&&qu.record({name:"Storage",attributes:n,metrics:r}).catch(function(e){ju.debug("Failed to send the storage event automatically",e)})},ec=function(e){var t=e.event;if(t){var n=function(n){return Fu(void 0,void 0,void 0,function(){var t;return Lu(this,function(e){switch(e.label){case 0:if(!Ju||!Zu)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,qu.record({name:"_userauth."+n})];case 2:return[2,e.sent()];case 3:return t=e.sent(),ju.debug("Failed to send the "+n+" event automatically",t),[3,4];case 4:return[2]}})})};switch(t){case"signIn":return n("sign_in");case"signUp":return n("sign_up");case"signOut":return n("sign_out");case"signIn_failure":return n("auth_fail");case"configured":(Ju=!0)&&Zu&&nc()}}},tc=function(e){var t=e.event;if(t)switch(t){case"pinpointProvider_configured":Zu=!0,Ju&&Zu&&nc()}},nc=function(){var e=qu.configure();!Yu&&e.autoSessionRecord&&(qu.updateEndpoint({immediate:!0}).catch(function(e){ju.debug("Failed to update the endpoint",e)}),Yu=!0),qu.autoTrack("session",{enable:e.autoSessionRecord})},rc=new zu;function oc(t){return t&&["provider","customState"].find(function(e){return t.hasOwnProperty(e)})}function ic(e){return void 0!==e.redirectSignIn}(Gu=Ku=Ku||{}).Cognito="COGNITO",Gu.Google="Google",Gu.Facebook="Facebook",Gu.Amazon="LoginWithAmazon",Gu.Apple="SignInWithApple",($u=Wu=Wu||{}).NoConfig="noConfig",$u.MissingAuthConfig="missingAuthConfig",$u.EmptyUsername="emptyUsername",$u.InvalidUsername="invalidUsername",$u.EmptyPassword="emptyPassword",$u.EmptyCode="emptyCode",$u.SignUpError="signUpError",$u.NoMFA="noMFA",$u.InvalidMFA="invalidMFA",$u.EmptyChallengeResponse="emptyChallengeResponse",$u.NoUserSession="noUserSession",$u.Default="default";var sc=function(){function e(e){var t=e||{},n=t.ValidationData,r=t.Username,o=t.Password,i=t.AuthParameters,s=t.ClientMetadata;this.validationData=n||{},this.authParameters=i||{},this.clientMetadata=s||{},this.username=r,this.password=o}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}(),ac="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},uc=[],cc=[],lc="undefined"!=typeof Uint8Array?Uint8Array:Array,pc=!1;function dc(){pc=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)uc[t]=e[t],cc[e.charCodeAt(t)]=t;cc["-".charCodeAt(0)]=62,cc["_".charCodeAt(0)]=63}function hc(e,t,n){for(var r,o,i=[],s=t;s<n;s+=3)r=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(uc[(o=r)>>18&63]+uc[o>>12&63]+uc[o>>6&63]+uc[63&o]);return i.join("")}function fc(e){var t;pc||dc();for(var n=e.length,r=n%3,o="",i=[],s=0,a=n-r;s<a;s+=16383)i.push(hc(e,s,a<s+16383?a:s+16383));return 1==r?(t=e[n-1],o+=uc[t>>2],o+=uc[t<<4&63],o+="=="):2==r&&(t=(e[n-2]<<8)+e[n-1],o+=uc[t>>10],o+=uc[t>>4&63],o+=uc[t<<2&63],o+="="),i.push(o),i.join("")}function mc(e,t,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,c=u>>1,l=-7,p=n?o-1:0,d=n?-1:1,h=e[t+p];for(p+=d,i=h&(1<<-l)-1,h>>=-l,l+=a;0<l;i=256*i+e[t+p],p+=d,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;0<l;s=256*s+e[t+p],p+=d,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),i-=c}return(h?-1:1)*s*Math.pow(2,i-r)}function gc(e,t,n,r,o,i){var s,a,u,c=8*i-o-1,l=(1<<c)-1,p=l>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),2<=(t+=1<=s+p?d/u:d*Math.pow(2,1-p))*u&&(s++,u/=2),l<=s+p?(a=0,s=l):1<=s+p?(a=(t*u-1)*Math.pow(2,o),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,o),s=0));8<=o;e[n+h]=255&a,h+=f,a/=256,o-=8);for(s=s<<o|a,c+=o;0<c;e[n+h]=255&s,h+=f,s/=256,c-=8);e[n+h-f]|=128*m}var yc={}.toString,vc=Array.isArray||function(e){return"[object Array]"==yc.call(e)};function bc(){return Sc.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function wc(e,t){if(bc()<t)throw new RangeError("Invalid typed array length");return Sc.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Sc.prototype:(null===e&&(e=new Sc(t)),e.length=t),e}function Sc(e,t,n){if(!(Sc.TYPED_ARRAY_SUPPORT||this instanceof Sc))return new Sc(e,t,n);if("number"!=typeof e)return _c(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Ec(this,e)}function _c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);Sc.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Sc.prototype:e=Ic(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!Sc.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|kc(t,n),o=(e=wc(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(Pc(t)){var n=0|Ac(t.length);return 0===(e=wc(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?wc(e,0):Ic(e,t);if("Buffer"===t.type&&vc(t.data))return Ic(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Cc(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Ec(e,t){if(Cc(t),e=wc(e,t<0?0:0|Ac(t)),!Sc.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function Ic(e,t){var n=t.length<0?0:0|Ac(t.length);e=wc(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function Ac(e){if(e>=bc())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+bc().toString(16)+" bytes");return 0|e}function Pc(e){return null!=e&&e._isBuffer}function kc(e,t){if(Pc(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Kc(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Gc(e).length;default:if(r)return Kc(e).length;t=(""+t).toLowerCase(),r=!0}}function Oc(e,t,n){var r,o,i,s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0);(!n||n<0||r<n)&&(n=r);for(var o="",i=t;i<n;++i)o+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[i]);return o}(this,t,n);case"utf8":case"utf-8":return Mc(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}(this,t,n);case"base64":return r=this,i=n,0===(o=t)&&i===r.length?fc(r):fc(r.slice(o,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function Tc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function xc(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=Sc.from(t,r)),Pc(t))return 0===t.length?-1:Nc(e,t,n,r,o);if("number"==typeof t)return t&=255,Sc.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Nc(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function Nc(e,t,n,r,o){var i=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=i=2,a/=2,n/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o)for(var c=-1,l=n;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===a)return c*i}else-1!==c&&(l-=l-c),c=-1;else for(s<n+a&&(n=s-a),l=n;0<=l;l--){for(var p=!0,d=0;d<a;d++)if(u(e,l+d)!==u(t,d)){p=!1;break}if(p)return l}return-1}function Uc(e,t,n,r){return Wc(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function Rc(e,t,n,r){return Wc(function(e,t){for(var n,r,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function Mc(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,u,c=e[o],l=null,p=239<c?4:223<c?3:191<c?2:1;if(o+p<=n)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&127<(u=(31&c)<<6|63&i)&&(l=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&i)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,p=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=p}return function(e){var t=e.length;if(t<=Dc)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Dc));return n}(r)}Sc.TYPED_ARRAY_SUPPORT=void 0===ac.TYPED_ARRAY_SUPPORT||ac.TYPED_ARRAY_SUPPORT,Sc.poolSize=8192,Sc._augment=function(e){return e.__proto__=Sc.prototype,e},Sc.from=function(e,t,n){return _c(null,e,t,n)},Sc.TYPED_ARRAY_SUPPORT&&(Sc.prototype.__proto__=Uint8Array.prototype,Sc.__proto__=Uint8Array),Sc.alloc=function(e,t,n){return r=null,i=t,s=n,Cc(o=e),o<=0||void 0===i?wc(r,o):"string"==typeof s?wc(r,o).fill(i,s):wc(r,o).fill(i);var r,o,i,s},Sc.allocUnsafe=function(e){return Ec(null,e)},Sc.allocUnsafeSlow=function(e){return Ec(null,e)},Sc.isBuffer=function(e){return null!=e&&(!!e._isBuffer||$c(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&$c(e.slice(0,0))}(e))},Sc.compare=function(e,t){if(!Pc(e)||!Pc(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},Sc.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Sc.concat=function(e,t){if(!vc(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Sc.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var n=Sc.allocUnsafe(t),r=0,o=0;o<e.length;++o){var i=e[o];if(!Pc(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,r),r+=i.length}return n},Sc.byteLength=kc,Sc.prototype._isBuffer=!0,Sc.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Tc(this,t,t+1);return this},Sc.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Tc(this,t,t+3),Tc(this,t+1,t+2);return this},Sc.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Tc(this,t,t+7),Tc(this,t+1,t+6),Tc(this,t+2,t+5),Tc(this,t+3,t+4);return this},Sc.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?Mc(this,0,e):Oc.apply(this,arguments)},Sc.prototype.equals=function(e){if(!Pc(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Sc.compare(this,e)},Sc.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},Sc.prototype.compare=function(e,t,n,r,o){if(!Pc(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=t)return 0;if(o<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(r,o),c=e.slice(t,n),l=0;l<a;++l)if(u[l]!==c[l]){i=u[l],s=c[l];break}return i<s?-1:s<i?1:0},Sc.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Sc.prototype.indexOf=function(e,t,n){return xc(this,e,t,n,!0)},Sc.prototype.lastIndexOf=function(e,t,n){return xc(this,e,t,n,!1)},Sc.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||o<n)&&(n=o),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,s,a,u,c,l,p=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var o=e.length-n;(!r||o<(r=Number(r)))&&(r=o);var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");i/2<r&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}(this,e,t,n);case"utf8":case"utf-8":return c=t,l=n,Wc(Kc(e,(u=this).length-c),u,c,l);case"ascii":return Uc(this,e,t,n);case"latin1":case"binary":return Uc(this,e,t,n);case"base64":return i=this,s=t,a=n,Wc(Gc(e),i,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Rc(this,e,t,n);default:if(p)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},Sc.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Dc=4096;function Fc(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function Lc(e,t,n,r,o,i){if(!Pc(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function jc(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function Bc(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function Vc(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function qc(e,t,n,r,o){return o||Vc(e,0,n,4),gc(e,t,n,r,23,4),n+4}function zc(e,t,n,r,o){return o||Vc(e,0,n,8),gc(e,t,n,r,52,8),n+8}Sc.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),Sc.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=Sc.prototype;else for(var r=t-e,o=new Sc(r,void 0),i=0;i<r;++i)o[i]=this[i+e];return o},Sc.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||Fc(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},Sc.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||Fc(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},Sc.prototype.readUInt8=function(e,t){return t||Fc(e,1,this.length),this[e]},Sc.prototype.readUInt16LE=function(e,t){return t||Fc(e,2,this.length),this[e]|this[e+1]<<8},Sc.prototype.readUInt16BE=function(e,t){return t||Fc(e,2,this.length),this[e]<<8|this[e+1]},Sc.prototype.readUInt32LE=function(e,t){return t||Fc(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Sc.prototype.readUInt32BE=function(e,t){return t||Fc(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Sc.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||Fc(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*t)),r},Sc.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||Fc(e,t,this.length);for(var r=t,o=1,i=this[e+--r];0<r&&(o*=256);)i+=this[e+--r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},Sc.prototype.readInt8=function(e,t){return t||Fc(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Sc.prototype.readInt16LE=function(e,t){t||Fc(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Sc.prototype.readInt16BE=function(e,t){t||Fc(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Sc.prototype.readInt32LE=function(e,t){return t||Fc(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Sc.prototype.readInt32BE=function(e,t){return t||Fc(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Sc.prototype.readFloatLE=function(e,t){return t||Fc(e,4,this.length),mc(this,e,!0,23,4)},Sc.prototype.readFloatBE=function(e,t){return t||Fc(e,4,this.length),mc(this,e,!1,23,4)},Sc.prototype.readDoubleLE=function(e,t){return t||Fc(e,8,this.length),mc(this,e,!0,52,8)},Sc.prototype.readDoubleBE=function(e,t){return t||Fc(e,8,this.length),mc(this,e,!1,52,8)},Sc.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Lc(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},Sc.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Lc(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+n},Sc.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Lc(this,e,t,1,255,0),Sc.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Sc.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Lc(this,e,t,2,65535,0),Sc.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):jc(this,e,t,!0),t+2},Sc.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Lc(this,e,t,2,65535,0),Sc.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):jc(this,e,t,!1),t+2},Sc.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Lc(this,e,t,4,4294967295,0),Sc.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Bc(this,e,t,!0),t+4},Sc.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Lc(this,e,t,4,4294967295,0),Sc.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Bc(this,e,t,!1),t+4},Sc.prototype.writeIntLE=function(e,t,n,r){var o;e=+e,t|=0,r||Lc(this,e,t,n,(o=Math.pow(2,8*n-1))-1,-o);var i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},Sc.prototype.writeIntBE=function(e,t,n,r){var o;e=+e,t|=0,r||Lc(this,e,t,n,(o=Math.pow(2,8*n-1))-1,-o);var i=n-1,s=1,a=0;for(this[t+i]=255&e;0<=--i&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},Sc.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Lc(this,e,t,1,127,-128),Sc.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Sc.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Lc(this,e,t,2,32767,-32768),Sc.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):jc(this,e,t,!0),t+2},Sc.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Lc(this,e,t,2,32767,-32768),Sc.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):jc(this,e,t,!1),t+2},Sc.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Lc(this,e,t,4,2147483647,-2147483648),Sc.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Bc(this,e,t,!0),t+4},Sc.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Lc(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Sc.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Bc(this,e,t,!1),t+4},Sc.prototype.writeFloatLE=function(e,t,n){return qc(this,e,t,!0,n)},Sc.prototype.writeFloatBE=function(e,t,n){return qc(this,e,t,!1,n)},Sc.prototype.writeDoubleLE=function(e,t,n){return zc(this,e,t,!0,n)},Sc.prototype.writeDoubleBE=function(e,t,n){return zc(this,e,t,!1,n)},Sc.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),t=t||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;0<=o;--o)e[o+t]=this[o+n];else if(i<1e3||!Sc.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},Sc.prototype.fill=function(e,t,n,r){if("string"==typeof e){var o;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==e.length||(o=e.charCodeAt(0))<256&&(e=o),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Sc.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else for(var i=Pc(e)?e:Kc(new Sc(e,r).toString()),s=i.length,a=0;a<n-t;++a)this[a+t]=i[a%s];return this};var Hc=/[^+\/0-9A-Za-z-_]/g;function Kc(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!o){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,n<128){if(--t<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Gc(e){return function(e){var t,n,r,o;pc||dc();var i=e.length;if(0<i%4)throw new Error("Invalid string. Length must be a multiple of 4");r="="===e[i-2]?2:"="===e[i-1]?1:0,o=new lc(3*i/4-r),t=0<r?i-4:i;for(var s=0,a=0;a<t;a+=4,0)n=cc[e.charCodeAt(a)]<<18|cc[e.charCodeAt(a+1)]<<12|cc[e.charCodeAt(a+2)]<<6|cc[e.charCodeAt(a+3)],o[s++]=n>>16&255,o[s++]=n>>8&255,o[s++]=255&n;return 2==r?(n=cc[e.charCodeAt(a)]<<2|cc[e.charCodeAt(a+1)]>>4,o[s++]=255&n):1==r&&(n=cc[e.charCodeAt(a)]<<10|cc[e.charCodeAt(a+1)]<<4|cc[e.charCodeAt(a+2)]>>2,o[s++]=n>>8&255,o[s++]=255&n),o}(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(Hc,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Wc(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function $c(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function Yc(e,t){null!=e&&this.fromString(e,t)}function Jc(){return new Yc(null)}var Zc="undefined"!=typeof navigator,Qc=Zc&&"Microsoft Internet Explorer"==navigator.appName?(Yc.prototype.am=function(e,t,n,r,o,i){for(var s=32767&t,a=t>>15;0<=--i;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;o=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&o))>>>30)+(l>>>15)+a*c+(o>>>30),n[r++]=1073741823&u}return o},30):Zc&&"Netscape"!=navigator.appName?(Yc.prototype.am=function(e,t,n,r,o,i){for(;0<=--i;){var s=t*this[e++]+n[r]+o;o=Math.floor(s/67108864),n[r++]=67108863&s}return o},26):(Yc.prototype.am=function(e,t,n,r,o,i){for(var s=16383&t,a=t>>14;0<=--i;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;o=((u=s*u+((16383&l)<<14)+n[r]+o)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return o},28);Yc.prototype.DB=Qc,Yc.prototype.DM=(1<<Qc)-1,Yc.prototype.DV=1<<Qc;Yc.prototype.FV=Math.pow(2,52),Yc.prototype.F1=52-Qc,Yc.prototype.F2=2*Qc-52;for(var Xc="0123456789abcdefghijklmnopqrstuvwxyz",el=new Array,tl="0".charCodeAt(0),nl=0;nl<=9;++nl)el[tl++]=nl;for(tl="a".charCodeAt(0),nl=10;nl<36;++nl)el[tl++]=nl;for(tl="A".charCodeAt(0),nl=10;nl<36;++nl)el[tl++]=nl;function rl(e){return Xc.charAt(e)}function ol(e){var t=Jc();return t.fromInt(e),t}function il(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function sl(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}sl.prototype.convert=function(e){var t=Jc();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(Yc.ZERO)&&this.m.subTo(t,t),t},sl.prototype.revert=function(e){var t=Jc();return e.copyTo(t),this.reduce(t),t},sl.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},sl.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},sl.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Yc.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},Yc.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},Yc.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r,o,i=e.length,s=!1,a=0;0<=--i;){var u=(r=i,o=void 0,null==(o=el[e.charCodeAt(r)])?-1:o);u<0?"-"==e.charAt(i)&&(s=!0):(s=!1,0==a?this[this.t++]=u:a+n>this.DB?(this[this.t-1]|=(u&(1<<this.DB-a)-1)<<a,this[this.t++]=u>>this.DB-a):this[this.t-1]|=u<<a,(a+=n)>=this.DB&&(a-=this.DB))}this.clamp(),s&&Yc.ZERO.subTo(this,this)},Yc.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},Yc.prototype.dlShiftTo=function(e,t){for(var n=this.t-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t.t=this.t+e,t.s=this.s},Yc.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},Yc.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,r=this.DB-n,o=(1<<r)-1,i=Math.floor(e/this.DB),s=this.s<<n&this.DM,a=this.t-1;0<=a;--a)t[a+i+1]=this[a]>>r|s,s=(this[a]&o)<<n;for(a=i-1;0<=a;--a)t[a]=0;t[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()},Yc.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,o=this.DB-r,i=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&i)<<o,t[s-n]=this[s]>>r;0<r&&(t[this.t-n-1]|=(this.s&i)<<o),t.t=this.t-n,t.clamp()}},Yc.prototype.subTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:0<r&&(t[n++]=r),t.t=n,t.clamp()},Yc.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),o=n.t;for(t.t=o+r.t;0<=--o;)t[o]=0;for(o=0;o<r.t;++o)t[o+n.t]=n.am(0,r[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&Yc.ZERO.subTo(t,t)},Yc.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},Yc.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var o=this.abs();if(o.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=Jc());var i=Jc(),s=this.s,a=e.s,u=this.DB-il(r[r.t-1]);0<u?(r.lShiftTo(u,i),o.lShiftTo(u,n)):(r.copyTo(i),o.copyTo(n));var c=i.t,l=i[c-1];if(0!=l){var p=l*(1<<this.F1)+(1<c?i[c-2]>>this.F2:0),d=this.FV/p,h=(1<<this.F1)/p,f=1<<this.F2,m=n.t,g=m-c,y=null==t?Jc():t;for(i.dlShiftTo(g,y),0<=n.compareTo(y)&&(n[n.t++]=1,n.subTo(y,n)),Yc.ONE.dlShiftTo(c,y),y.subTo(i,i);i.t<c;)i[i.t++]=0;for(;0<=--g;){var v=n[--m]==l?this.DM:Math.floor(n[m]*d+(n[m-1]+f)*h);if((n[m]+=i.am(0,v,n,g,0,c))<v)for(i.dlShiftTo(g,y),n.subTo(y,n);n[m]<--v;)n.subTo(y,n)}null!=t&&(n.drShiftTo(c,t),s!=a&&Yc.ZERO.subTo(t,t)),n.t=c,n.clamp(),0<u&&n.rShiftTo(u,n),s<0&&Yc.ZERO.subTo(n,n)}}},Yc.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},Yc.prototype.addTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,0<r?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},Yc.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,o=!1,i="",s=this.t,a=this.DB-s*this.DB%t;if(0<s--)for(a<this.DB&&0<(n=this[s]>>a)&&(o=!0,i=rl(n));0<=s;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),0<n&&(o=!0),o&&(i+=rl(n));return o?i:"0"},Yc.prototype.negate=function(){var e=Jc();return Yc.ZERO.subTo(this,e),e},Yc.prototype.abs=function(){return this.s<0?this.negate():this},Yc.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0},Yc.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+il(this[this.t-1]^this.s&this.DM)},Yc.prototype.mod=function(e){var t=Jc();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(Yc.ZERO)&&e.subTo(t,t),t},Yc.prototype.equals=function(e){return 0==this.compareTo(e)},Yc.prototype.add=function(e){var t=Jc();return this.addTo(e,t),t},Yc.prototype.subtract=function(e){var t=Jc();return this.subTo(e,t),t},Yc.prototype.multiply=function(e){var t=Jc();return this.multiplyTo(e,t),t},Yc.prototype.divide=function(e){var t=Jc();return this.divRemTo(e,t,null),t},Yc.prototype.modPow=function(e,t,n){var r,o=e.bitLength(),i=ol(1),s=new sl(t);if(o<=0)return i;r=o<18?1:o<48?3:o<144?4:o<768?5:6;var a=new Array,u=3,c=r-1,l=(1<<r)-1;if(a[1]=s.convert(this),1<r){var p=Jc();for(s.sqrTo(a[1],p);u<=l;)a[u]=Jc(),s.mulTo(p,a[u-2],a[u]),u+=2}for(var d,h,f=e.t-1,m=!0,g=Jc(),o=il(e[f])-1;0<=f;){for(c<=o?d=e[f]>>o-c&l:(d=(e[f]&(1<<o+1)-1)<<c-o,0<f&&(d|=e[f-1]>>this.DB+o-c)),u=r;0==(1&d);)d>>=1,--u;if((o-=u)<0&&(o+=this.DB,--f),m)a[d].copyTo(i),m=!1;else{for(;1<u;)s.sqrTo(i,g),s.sqrTo(g,i),u-=2;0<u?s.sqrTo(i,g):(h=i,i=g,g=h),s.mulTo(g,a[d],i)}for(;0<=f&&0==(e[f]&1<<o);)s.sqrTo(i,g),h=i,i=g,g=h,--o<0&&(o=this.DB-1,--f)}var y=s.revert(i);return n(null,y),y},Yc.ZERO=ol(0),Yc.ONE=ol(1);function al(e){return Sc.from(A.lib.WordArray.random(e).toString(),"hex")}var ul=function(){function e(e){this.N=new Yc("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new Yc("2",16),this.k=new Yc(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=Sc.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(n){var r=this;this.largeAValue?n(null,this.largeAValue):this.calculateA(this.smallAValue,function(e,t){e&&n(e,null),r.largeAValue=t,n(null,r.largeAValue)})},t.generateRandomSmallA=function(){return new Yc(al(128).toString("hex"),16).mod(this.N)},t.generateRandomString=function(){return al(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();var o=""+e+t+":"+this.randomPassword,i=this.hash(o),s=al(16).toString("hex");this.SaltToHashDevices=this.padHex(new Yc(s,16)),this.g.modPow(new Yc(this.hexHash(this.SaltToHashDevices+i),16),this.N,function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)})},t.calculateA=function(e,n){var r=this;this.g.modPow(e,this.N,function(e,t){e&&n(e,null),t.mod(r.N).equals(Yc.ZERO)&&n(new Error("Illegal paramater. A mod N cannot be 0."),null),n(null,t)})},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new Yc(this.UHexHash,16)},t.hash=function(e){var t=e instanceof Sc?A.lib.WordArray.create(e):e,n=k(t).toString();return new Array(64-n.length).join("0")+n},t.hexHash=function(e){return this.hash(Sc.from(e,"hex"))},t.computehkdf=function(e,t){var n=A.lib.WordArray.create(Sc.concat([this.infoBits,Sc.from(String.fromCharCode(1),"utf8")])),r=e instanceof Sc?A.lib.WordArray.create(e):e,o=t instanceof Sc?A.lib.WordArray.create(t):t,i=O(r,o),s=O(n,i);return Sc.from(s.toString(),"hex").slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,r,o){var i=this;if(n.mod(this.N).equals(Yc.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(Yc.ZERO))throw new Error("U cannot be zero.");var s=""+this.poolName+e+":"+t,a=this.hash(s),u=new Yc(this.hexHash(this.padHex(r)+a),16);this.calculateS(u,n,function(e,t){e&&o(e,null);var n=i.computehkdf(Sc.from(i.padHex(t),"hex"),Sc.from(i.padHex(i.UValue.toString(16)),"hex"));o(null,n)})},t.calculateS=function(n,r,o){var i=this;this.g.modPow(n,this.N,function(e,t){e&&o(e,null),r.subtract(i.k.multiply(t)).modPow(i.smallAValue.add(i.UValue.multiply(n)),i.N,function(e,t){e&&o(e,null),o(null,t.mod(i.N))})})},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){var t=e.toString(16);return t.length%2==1?t="0"+t:-1!=="89ABCDEFabcdef".indexOf(t[0])&&(t="00"+t),t},e}(),cl=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(Sc.from(e,"base64").toString("utf8"))}catch(e){return{}}},e}();var ll=function(n){var e,t;function r(e){var t=(void 0===e?{}:e).AccessToken;return n.call(this,t||"")||this}return t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r}(cl);var pl=function(n){var e,t;function r(e){var t=(void 0===e?{}:e).IdToken;return n.call(this,t||"")||this}return t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r}(cl),dl=function(){function e(e){var t=(void 0===e?{}:e).RefreshToken;this.token=t||""}return e.prototype.getToken=function(){return this.token},e}(),hl=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,o=t.AccessToken,i=t.ClockDrift;if(null==o||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=o,this.clockDrift=void 0===i?this.calculateClockDrift():i}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),fl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ml=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],gl=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=ml[e.getUTCDay()],n=fl[e.getUTCMonth()],r=e.getUTCDate(),o=e.getUTCHours();o<10&&(o="0"+o);var i=e.getUTCMinutes();i<10&&(i="0"+i);var s=e.getUTCSeconds();return s<10&&(s="0"+s),t+" "+n+" "+r+" "+o+":"+i+":"+s+" UTC "+e.getUTCFullYear()},e}(),yl=function(){function e(e){var t=void 0===e?{}:e,n=t.Name,r=t.Value;this.Name=n||"",this.Value=r||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),vl={},bl=function(){function e(){}return e.setItem=function(e,t){return vl[e]=t,vl[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(vl,e)?vl[e]:void 0},e.removeItem=function(e){return delete vl[e]},e.clear=function(){return vl={}},e}(),wl=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=bl}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),Sl="undefined"!=typeof navigator?navigator.userAgent:"nodejs",_l=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new wl).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,o){var i=this,t=e.getAuthParameters();t.USERNAME=this.username;var n=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),r={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:n};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",r,function(e,t){if(e)return o.onFailure(e);var n=t.ChallengeName,r=t.ChallengeParameters;return"CUSTOM_CHALLENGE"===n?(i.Session=t.Session,o.customChallenge(r)):(i.signInUserSession=i.getCognitoUserSession(t.AuthenticationResult),i.cacheTokens(),o.onSuccess(i.signInUserSession))})},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(r,p){var o,i,d=this,h=new ul(this.pool.getUserPoolId().split("_")[1]),f=new gl,s={};null!=this.deviceKey&&(s.DEVICE_KEY=this.deviceKey),s.USERNAME=this.username,h.getLargeAValue(function(e,t){e&&p.onFailure(e),s.SRP_A=t.toString(16),"CUSTOM_AUTH"===d.authenticationFlowType&&(s.CHALLENGE_NAME="SRP_A");var l=0!==Object.keys(r.getValidationData()).length?r.getValidationData():r.getClientMetadata(),n={AuthFlow:d.authenticationFlowType,ClientId:d.pool.getClientId(),AuthParameters:s,ClientMetadata:l};d.getUserContextData(d.username)&&(n.UserContextData=d.getUserContextData(d.username)),d.client.request("InitiateAuth",n,function(e,u){if(e)return p.onFailure(e);var c=u.ChallengeParameters;d.username=c.USER_ID_FOR_SRP,o=new Yc(c.SRP_B,16),i=new Yc(c.SALT,16),d.getCachedDeviceKeyAndPassword(),h.getPasswordAuthenticationKey(d.username,r.getPassword(),o,i,function(e,t){e&&p.onFailure(e);var n=f.getNowString(),r=A.lib.WordArray.create(Sc.concat([Sc.from(d.pool.getUserPoolId().split("_")[1],"utf8"),Sc.from(d.username,"utf8"),Sc.from(c.SECRET_BLOCK,"base64"),Sc.from(n,"utf8")])),o=A.lib.WordArray.create(t),i=T.stringify(O(r,o)),s={};s.USERNAME=d.username,s.PASSWORD_CLAIM_SECRET_BLOCK=c.SECRET_BLOCK,s.TIMESTAMP=n,s.PASSWORD_CLAIM_SIGNATURE=i,null!=d.deviceKey&&(s.DEVICE_KEY=d.deviceKey);var a={ChallengeName:"PASSWORD_VERIFIER",ClientId:d.pool.getClientId(),ChallengeResponses:s,Session:u.Session,ClientMetadata:l};d.getUserContextData()&&(a.UserContextData=d.getUserContextData()),function n(r,o){return d.client.request("RespondToAuthChallenge",r,function(e,t){return e&&"ResourceNotFoundException"===e.code&&-1!==e.message.toLowerCase().indexOf("device")?(s.DEVICE_KEY=null,d.deviceKey=null,d.randomPassword=null,d.deviceGroupKey=null,d.clearCachedDeviceKeyAndPassword(),n(r,o)):o(e,t)})}(a,function(e,t){return e?p.onFailure(e):d.authenticateUserInternal(t,h,p)})})})})},t.authenticateUserPlainUsernamePassword=function(e,n){var r,t,o,i=this,s={};s.USERNAME=this.username,s.PASSWORD=e.getPassword(),s.PASSWORD?(r=new ul(this.pool.getUserPoolId().split("_")[1]),this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(s.DEVICE_KEY=this.deviceKey),t=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),o={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:s,ClientMetadata:t},this.getUserContextData(this.username)&&(o.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",o,function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,r,n)})):n.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(n,r,o){var i=this,e=n.ChallengeName,t=n.ChallengeParameters;if("SMS_MFA"===e)return this.Session=n.Session,o.mfaRequired(e,t);if("SELECT_MFA_TYPE"===e)return this.Session=n.Session,o.selectMFAType(e,t);if("MFA_SETUP"===e)return this.Session=n.Session,o.mfaSetup(e,t);if("SOFTWARE_TOKEN_MFA"===e)return this.Session=n.Session,o.totpRequired(e,t);if("CUSTOM_CHALLENGE"===e)return this.Session=n.Session,o.customChallenge(t);if("NEW_PASSWORD_REQUIRED"===e){this.Session=n.Session;var s=null,a=null,u=[],c=r.getNewPasswordRequiredChallengeUserAttributePrefix();if(t&&(s=JSON.parse(n.ChallengeParameters.userAttributes),a=JSON.parse(n.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)u[l]=a[l].substr(c.length);return o.newPasswordRequired(s,u)}if("DEVICE_SRP_AUTH"!==e){this.signInUserSession=this.getCognitoUserSession(n.AuthenticationResult),this.challengeName=e,this.cacheTokens();var p=n.AuthenticationResult.NewDeviceMetadata;if(null==p)return o.onSuccess(this.signInUserSession);r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return o.onFailure(e);var t={Salt:Sc.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:Sc.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=t.PasswordVerifier,i.deviceGroupKey=p.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:p.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:t,DeviceName:Sl},function(e,t){return e?o.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?o.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):o.onSuccess(i.signInUserSession))})})}else this.getDeviceResponse(o)},t.completeNewPasswordChallenge=function(e,t,n,r){var o=this;if(!e)return n.onFailure(new Error("New password is required."));var i=new ul(this.pool.getUserPoolId().split("_")[1]),s=i.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach(function(e){a[s+e]=t[e]}),a.NEW_PASSWORD=e,a.USERNAME=this.username;var u={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,function(e,t){return e?n.onFailure(e):o.authenticateUserInternal(t,i,n)})},t.getDeviceResponse=function(l,r){var p=this,o=new ul(this.deviceGroupKey),d=new gl,i={};i.USERNAME=this.username,i.DEVICE_KEY=this.deviceKey,o.getLargeAValue(function(e,t){e&&l.onFailure(e),i.SRP_A=t.toString(16);var n={ChallengeName:"DEVICE_SRP_AUTH",ClientId:p.pool.getClientId(),ChallengeResponses:i,ClientMetadata:r};p.getUserContextData()&&(n.UserContextData=p.getUserContextData()),p.client.request("RespondToAuthChallenge",n,function(e,u){if(e)return l.onFailure(e);var c=u.ChallengeParameters,t=new Yc(c.SRP_B,16),n=new Yc(c.SALT,16);o.getPasswordAuthenticationKey(p.deviceKey,p.randomPassword,t,n,function(e,t){if(e)return l.onFailure(e);var n=d.getNowString(),r=A.lib.WordArray.create(Sc.concat([Sc.from(p.deviceGroupKey,"utf8"),Sc.from(p.deviceKey,"utf8"),Sc.from(c.SECRET_BLOCK,"base64"),Sc.from(n,"utf8")])),o=A.lib.WordArray.create(t),i=T.stringify(O(r,o)),s={};s.USERNAME=p.username,s.PASSWORD_CLAIM_SECRET_BLOCK=c.SECRET_BLOCK,s.TIMESTAMP=n,s.PASSWORD_CLAIM_SIGNATURE=i,s.DEVICE_KEY=p.deviceKey;var a={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:p.pool.getClientId(),ChallengeResponses:s,Session:u.Session};p.getUserContextData()&&(a.UserContextData=p.getUserContextData()),p.client.request("RespondToAuthChallenge",a,function(e,t){return e?l.onFailure(e):(p.signInUserSession=p.getCognitoUserSession(t.AuthenticationResult),p.cacheTokens(),l.onSuccess(p.signInUserSession))})})})})},t.confirmRegistration=function(e,t,n,r){var o={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",o,function(e){return e?n(e,null):n(null,"SUCCESS")})},t.sendCustomChallengeAnswer=function(e,n,t){var r=this,o={};o.USERNAME=this.username,o.ANSWER=e;var i=new ul(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);var s={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:t};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",s,function(e,t){return e?n.onFailure(e):r.authenticateUserInternal(t,i,n)})},t.sendMFACode=function(e,o,t,n){var i=this,r={};r.USERNAME=this.username,r.SMS_MFA_CODE=e;var s=t||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===s&&(r.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey);var a={ChallengeName:s,ChallengeResponses:r,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,function(e,n){if(e)return o.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return o.onSuccess(i.signInUserSession);var r=new ul(i.pool.getUserPoolId().split("_")[1]);r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return o.onFailure(e);var t={Salt:Sc.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:Sc.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=t.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:t,DeviceName:Sl},function(e,t){return e?o.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?o.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):o.onSuccess(i.signInUserSession))})})}else i.getDeviceResponse(o)})},t.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(e){return e?n(e,null):n(null,"SUCCESS")})},t.enableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);var e=[];e.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},t.disableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},t.deleteUser=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:e},function(e){return e?t(e,null):(n.clearCachedUser(),t(null,"SUCCESS"))})},t.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},function(e){return e?t(e,null):r.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},t.getUserAttributes=function(s){if(null==this.signInUserSession||!this.signInUserSession.isValid())return s(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){if(e)return s(e,null);for(var n=[],r=0;r<t.UserAttributes.length;r++){var o={Name:t.UserAttributes[r].Name,Value:t.UserAttributes[r].Value},i=new yl(o);n.push(i)}return s(null,n)})},t.getMFAOptions=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n(e,null):n(null,t.MFAOptions)})},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(){var n=this;return new Promise(function(e){var t=n.signInUserSession.getRefreshToken();t&&t.getToken()?n.refreshSession(t,e):e()})},t.getUserData=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),t(new Error("User is not authenticated"),null);var r=this.getUserDataFromCache();if(r)if(this.isFetchUserDataAndTokenRequired(e))this.fetchUserData().then(function(e){return n.refreshSessionIfPossible().then(function(){return e})}).then(function(e){return t(null,e)}).catch(t);else try{return void t(null,JSON.parse(r))}catch(e){return this.clearCachedUserData(),void t(e,null)}else this.fetchUserData().then(function(e){t(null,e)}).catch(t)},t.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},t.isFetchUserDataAndTokenRequired=function(e){var t=(e||{}).bypassCache;return void 0!==t&&t},t.fetchUserData=function(){var t=this;return this.createGetUserRequest().then(function(e){return t.cacheUserData(e),e})},t.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},t.resendConfirmationCode=function(n,e){var t={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.client.request("ResendConfirmationCode",t,function(e,t){return e?n(e,null):n(null,t)})},t.getSession=function(e){if(null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,n=t+".idToken",r=t+".accessToken",o=t+".refreshToken",i=t+".clockDrift";if(this.storage.getItem(n)){var s=new pl({IdToken:this.storage.getItem(n)}),a=new ll({AccessToken:this.storage.getItem(r)}),u=new dl({RefreshToken:this.storage.getItem(o)}),c=parseInt(this.storage.getItem(i),0)||0,l=new hl({IdToken:s,AccessToken:a,RefreshToken:u,ClockDrift:c});if(l.isValid())return this.signInUserSession=l,e(null,this.signInUserSession);if(!u.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(u,e)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(r,o,e){var i=this,t={};t.REFRESH_TOKEN=r.getToken();var n,s="CognitoIdentityServiceProvider."+this.pool.getClientId(),a=s+".LastAuthUser";this.storage.getItem(a)&&(this.username=this.storage.getItem(a),n=s+"."+this.username+".deviceKey",this.deviceKey=this.storage.getItem(n),t.DEVICE_KEY=this.deviceKey);var u={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:t,ClientMetadata:e};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",u,function(e,t){if(e)return"NotAuthorizedException"===e.code&&i.clearCachedUser(),o(e,null);if(t){var n=t.AuthenticationResult;return Object.prototype.hasOwnProperty.call(n,"RefreshToken")||(n.RefreshToken=r.getToken()),i.signInUserSession=i.getCognitoUserSession(n),i.cacheTokens(),o(null,i.signInUserSession)}})},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",o=e+"."+this.username+".clockDrift",i=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(o,""+this.signInUserSession.getClockDrift()),this.storage.setItem(i,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(r,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(r))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",o=e+".LastAuthUser",i=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(o),this.storage.removeItem(i)},t.getCognitoUserSession=function(e){var t=new pl(e),n=new ll(e),r=new dl(e);return new hl({IdToken:t,AccessToken:n,RefreshToken:r})},t.forgotPassword=function(n,e){var t={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",t,function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess(t)})},t.confirmPassword=function(e,t,n,r){var o={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",o,function(e){return e?n.onFailure(e):n.onSuccess()})},t.getAttributeVerificationCode=function(e,n,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess()})},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},t.getDevice=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.forgetDevice=function(t){var n=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:t.onFailure,onSuccess:function(e){return n.deviceKey=null,n.deviceGroupKey=null,n.randomPassword=null,n.clearCachedDeviceKeyAndPassword(),t.onSuccess(e)}})},t.setDeviceStatusRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.setDeviceStatusNotRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));var r={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(r.PaginationToken=t),this.client.request("ListDevices",r,function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},t.globalSignOut=function(t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t.onFailure(e):(n.clearCachedUser(),t.onSuccess("SUCCESS"))})},t.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},t.sendMFASelectionAnswer=function(n,r){var o=this,e={};e.USERNAME=this.username,e.ANSWER=n;var t={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:e,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",t,function(e,t){return e?r.onFailure(e):(o.Session=t.Session,"SMS_MFA"===n?r.mfaRequired(t.challengeName,t.challengeParameters):"SOFTWARE_TOKEN_MFA"===n?r.totpRequired(t.challengeName,t.challengeParameters):void 0)})},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n.onFailure(e):n.associateSecretCode(t.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,n.associateSecretCode(t.SecretCode))})},t.verifySoftwareToken=function(e,t,o){var i=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},function(e,t){return e?o.onFailure(e):o.onSuccess(t)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},function(e,t){if(e)return o.onFailure(e);i.Session=t.Session;var n={};n.USERNAME=i.username;var r={ChallengeName:"MFA_SETUP",ClientId:i.pool.getClientId(),ChallengeResponses:n,Session:i.Session};i.getUserContextData()&&(r.UserContextData=i.getUserContextData()),i.client.request("RespondToAuthChallenge",r,function(e,t){return e?o.onFailure(e):(i.signInUserSession=i.getCognitoUserSession(t.AuthenticationResult),i.cacheTokens(),o.onSuccess(i.signInUserSession))})})},e}();function Cl(){}function El(e){var r="function"==typeof Map?new Map:void 0;return(El=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return Il(e,arguments,Pl(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Al(n,e)})(e)}function Il(e,t,n){return(Il=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Al(o,n.prototype),o}).apply(null,arguments)}function Al(e,t){return(Al=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pl(e){return(Pl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Cl.prototype.userAgent="aws-amplify/0.1.x js";var kl=function(i){var e,t;function n(e,t,n,r){var o=i.call(this,e)||this;return o.code=t,o.name=n,o.statusCode=r,o}return t=i,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,n}(El(Error)),Ol=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";var r=(n||{}).credentials;this.fetchOptions=r?{credentials:r}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var o=this;return new Promise(function(n,r){o.request(e,t,function(e,t){e?r(new kl(e.message,e.code,e.name,e.statusCode)):n(t)})})},t.request=function(e,t,o){var i,n={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":Cl.prototype.userAgent},r=Object.assign({},this.fetchOptions,{headers:n,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,r).then(function(e){return i=e},function(e){if(e instanceof TypeError)throw new Error("Network error");throw e}).then(function(e){return e.json().catch(function(){return{}})}).then(function(e){if(i.ok)return o(null,e);var t=(e.__type||e.code).split("#").pop(),n={code:t,name:t,message:e.message||e.Message||null};return o(n)}).catch(function(t){if(!(i&&i.headers&&i.headers.get("x-amzn-errortype"))){if(t instanceof Error&&"Network error"===t.message){var e={code:"NetworkError",name:t.name,message:t.message};return o(e)}return o(t)}try{var n=i.headers.get("x-amzn-errortype").split(":")[0],r={code:n,name:n,statusCode:i.status,message:i.status?i.status.toString():null};return o(r)}catch(e){return o(t)}})},e}(),Tl=function(){function e(e){var t=e||{},n=t.UserPoolId,r=t.ClientId,o=t.endpoint,i=t.fetchOptions,s=t.AdvancedSecurityDataCollectionFlag;if(!n||!r)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(n))throw new Error("Invalid UserPoolId format.");var a=n.split("_")[0];this.userPoolId=n,this.clientId=r,this.client=new Ol(a,o,i),this.advancedSecurityDataCollectionFlag=!1!==s,this.storage=e.Storage||(new wl).getStorage()}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getClientId=function(){return this.clientId},t.signUp=function(o,e,t,n,i,r){var s=this,a={ClientId:this.clientId,Username:o,Password:e,UserAttributes:t,ValidationData:n,ClientMetadata:r};this.getUserContextData(o)&&(a.UserContextData=this.getUserContextData(o)),this.client.request("SignUp",a,function(e,t){if(e)return i(e,null);var n={Username:o,Pool:s,Storage:s.storage},r={user:new _l(n),userConfirmed:t.UserConfirmed,userSub:t.UserSub,codeDeliveryDetails:t.CodeDeliveryDetails};return i(null,r)})},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",t=this.storage.getItem(e);if(t){var n={Username:t,Pool:this,Storage:this.storage};return new _l(n)}return null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},e}(),xl=function(){function e(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0}var t=e.prototype;return t.setItem=function(e,t){return N.set(e,t,{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure}),N.get(e)},t.getItem=function(e){return N.get(e)},t.removeItem=function(e){return N.remove(e,{path:this.path,domain:this.domain,secure:this.secure})},t.clear=function(){for(var e=N.get(),t=0;t<e.length;++t)N.remove(e[t]);return{}},e}(),Nl=2147483647,Ul=36,Rl=1,Ml=26,Dl=38,Fl=700,Ll=72,jl=128,Bl="-",Vl=/[^\x20-\x7E]/,ql=/[\x2E\u3002\uFF0E\uFF61]/g,zl={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Hl=Ul-Rl,Kl=Math.floor,Gl=String.fromCharCode;function Wl(e){throw new RangeError(zl[e])}function $l(e,t){var n=e.split("@"),r="";return 1<n.length&&(r=n[0]+"@",e=n[1]),r+function(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}((e=e.replace(ql,".")).split("."),t).join(".")}function Yl(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function Jl(e){for(var t,n,r,o,i,s,a,u,c,l,p,d=[],h=(e=function(e){for(var t,n,r=[],o=0,i=e.length;o<i;)55296<=(t=e.charCodeAt(o++))&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}(e)).length,f=jl,m=Ll,g=t=0;g<h;++g)(u=e[g])<128&&d.push(Gl(u));for(n=r=d.length,r&&d.push(Bl);n<h;){for(o=Nl,g=0;g<h;++g)f<=(u=e[g])&&u<o&&(o=u);for(o-f>Kl((Nl-t)/(c=n+1))&&Wl("overflow"),t+=(o-f)*c,f=o,g=0;g<h;++g)if((u=e[g])<f&&++t>Nl&&Wl("overflow"),u==f){for(i=t,s=Ul;!(i<(a=s<=m?Rl:m+Ml<=s?Ml:s-m));s+=Ul)p=i-a,l=Ul-a,d.push(Gl(Yl(a+p%l,0))),i=Kl(p/l);d.push(Gl(Yl(i,0))),m=function(e,t,n){var r=0;for(e=n?Kl(e/Fl):e>>1,e+=Kl(e/t);Hl*Ml>>1<e;r+=Ul)e=Kl(e/Hl);return Kl(r+(Hl+1)*e/(e+Dl))}(t,c,n==r),t=0,++n}++t,++f}return d.join("")}function Zl(e){return null===e}function Ql(e){return"string"==typeof e}function Xl(e){return void 0===e}function ep(e){return"object"==typeof e&&null!==e}var tp=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function np(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function rp(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var op=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t};function ip(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var i=/\+/g;e=e.split(t);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=e.length;0<s&&s<a&&(a=s);for(var u,c,l=0;l<a;++l){var p,d=e[l].replace(i,"%20"),h=d.indexOf(n),f=0<=h?(p=d.substr(0,h),d.substr(h+1)):(p=d,""),m=decodeURIComponent(p),g=decodeURIComponent(f);u=o,c=m,Object.prototype.hasOwnProperty.call(u,c)?tp(o[m])?o[m].push(g):o[m]=[o[m],g]:o[m]=g}return o}function sp(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ap=/^([a-z0-9.+-]+:)/i,up=/:[0-9]*$/,cp=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,lp=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),pp=["'"].concat(lp),dp=["%","/","?",";","#"].concat(pp),hp=["/","?","#"],fp=255,mp=/^[+a-z0-9A-Z_-]{0,63}$/,gp=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,yp={javascript:!0,"javascript:":!0},vp={javascript:!0,"javascript:":!0},bp={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function wp(e,t,n){if(e&&ep(e)&&e instanceof sp)return e;var r=new sp;return r.parse(e,t,n),r}function Sp(e,t,n,r){if(!Ql(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),i=-1!==o&&o<t.indexOf("#")?"?":"#",s=t.split(i);s[0]=s[0].replace(/\\/g,"/");var a=(a=t=s.join(i)).trim();if(!r&&1===t.split("#").length){var u=cp.exec(a);if(u)return e.path=a,e.href=a,e.pathname=u[1],u[2]?(e.search=u[2],e.query=n?ip(e.search.substr(1)):e.search.substr(1)):n&&(e.search="",e.query={}),e}var c,l,p,d,h=ap.exec(a);if(h&&(c=(h=h[0]).toLowerCase(),e.protocol=c,a=a.substr(h.length)),(r||h||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(l="//"===a.substr(0,2))||h&&vp[h]||(a=a.substr(2),e.slashes=!0)),!vp[h]&&(l||h&&!bp[h])){var f,m,g=-1;for(b=0;b<hp.length;b++)-1!==(p=a.indexOf(hp[b]))&&(-1===g||p<g)&&(g=p);for(-1!==(m=-1===g?a.lastIndexOf("@"):a.lastIndexOf("@",g))&&(f=a.slice(0,m),a=a.slice(m+1),e.auth=decodeURIComponent(f)),g=-1,b=0;b<dp.length;b++)-1!==(p=a.indexOf(dp[b]))&&(-1===g||p<g)&&(g=p);-1===g&&(g=a.length),e.host=a.slice(0,g),a=a.slice(g),Cp(e),e.hostname=e.hostname||"";var y="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!y)for(var v=e.hostname.split(/\./),b=0,w=v.length;b<w;b++){var S=v[b];if(S&&!S.match(mp)){for(var _="",C=0,E=S.length;C<E;C++)127<S.charCodeAt(C)?_+="x":_+=S[C];if(!_.match(mp)){var I=v.slice(0,b),A=v.slice(b+1),P=S.match(gp);P&&(I.push(P[1]),A.unshift(P[2])),A.length&&(a="/"+A.join(".")+a),e.hostname=I.join(".");break}}}e.hostname.length>fp?e.hostname="":e.hostname=e.hostname.toLowerCase(),y||(e.hostname=$l(e.hostname,function(e){return Vl.test(e)?"xn--"+Jl(e):e})),d=e.port?":"+e.port:"";var k=e.hostname||"";e.host=k+d,e.href+=e.host,y&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!yp[c])for(b=0,w=pp.length;b<w;b++){var O,T=pp[b];-1!==a.indexOf(T)&&((O=encodeURIComponent(T))===T&&(O=escape(T)),a=a.split(T).join(O))}var x=a.indexOf("#");-1!==x&&(e.hash=a.substr(x),a=a.slice(0,x));var N,U=a.indexOf("?");return-1!==U?(e.search=a.substr(U),e.query=a.substr(U+1),n&&(e.query=ip(e.query)),a=a.slice(0,U)):n&&(e.search="",e.query={}),a&&(e.pathname=a),bp[c]&&e.hostname&&!e.pathname&&(e.pathname="/"),(e.pathname||e.search)&&(d=e.pathname||"",N=e.search||"",e.path=d+N),e.href=_p(e),e}function _p(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var n,r,o,i,s=e.protocol||"",a=e.pathname||"",u=e.hash||"",c=!1,l="";e.host?c=t+e.host:e.hostname&&(c=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(c+=":"+e.port)),e.query&&ep(e.query)&&Object.keys(e.query).length&&(n=e.query,r=r||"&",o=o||"=",null===n&&(n=void 0),l="object"==typeof n?rp(op(n),function(e){var t=encodeURIComponent(np(e))+o;return tp(n[e])?rp(n[e],function(e){return t+encodeURIComponent(np(e))}).join(r):t+encodeURIComponent(np(n[e]))}).join(r):i?encodeURIComponent(np(i))+o+encodeURIComponent(np(n)):"");var p=e.search||l&&"?"+l||"";return s&&":"!==s.substr(-1)&&(s+=":"),e.slashes||(!s||bp[s])&&!1!==c?(c="//"+(c||""),a&&"/"!==a.charAt(0)&&(a="/"+a)):c=c||"",u&&"#"!==u.charAt(0)&&(u="#"+u),p&&"?"!==p.charAt(0)&&(p="?"+p),s+c+(a=a.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(p=p.replace("#","%23"))+u}function Cp(e){var t=e.host,n=up.exec(t);n&&(":"!==(n=n[0])&&(e.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(e.hostname=t)}sp.prototype.parse=function(e,t,n){return Sp(this,e,t,n)},sp.prototype.format=function(){return _p(this)},sp.prototype.resolve=function(e){return this.resolveObject(wp(e,!1,!0)).format()},sp.prototype.resolveObject=function(e){var t;Ql(e)&&((t=new sp).parse(e,!1,!0),e=t);for(var n,r,o=new sp,i=Object.keys(this),s=0;s<i.length;s++){var a=i[s];o[a]=this[a]}if(o.hash=e.hash,""===e.href)return o.href=o.format(),o;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(o[l]=e[l])}return bp[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname="/"),o.href=o.format(),o}if(e.protocol&&e.protocol!==o.protocol){if(!bp[e.protocol]){for(var p=Object.keys(e),d=0;d<p.length;d++){var h=p[d];o[h]=e[h]}return o.href=o.format(),o}if(o.protocol=e.protocol,e.host||vp[e.protocol])o.pathname=e.pathname;else{for(S=(e.pathname||"").split("/");S.length&&!(e.host=S.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==S[0]&&S.unshift(""),S.length<2&&S.unshift(""),o.pathname=S.join("/")}return o.search=e.search,o.query=e.query,o.host=e.host||"",o.auth=e.auth,o.hostname=e.hostname||e.host,o.port=e.port,(o.pathname||o.search)&&(n=o.pathname||"",r=o.search||"",o.path=n+r),o.slashes=o.slashes||e.slashes,o.href=o.format(),o}var f,m=o.pathname&&"/"===o.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=g||m||o.host&&e.pathname,v=y,b=o.pathname&&o.pathname.split("/")||[],w=o.protocol&&!bp[o.protocol],S=e.pathname&&e.pathname.split("/")||[];if(w&&(o.hostname="",o.port=null,o.host&&(""===b[0]?b[0]=o.host:b.unshift(o.host)),o.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===S[0]?S[0]=e.host:S.unshift(e.host)),e.host=null),y=y&&(""===S[0]||""===b[0])),g)o.host=e.host||""===e.host?e.host:o.host,o.hostname=e.hostname||""===e.hostname?e.hostname:o.hostname,o.search=e.search,o.query=e.query,b=S;else if(S.length)(b=b||[]).pop(),b=b.concat(S),o.search=e.search,o.query=e.query;else if(null!=e.search)return w&&(o.hostname=o.host=b.shift(),(f=!!(o.host&&0<o.host.indexOf("@"))&&o.host.split("@"))&&(o.auth=f.shift(),o.host=o.hostname=f.shift())),o.search=e.search,o.query=e.query,Zl(o.pathname)&&Zl(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=o.format(),o;if(!b.length)return o.pathname=null,o.search?o.path="/"+o.search:o.path=null,o.href=o.format(),o;for(var _=b.slice(-1)[0],C=(o.host||e.host||1<b.length)&&("."===_||".."===_)||""===_,E=0,I=b.length;0<=I;I--)"."===(_=b[I])?b.splice(I,1):".."===_?(b.splice(I,1),E++):E&&(b.splice(I,1),E--);if(!y&&!v)for(;E--;)b.unshift("..");!y||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),C&&"/"!==b.join("/").substr(-1)&&b.push("");var A=""===b[0]||b[0]&&"/"===b[0].charAt(0);return w&&(o.hostname=o.host=!A&&b.length?b.shift():"",(f=!!(o.host&&0<o.host.indexOf("@"))&&o.host.split("@"))&&(o.auth=f.shift(),o.host=o.hostname=f.shift())),(y=y||o.host&&b.length)&&!A&&b.unshift(""),b.length?o.pathname=b.join("/"):(o.pathname=null,o.path=null),Zl(o.pathname)&&Zl(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.auth=e.auth||o.auth,o.slashes=o.slashes||e.slashes,o.href=o.format(),o},sp.prototype.parseHost=function(){return Cp(this)};function Ep(e){var t=window.open(e,"_self");return t?Promise.resolve(t):Promise.reject()}function Ip(e,t,n){x.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",Tp)}var Ap=function(){return(Ap=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Pp=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},kp=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Op=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},Tp="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",xp=new x.ConsoleLogger("OAuth"),Np=(Up.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every(function(e){return"string"==typeof e})},Up.prototype.oauthSignIn=function(e,t,n,r,o,i){void 0===e&&(e="code"),void 0===o&&(o=Ku.Cognito);var s,a=this._generateState(32),u=i?a+"-"+i:a;s=encodeURIComponent(u),window.sessionStorage.setItem("oauth_state",s);var c,l=this._generateRandom(128);c=l,window.sessionStorage.setItem("ouath_pkce_key",c);var p=this._generateChallenge(l),d=this._scopes.join(" "),h="https://"+t+"/oauth2/authorize?"+Object.entries(Ap(Ap({redirect_uri:n,response_type:e,client_id:r,identity_provider:o,scope:d,state:u},"code"===e?{code_challenge:p}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map(function(e){var t=Op(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)}).join("&");xp.debug("Redirecting to "+h),this._urlOpener(h,n)},Up.prototype._handleCodeFlow=function(f){return Pp(this,void 0,void 0,function(){var n,r,o,i,s,a,u,c,l,p,d,h;return kp(this,function(e){switch(e.label){case 0:return(n=(wp(f).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n,r=Op(t,2),o=r[0],i=r[1];return Ap(Ap({},e),((n={})[o]=i,n))},{code:void 0}).code)?(r="https://"+this._config.domain+"/oauth2/token",Ip("codeFlow",{},"Retrieving tokens from "+r),o=ic(this._config)?this._cognitoClientId:this._config.clientID,i=ic(this._config)?this._config.redirectSignIn:this._config.redirectUri,t=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),a=Ap({grant_type:"authorization_code",code:n,client_id:o,redirect_uri:i},(s=t)?{code_verifier:s}:{}),xp.debug("Calling token endpoint: "+r+" with",a),u=Object.entries(a).map(function(e){var t=Op(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)}).join("&"),[4,fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})]):[2];case 1:return[4,e.sent().json()];case 2:if(c=e.sent(),l=c.access_token,p=c.refresh_token,d=c.id_token,h=c.error)throw new Error(h);return[2,{accessToken:l,refreshToken:p,idToken:d}]}var t})})},Up.prototype._handleImplicitFlow=function(o){return Pp(this,void 0,void 0,function(){var t,n,r;return kp(this,function(e){return t=wp(o).hash.substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n,r=Op(t,2),o=r[0],i=r[1];return Ap(Ap({},e),((n={})[o]=i,n))},{id_token:void 0,access_token:void 0}),n=t.id_token,r=t.access_token,Ip("implicitFlow",{},"Got tokens from "+o),xp.debug("Retrieving implicit tokens from "+o+" with"),[2,{accessToken:r,idToken:n,refreshToken:null}]})})},Up.prototype.handleAuthResponse=function(u){return Pp(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return kp(this,function(e){switch(e.label){case 0:if(e.trys.push([0,5,,6]),t=u?Ap(Ap({},(wp(u).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Op(t,2),r=n[0],o=n[1];return e[r]=o,e},{})),(wp(u).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Op(t,2),r=n[0],o=n[1];return e[r]=o,e},{})):{},n=t.error,r=t.error_description,n)throw new Error(r);return o=this._validateState(t),xp.debug("Starting "+this._config.responseType+" flow with "+u),"code"!==this._config.responseType?[3,2]:(i=[{}],[4,this._handleCodeFlow(u)]);case 1:return[2,Ap.apply(void 0,[Ap.apply(void 0,i.concat([e.sent()])),{state:o}])];case 2:return s=[{}],[4,this._handleImplicitFlow(u)];case 3:return[2,Ap.apply(void 0,[Ap.apply(void 0,s.concat([e.sent()])),{state:o}])];case 4:return[3,6];case 5:throw a=e.sent(),xp.error("Error handling auth response.",a),a;case 6:return[2]}})})},Up.prototype._validateState=function(e){if(e){var t,n=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),r=e.state;if(n&&n!==r)throw new Error("Invalid state in OAuth flow");return r}},Up.prototype.signOut=function(){return Pp(this,void 0,void 0,function(){var t,n,r;return kp(this,function(e){return t="https://"+this._config.domain+"/logout?",n=ic(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=ic(this._config)?this._config.redirectSignOut:this._config.returnTo,t+=Object.entries({client_id:n,logout_uri:encodeURIComponent(r)}).map(function(e){var t=Op(e,2);return t[0]+"="+t[1]}).join("&"),Ip("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+t),xp.debug("Signing out from "+t),[2,this._urlOpener(t)]})})},Up.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";0<n;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},Up.prototype._generateChallenge=function(e){return this._base64URL(k(e))},Up.prototype._base64URL=function(e){return e.toString(T).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},Up.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},Up.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var o=e[r]%t.length;n.push(t[o])}return n.join("")},Up);function Up(e){var t=e.config,n=e.cognitoClientId,r=e.scopes,o=void 0===r?[]:r;if(this._urlOpener=t.urlOpener||Ep,this._config=t,this._cognitoClientId=n,!this.isValidScopes(o))throw Error("scopes must be a String Array");this._scopes=o}var Rp,Mp,Dp=(Rp=function(e,t){return(Rp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Rp(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Fp=new x.ConsoleLogger("AuthError"),Lp="Authentication Error",jp=(Mp=Error,Dp(Bp,Mp),Bp);function Bp(e){var t=this,n=Kp[e],r=n.message,o=n.log;return(t=Mp.call(this,r)||this).constructor=Bp,Object.setPrototypeOf(t,Bp.prototype),t.name="AuthError",t.log=o||r,Fp.error(t.log),t}var Vp,qp=(Dp(zp,Vp=jp),zp);function zp(e){var t=Vp.call(this,e)||this;return t.constructor=zp,Object.setPrototypeOf(t,zp.prototype),t.name="NoUserPoolError",t}function Hp(e,t,n){x.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",Zp)}var Kp={noConfig:{message:Lp,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of aws-amplify or amplify packages in your node_modules.\n                Try deleting your node_modules folder and reinstalling the dependencies with `yarn install`\n        "},missingAuthConfig:{message:Lp,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties. \n            Did you run `amplify push` after adding auth via `amplify add auth`?\n            See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n        "},emptyUsername:{message:"Username cannot be empty"},invalidUsername:{message:"The username should either be a string or one of the sign in types"},emptyPassword:{message:"Password cannot be empty"},emptyCode:{message:"Confirmation code cannot be empty"},signUpError:{message:"Error creating account",log:"The first parameter should either be non-null string or object"},noMFA:{message:"No valid MFA method provided"},invalidMFA:{message:"Invalid MFA type"},emptyChallengeResponse:{message:"Challenge response cannot be empty"},noUserSession:{message:"Failed to get the session because the user is empty"},default:{message:Lp}},Gp=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},Wp=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},$p=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},Yp=new x.ConsoleLogger("AuthClass"),Jp="aws.cognito.signin.user.admin",Zp="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";function Qp(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.configure(e),this.currentUserCredentials=this.currentUserCredentials.bind(this),x.Hub.listen("auth",function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}}),x.Amplify.register(this)}var Xp,ed=new(Qp.prototype.getModuleName=function(){return"Auth"},Qp.prototype.configure=function(e){var n=this;if(!e)return this._config||{};Yp.debug("configure Auth");var t=Object.assign({},this._config,x.Parser.parseMobilehubConfig(e).Auth,e);this._config=t;var r,o=this._config,i=o.userPoolId,s=o.userPoolWebClientId,a=o.cookieStorage,u=o.oauth,c=o.region,l=o.identityPoolId,p=o.mandatorySignIn,d=o.refreshHandlers,h=o.identityPoolRegion,f=o.clientMetadata;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw Yp.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=a?new xl(a):(new x.StorageHelper).getStorage();this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i&&((r={UserPoolId:i,ClientId:s}).Storage=this._storage,this.userPool=new Tl(r)),x.Credentials.configure({mandatorySignIn:p,region:h||c,userPoolId:i,identityPoolId:l,refreshHandlers:d,storage:this._storage});var m,g,y=u?ic(this._config.oauth)?u:u.awsCognito:void 0;return y&&(m=Object.assign({cognitoClientId:s,UserPoolId:i,domain:y.domain,scopes:y.scope,redirectSignIn:y.redirectSignIn,redirectSignOut:y.redirectSignOut,responseType:y.responseType,Storage:this._storage,urlOpener:y.urlOpener,clientMetadata:f},y.options),this._oAuthHandler=new Np({scopes:m.scopes,config:m,cognitoClientId:m.cognitoClientId}),g={},function(e){if(x.JS.browserOrNode().isBrowser&&window.location)e({url:window.location.href});else if(!x.JS.browserOrNode().isNode)throw new Error("Not supported")}(function(e){var t=e.url;g[t]||(g[t]=!0,n._handleAuthResponse(t))})),Hp("configured",null,"The Auth category has been configured successfully"),this._config},Qp.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var o,i=null,s=null,a=[],u=null;if(e&&"string"==typeof e){i=e,s=n?n[0]:null;var c=n?n[1]:null,l=n?n[2]:null;c&&a.push({Name:"email",Value:c}),l&&a.push({Name:"phone_number",Value:l})}else{if(!e||"object"!=typeof e)return this.rejectAuthError(Wu.SignUpError);i=e.username,s=e.password,e&&e.clientMetadata?o=e.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata);var p=e.attributes;p&&Object.keys(p).map(function(e){var t={Name:e,Value:p[e]};a.push(t)}),u=e.validationData||null}return i?s?(Yp.debug("signUp attrs:",a),Yp.debug("signUp validation data:",u),new Promise(function(n,r){t.userPool.signUp(i,s,a,u,function(e,t){e?(Hp("signUp_failure",e,i+" failed to signup"),r(e)):(Hp("signUp",t,i+" has signed up successfully"),n(t))},o)})):this.rejectAuthError(Wu.EmptyPassword):this.rejectAuthError(Wu.EmptyUsername)},Qp.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(Wu.EmptyUsername);if(!t)return this.rejectAuthError(Wu.EmptyCode);var o,i=this.createCognitoUser(e),s=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?o=n.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata),new Promise(function(n,r){i.confirmRegistration(t,s,function(e,t){e?r(e):n(t)},o)})},Qp.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(Wu.EmptyUsername);var o=this.createCognitoUser(e);return new Promise(function(n,r){o.resendConfirmationCode(function(e,t){e?r(e):n(t)},t)})},Qp.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,o=null,i={};if("string"==typeof e)r=e,o=t;else{if(!e.username)return this.rejectAuthError(Wu.InvalidUsername);void 0!==t&&Yp.warn("The password should be defined under the first parameter object!"),r=e.username,o=e.password,i=e.validationData}if(!r)return this.rejectAuthError(Wu.EmptyUsername);var s=new sc({Username:r,Password:o,ValidationData:i,ClientMetadata:n});return o?this.signInWithPassword(s):this.signInWithoutPassword(s)},Qp.prototype.authCallbacks=function(s,a,u){var e=this,c=this;return{onSuccess:function(i){return Gp(e,void 0,void 0,function(){var t,n,r,o;return Wp(this,function(e){switch(e.label){case 0:Yp.debug(i),delete s.challengeName,delete s.challengeParam,e.label=1;case 1:return e.trys.push([1,4,5,9]),[4,x.Credentials.clear()];case 2:return e.sent(),[4,x.Credentials.set(i,"session")];case 3:return t=e.sent(),Yp.debug("succeed to get cognito credentials",t),[3,9];case 4:return n=e.sent(),Yp.debug("cannot get cognito credentials",n),[3,9];case 5:return e.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return r=e.sent(),c.user=r,Hp("signIn",r,"A user "+s.getUsername()+" has been signed in"),a(r),[3,8];case 7:return o=e.sent(),Yp.error("Failed to get the signed in user",o),u(o),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(e){Yp.debug("signIn failure",e),Hp("signIn_failure",e,s.getUsername()+" failed to signin"),u(e)},customChallenge:function(e){Yp.debug("signIn custom challenge answer required"),s.challengeName="CUSTOM_CHALLENGE",s.challengeParam=e,a(s)},mfaRequired:function(e,t){Yp.debug("signIn MFA required"),s.challengeName=e,s.challengeParam=t,a(s)},mfaSetup:function(e,t){Yp.debug("signIn mfa setup",e),s.challengeName=e,s.challengeParam=t,a(s)},newPasswordRequired:function(e,t){Yp.debug("signIn new password"),s.challengeName="NEW_PASSWORD_REQUIRED",s.challengeParam={userAttributes:e,requiredAttributes:t},a(s)},totpRequired:function(e,t){Yp.debug("signIn totpRequired"),s.challengeName=e,s.challengeParam=t,a(s)},selectMFAType:function(e,t){Yp.debug("signIn selectMFAType",e),s.challengeName=e,s.challengeParam=t,a(s)}}},Qp.prototype.signInWithPassword=function(n){var r=this,o=this.createCognitoUser(n.getUsername());return new Promise(function(e,t){o.authenticateUser(n,r.authCallbacks(o,e,t))})},Qp.prototype.signInWithoutPassword=function(n){var r=this,o=this.createCognitoUser(n.getUsername());return o.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(e,t){o.initiateAuth(n,r.authCallbacks(o,e,t))})},Qp.prototype.getMFAOptions=function(e){return new Promise(function(n,r){e.getMFAOptions(function(e,t){return e?(Yp.debug("get MFA Options failed",e),void r(e)):(Yp.debug("get MFA options success",t),void n(t))})})},Qp.prototype.getPreferredMFA=function(t,n){var i=this;return new Promise(function(r,o){var e=!!n&&n.bypassCache;t.getUserData(function(e,t){if(e)return Yp.debug("getting preferred mfa failed",e),void o(e);var n=i._getMfaTypeFromUserData(t);return n?void r(n):void o("invalid MFA Type")},{bypassCache:e})})},Qp.prototype._getMfaTypeFromUserData=function(e){var t,n=null,r=e.PreferredMfaSetting;return r?n=r:(t=e.UserMFASettingList)?0===t.length?n="NOMFA":Yp.debug("invalid case for getPreferredMFA",e):n=e.MFAOptions?"SMS_MFA":"NOMFA",n},Qp.prototype._getUserData=function(e,t){return new Promise(function(n,r){e.getUserData(function(e,t){return e?(Yp.debug("getting user data failed",e),void r(e)):void n(t)},t)})},Qp.prototype.setPreferredMFA=function(s,a){return Gp(this,void 0,void 0,function(){var t,n,i,r,o;return Wp(this,function(e){switch(e.label){case 0:return[4,this._getUserData(s,{bypassCache:!0})];case 1:switch(t=e.sent(),i=n=null,a){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return n={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return r=t.UserMFASettingList,[4,this._getMfaTypeFromUserData(t)];case 5:if("NOMFA"===(o=e.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===o)n={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==o)return[2,this.rejectAuthError(Wu.InvalidMFA)];i={PreferredMfa:!1,Enabled:!1}}return r&&0!==r.length&&r.forEach(function(e){"SMS_MFA"===e?n={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(i={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return Yp.debug("no validmfa method provided"),[2,this.rejectAuthError(Wu.NoMFA)];case 7:return[2,new Promise(function(r,o){s.setUserMfaPreference(n,i,function(e,n){return e?(Yp.debug("Set user mfa preference error",e),o(e)):(Yp.debug("Set user mfa success",n),Yp.debug("Caching the latest user data into local"),void s.getUserData(function(e,t){return e?(Yp.debug("getting user data failed",e),o(e)):r(n)},{bypassCache:!0}))})})]}})})},Qp.prototype.disableSMS=function(e){return new Promise(function(n,r){e.disableMFA(function(e,t){return e?(Yp.debug("disable mfa failed",e),void r(e)):(Yp.debug("disable mfa succeed",t),void n(t))})})},Qp.prototype.enableSMS=function(e){return new Promise(function(n,r){e.enableMFA(function(e,t){return e?(Yp.debug("enable mfa failed",e),void r(e)):(Yp.debug("enable mfa succeed",t),void n(t))})})},Qp.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(e){Yp.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){Yp.debug("associateSoftwareToken sucess",e),t(e)}})})},Qp.prototype.verifyTotpToken=function(e,r){return Yp.debug("verfication totp token",e,r),new Promise(function(t,n){e.verifySoftwareToken(r,"My TOTP device",{onFailure:function(e){Yp.debug("verifyTotpToken failed",e),n(e)},onSuccess:function(e){Yp.debug("verifyTotpToken success",e),t(e)}})})},Qp.prototype.confirmSignIn=function(i,e,n,r){var s=this;if(void 0===r&&(r=this._config.clientMetadata),!e)return this.rejectAuthError(Wu.EmptyCode);var a=this;return new Promise(function(o,t){i.sendMFACode(e,{onSuccess:function(r){return Gp(s,void 0,void 0,function(){var t,n;return Wp(this,function(e){switch(e.label){case 0:Yp.debug(r),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,x.Credentials.clear()];case 2:return e.sent(),[4,x.Credentials.set(r,"session")];case 3:return t=e.sent(),Yp.debug("succeed to get cognito credentials",t),[3,6];case 4:return n=e.sent(),Yp.debug("cannot get cognito credentials",n),[3,6];case 5:return a.user=i,Hp("signIn",i,i+" has signed in"),o(i),[7];case 6:return[2]}})})},onFailure:function(e){Yp.debug("confirm signIn failure",e),t(e)}},n,r)})},Qp.prototype.completeNewPassword=function(i,e,n,r){var s=this;if(void 0===r&&(r=this._config.clientMetadata),!e)return this.rejectAuthError(Wu.EmptyPassword);var a=this;return new Promise(function(o,t){i.completeNewPasswordChallenge(e,n,{onSuccess:function(r){return Gp(s,void 0,void 0,function(){var t,n;return Wp(this,function(e){switch(e.label){case 0:Yp.debug(r),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,x.Credentials.clear()];case 2:return e.sent(),[4,x.Credentials.set(r,"session")];case 3:return t=e.sent(),Yp.debug("succeed to get cognito credentials",t),[3,6];case 4:return n=e.sent(),Yp.debug("cannot get cognito credentials",n),[3,6];case 5:return a.user=i,Hp("signIn",i,i+" has signed in"),o(i),[7];case 6:return[2]}})})},onFailure:function(e){Yp.debug("completeNewPassword failure",e),Hp("completeNewPassword_failure",e,s.user+" failed to complete the new password flow"),t(e)},mfaRequired:function(e,t){Yp.debug("signIn MFA required"),i.challengeName=e,i.challengeParam=t,o(i)},mfaSetup:function(e,t){Yp.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,o(i)}},r)})},Qp.prototype.sendCustomChallengeAnswer=function(n,r,o){var i=this;return void 0===o&&(o=this._config.clientMetadata),this.userPool?r?new Promise(function(e,t){n.sendCustomChallengeAnswer(r,i.authCallbacks(n,e,t),o)}):this.rejectAuthError(Wu.EmptyChallengeResponse):this.rejectNoUserPool()},Qp.prototype.updateUserAttributes=function(i,s,a){void 0===a&&(a=this._config.clientMetadata);var u=[],e=this;return new Promise(function(r,o){e.userSession(i).then(function(e){for(var t in s){var n;"sub"!==t&&t.indexOf("_verified")<0&&(n={Name:t,Value:s[t]},u.push(n))}i.updateAttributes(u,function(e,t){return e?o(e):r(t)},a)})})},Qp.prototype.userAttributes=function(t){var e=this;return new Promise(function(n,r){e.userSession(t).then(function(e){t.getUserAttributes(function(e,t){e?r(e):n(t)})})})},Qp.prototype.verifiedContact=function(e){var o=this;return this.userAttributes(e).then(function(e){var t=o.attributesToObject(e),n={},r={};return t.email&&(t.email_verified?r.email=t.email:n.email=t.email),t.phone_number&&(t.phone_number_verified?r.phone_number=t.phone_number:n.phone_number=t.phone_number),{verified:r,unverified:n}})},Qp.prototype.currentUserPoolUser=function(o){var e=this;return this.userPool?new Promise(function(l,p){e._storageSync.then(function(){return Gp(e,void 0,void 0,function(){var u,c=this;return Wp(this,function(e){switch(e.label){case 0:return this.isOAuthInProgress()?(Yp.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(n){var r=setTimeout(function(){Yp.debug("OAuth signIn in progress timeout"),x.Hub.remove("auth",o),n()},1e4);function o(e){var t=e.payload.event;"cognitoHostedUI"!==t&&"cognitoHostedUI_failure"!==t||(Yp.debug("OAuth signIn resolved: "+t),clearTimeout(r),x.Hub.remove("auth",o),n())}x.Hub.listen("auth",o)})]):[3,2];case 1:e.sent(),e.label=2;case 2:return(u=this.userPool.getCurrentUser())?u.getSession(function(e,t){if(e)return Yp.debug("Failed to get the user session",e),void p(e);var n=!!o&&o.bypassCache,r=t.getAccessToken().decodePayload().scope;if(!(void 0===r?"":r).split(" ").includes(Jp))return Yp.debug("Unable to get the user data because the "+Jp+" is not in the scopes of the access token"),l(u);u.getUserData(function(e,t){if(e)return Yp.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?p(e):l(u));for(var n=t.PreferredMfaSetting||"NOMFA",r=[],o=0;o<t.UserAttributes.length;o++){var i={Name:t.UserAttributes[o].Name,Value:t.UserAttributes[o].Value},s=new yl(i);r.push(s)}var a=c.attributesToObject(r);return Object.assign(u,{attributes:a,preferredMFA:n}),l(u)},{bypassCache:n})}):(Yp.debug("Failed to get user from user pool"),p("No current user")),[2]}})})}).catch(function(e){return Yp.debug("Failed to sync cache info into memory",e),p(e)})}):this.rejectNoUserPool()},Qp.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},Qp.prototype.currentAuthenticatedUser=function(i){return Gp(this,void 0,void 0,function(){var t,n,r,o;return Wp(this,function(e){switch(e.label){case 0:Yp.debug("getting current authenticated user"),t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw n=e.sent(),Yp.debug("Failed to sync cache info into memory",n),n;case 4:try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user}catch(e){Yp.debug("cannot load federated user from auth storage")}return t?(this.user=t,Yp.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:Yp.debug("get current authenticated userpool user"),r=null,e.label=6;case 6:return e.trys.push([6,8,,9]),[4,this.currentUserPoolUser(i)];case 7:return r=e.sent(),[3,9];case 8:throw"No userPool"===(o=e.sent())&&Yp.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),Yp.debug("The user is not authenticated by the error",o),"not authenticated";case 9:return this.user=r,[2,this.user]}})})},Qp.prototype.currentSession=function(){var r=this;return Yp.debug("Getting current session"),this.userPool?new Promise(function(t,n){r.currentUserPoolUser().then(function(e){r.userSession(e).then(function(e){t(e)}).catch(function(e){Yp.debug("Failed to get the current session",e),n(e)})}).catch(function(e){Yp.debug("Failed to get the current user",e),n(e)})}):Promise.reject()},Qp.prototype.userSession=function(o){return o?new Promise(function(n,r){Yp.debug("Getting the session from this user:",o),o.getSession(function(e,t){return e?(Yp.debug("Failed to get the session from user",o),void r(e)):(Yp.debug("Succeed to get the user session",t),void n(t))})}):(Yp.debug("the user is null"),this.rejectAuthError(Wu.NoUserSession))},Qp.prototype.currentUserCredentials=function(){return Gp(this,void 0,void 0,function(){var t,n;return Wp(this,function(e){switch(e.label){case 0:Yp.debug("Getting current user credentials"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw t=e.sent(),Yp.debug("Failed to sync cache info into memory",t),t;case 4:n=null;try{n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){Yp.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return n?[2,x.Credentials.refreshFederatedToken(n)]:[2,this.currentSession().then(function(e){return Yp.debug("getting session success",e),x.Credentials.set(e,"session")}).catch(function(e){return Yp.debug("getting session failed",e),x.Credentials.set(null,"guest")})]}})})},Qp.prototype.currentCredentials=function(){return Yp.debug("getting current credentials"),x.Credentials.get()},Qp.prototype.verifyUserAttribute=function(n,r,o){return void 0===o&&(o=this._config.clientMetadata),new Promise(function(e,t){n.getAttributeVerificationCode(r,{onSuccess:function(){return e()},onFailure:function(e){return t(e)},clientMetadata:o})})},Qp.prototype.verifyUserAttributeSubmit=function(e,r,o){return o?new Promise(function(t,n){e.verifyAttribute(r,o,{onSuccess:function(e){t(e)},onFailure:function(e){n(e)}})}):this.rejectAuthError(Wu.EmptyCode)},Qp.prototype.verifyCurrentUserAttribute=function(t){var n=this;return n.currentUserPoolUser().then(function(e){return n.verifyUserAttribute(e,t)})},Qp.prototype.verifyCurrentUserAttributeSubmit=function(t,n){var r=this;return r.currentUserPoolUser().then(function(e){return r.verifyUserAttributeSubmit(e,t,n)})},Qp.prototype.cognitoIdentitySignOut=function(s,a){return Gp(this,void 0,void 0,function(){var t,o,i=this;return Wp(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._storageSync];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),Yp.debug("Failed to sync cache info into memory",t),t;case 3:return o=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(n,r){if(!s||!s.global)return Yp.debug("user sign out",a),a.signOut(),o?n(i._oAuthHandler.signOut()):n();Yp.debug("user global sign out",a),a.getSession(function(e,t){return e?(Yp.debug("failed to get the user session",e),r(e)):void a.globalSignOut({onSuccess:function(e){return Yp.debug("global sign out success"),o?n(i._oAuthHandler.signOut()):n()},onFailure:function(e){return Yp.debug("global sign out failed",e),r(e)}})})})]}})})},Qp.prototype.signOut=function(n){return Gp(this,void 0,void 0,function(){var t;return Wp(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return e.sent(),[3,3];case 2:return e.sent(),Yp.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(n,t)]:[3,5]:[3,7];case 4:return e.sent(),[3,6];case 5:Yp.debug("no current Cognito user"),e.label=6;case 6:return[3,8];case 7:Yp.debug("no Congito User pool"),e.label=8;case 8:return Hp("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},Qp.prototype.cleanCachedItems=function(){return Gp(this,void 0,void 0,function(){return Wp(this,function(e){switch(e.label){case 0:return[4,x.Credentials.clear()];case 1:return e.sent(),[2]}})})},Qp.prototype.changePassword=function(t,o,i,s){var e=this;return void 0===s&&(s=this._config.clientMetadata),new Promise(function(n,r){e.userSession(t).then(function(e){t.changePassword(o,i,function(e,t){return e?(Yp.debug("change password failure",e),r(e)):n(t)},s)})})},Qp.prototype.forgotPassword=function(r,e){if(void 0===e&&(e=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!r)return this.rejectAuthError(Wu.EmptyUsername);var o=this.createCognitoUser(r);return new Promise(function(t,n){o.forgotPassword({onSuccess:function(){t()},onFailure:function(e){Yp.debug("forgot password failure",e),Hp("forgotPassword_failure",e,r+" forgotPassword failed"),n(e)},inputVerificationCode:function(e){Hp("forgotPassword",o,r+" has initiated forgot password flow"),t(e)}},e)})},Qp.prototype.forgotPasswordSubmit=function(n,r,o,i){if(void 0===i&&(i=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(Wu.EmptyUsername);if(!r)return this.rejectAuthError(Wu.EmptyCode);if(!o)return this.rejectAuthError(Wu.EmptyPassword);var s=this.createCognitoUser(n);return new Promise(function(e,t){s.confirmPassword(r,o,{onSuccess:function(){Hp("forgotPasswordSubmit",s,n+" forgotPasswordSubmit successful"),e()},onFailure:function(e){Hp("forgotPasswordSubmit_failure",e,n+" forgotPasswordSubmit failed"),t(e)}},i)})},Qp.prototype.currentUserInfo=function(){return Gp(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return Wp(this,function(e){switch(e.label){case 0:return(t=x.Credentials.getCredSource())&&"aws"!==t&&"userPool"!==t?[3,9]:[4,this.currentUserPoolUser().catch(function(e){return Yp.debug(e)})];case 1:if(!(a=e.sent()))return[2,null];e.label=2;case 2:return e.trys.push([2,8,,9]),[4,this.userAttributes(a)];case 3:n=e.sent(),r=this.attributesToObject(n),o=null,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return o=e.sent(),[3,7];case 6:return i=e.sent(),Yp.debug("Failed to retrieve credentials while getting current user info",i),[3,7];case 7:return[2,{id:o?o.identityId:void 0,username:a.getUsername(),attributes:r}];case 8:return s=e.sent(),Yp.debug("currentUserInfo error",s),[2,{}];case 9:return"federated"===t?[2,(a=this.user)||{}]:[2]}})})},Qp.prototype.federatedSignIn=function(h,f,m){return Gp(this,void 0,void 0,function(){var n,r,o,i,s,a,u,c,l,p,d;return Wp(this,function(e){switch(e.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===h&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return oc(h)||(t=h)&&["customProvider","customState"].find(function(e){return t.hasOwnProperty(e)})||void 0===h?(n=h||{provider:Ku.Cognito},s=oc(n)?n.provider:n.customProvider,oc(n),r=n.customState,this._config.userPoolId&&(o=ic(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,i=ic(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,i,o,s,r)),[3,4]):[3,1];case 1:s=h;try{(a=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&Yp.warn("There is already a signed in user: "+a+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return u=f.token,c=f.identity_id,l=f.expires_at,[4,x.Credentials.set({provider:s,token:u,identity_id:c,user:m,expires_at:l},"federation")];case 2:return p=e.sent(),[4,this.currentAuthenticatedUser()];case 3:return d=e.sent(),Hp("signIn",d,"A user "+d.username+" has been signed in"),Yp.debug("federated sign in credentials",p),[2,p];case 4:return[2]}var t})})},Qp.prototype._handleAuthResponse=function(m){return Gp(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f;return Wp(this,function(e){switch(e.label){case 0:if(this.oAuthFlowInProgress)return Yp.debug("Skipping URL "+m+" current flow in progress"),[2];e.label=1;case 1:if(e.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(Hp("parsingCallbackUrl",{url:m},"The callback url is being parsed"),t=m||(x.JS.browserOrNode().isBrowser?window.location.href:""),n=!!(wp(t).query||"").split("&").map(function(e){return e.split("=")}).find(function(e){var t=$p(e,1)[0];return"code"===t||"error"===t}),r=!!(wp(t).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).find(function(e){var t=$p(e,1)[0];return"access_token"===t||"error"===t}),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),e.label=2;case 2:return e.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return o=e.sent(),i=o.accessToken,s=o.idToken,a=o.refreshToken,u=o.state,c=new hl({IdToken:new pl({IdToken:s}),RefreshToken:new dl({RefreshToken:a}),AccessToken:new ll({AccessToken:i})}),l=void 0,this._config.identityPoolId?[4,x.Credentials.set(c,"session")]:[3,5];case 4:l=e.sent(),Yp.debug("AWS credentials",l),e.label=5;case 5:return p=/-/.test(u),(d=this.createCognitoUser(c.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(c),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Hp("signIn",d,"A user "+d.getUsername()+" has been signed in"),Hp("cognitoHostedUI",d,"A user "+d.getUsername()+" has been signed in via Cognito Hosted UI"),p&&(h=u.split("-").splice(1).join("-"),Hp("customOAuthState",h,"State for user "+d.getUsername())),[2,l];case 6:return f=e.sent(),Yp.debug("Error in cognito hosted auth response",f),Hp("signIn_failure",f,"The OAuth response flow failed"),Hp("cognitoHostedUI_failure",f,"A failure occurred when returning to the Cognito Hosted UI"),Hp("customState_failure",f,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},Qp.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},Qp.prototype.attributesToObject=function(e){var t={};return e&&e.map(function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?t[e.Name]="true"===e.Value||!0===e.Value:t[e.Name]=e.Value}),t},Qp.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var n=this._config.authenticationFlowType,r=new _l(t);return n&&r.setAuthenticationFlowType(n),r},Qp.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},Qp.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?Wu.NoConfig:Wu.MissingAuthConfig},Qp.prototype.rejectAuthError=function(e){return Promise.reject(new jp(e))},Qp.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new qp(e))},Qp)(null),td="s3.{region}.amazonaws.com",nd=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),rd=new Set(["cn-north-1","cn-northwest-1"]),od=new Set(["us-iso-east-1"]),id=new Set(["us-isob-east-1"]),sd=new Set(["us-gov-west-1","us-gov-east-1"]),ad=ee(ee({},{apiVersion:"2006-03-01",disableHostPrefix:!1,regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips-us-gov-west-1.amazonaws.com",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com"};break;case"us-east-1":n={hostname:"s3.amazonaws.com"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com"};break;default:nd.has(e)&&(n={hostname:td.replace("{region}",e)}),rd.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e)}),od.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e)}),id.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e)}),sd.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:td.replace("{region}",e)})}return Promise.resolve(n)},signingEscapePath:!1,signingName:"s3"}),{runtime:"node",base64Decoder:a.fromBase64,base64Encoder:a.toBase64,bodyLengthChecker:u.calculateBodyLength,credentialDefaultProvider:n.defaultProvider,defaultUserAgent:c.defaultUserAgent("@aws-sdk/client-s3","1.0.0-gamma.2"),eventStreamSerdeProvider:C.eventStreamSerdeProvider,md5:r.Hash.bind(null,"md5"),regionDefaultProvider:i.defaultProvider,requestHandler:new o.NodeHttpHandler,sha256:r.Hash.bind(null,"sha256"),streamCollector:o.streamCollector,streamHasher:U.fileStreamHasher,urlParser:s.parseUrl,utf8Decoder:l.fromUtf8,utf8Encoder:l.toUtf8}),ud=(X(cd,Xp=b.Client),cd.prototype.destroy=function(){Xp.prototype.destroy.call(this)},cd);function cd(e){var t=this,n=ee(ee({},ad),e),r=p.resolveRegionConfig(n),o=p.resolveEndpointsConfig(r),i=g.resolveAwsAuthConfig(o),s=m.resolveRetryConfig(i),a=v.resolveUserAgentConfig(s),u=R.resolveBucketEndpointConfig(a),c=f.resolveHostHeaderConfig(u),l=E.resolveEventStreamSerdeConfig(c);return(t=Xp.call(this,l)||this).config=l,t.middlewareStack.use(g.getAwsAuthPlugin(t.config)),t.middlewareStack.use(m.getRetryPlugin(t.config)),t.middlewareStack.use(v.getUserAgentPlugin(t.config)),t.middlewareStack.use(d.getContentLengthPlugin(t.config)),t.middlewareStack.use(D.getValidateBucketNamePlugin(t.config)),t.middlewareStack.use(M.getAddExpectContinuePlugin(t.config)),t.middlewareStack.use(f.getHostHeaderPlugin(t.config)),t}var ld,pd=function(c,l){return oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u;return ie(this,function(e){switch(e.label){case 0:return n=[ee({},c)],r={},[4,Ud(c.body,l)];case 1:switch(t=ee.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Rd(c,t.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return s=[{}],[4,_d(t)];case 3:return o=ee.apply(void 0,[ee.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:Td(c)}]),[3,5];case 4:a=t.body,i=a.code||a.Code||i,o=ee(ee({},a),{name:""+i,message:a.message||a.Message||i,$fault:"client",$metadata:Td(c)}),e.label=5;case 5:return u=o.message||o.Message||i,o.message=u,delete o.Message,[2,Promise.reject(Object.assign(new Error(u),o))]}})})},dd=function(u,c){return oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return ie(this,function(e){switch(e.label){case 0:return n=[ee({},u)],r={},[4,Ud(u.body,c)];case 1:return t=ee.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Rd(u,t.body),s=t.body,i=s.code||s.Code||i,o=ee(ee({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:Td(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})},hd=function(u,c){return oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return ie(this,function(e){switch(e.label){case 0:return n=[ee({},u)],r={},[4,Ud(u.body,c)];case 1:return t=ee.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Rd(u,t.body),s=t.body,i=s.code||s.Code||i,o=ee(ee({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:Td(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})},fd=function(u,c){return oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return ie(this,function(e){switch(e.label){case 0:return n=[ee({},u)],r={},[4,Ud(u.body,c)];case 1:return t=ee.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Rd(u,t.body),s=t.body,i=s.code||s.Code||i,o=ee(ee({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:Td(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})},md=function(c,l){return oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u;return ie(this,function(e){switch(e.label){case 0:return n=[ee({},c)],r={},[4,Ud(c.body,l)];case 1:switch(t=ee.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Rd(c,t.body)){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return s=[{}],[4,Sd(t)];case 3:return o=ee.apply(void 0,[ee.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:Td(c)}]),[3,5];case 4:a=t.body,i=a.code||a.Code||i,o=ee(ee({},a),{name:""+i,message:a.message||a.Message||i,$fault:"client",$metadata:Td(c)}),e.label=5;case 5:return u=o.message||o.Message||i,o.message=u,delete o.Message,[2,Promise.reject(Object.assign(new Error(u),o))]}})})},gd=function(c,l){return oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u;return ie(this,function(e){switch(e.label){case 0:return n=[ee({},c)],r={},[4,Ud(c.body,l)];case 1:switch(t=ee.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Rd(c,t.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return s=[{}],[4,wd(t)];case 3:return o=ee.apply(void 0,[ee.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:Td(c)}]),[3,5];case 4:a=t.body,i=a.code||a.Code||i,o=ee(ee({},a),{name:""+i,message:a.message||a.Message||i,$fault:"client",$metadata:Td(c)}),e.label=5;case 5:return u=o.message||o.Message||i,o.message=u,delete o.Message,[2,Promise.reject(Object.assign(new Error(u),o))]}})})},yd=function(u,c){return oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return ie(this,function(e){switch(e.label){case 0:return n=[ee({},u)],r={},[4,Ud(u.body,c)];case 1:return t=ee.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Rd(u,t.body),s=t.body,i=s.code||s.Code||i,o=ee(ee({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:Td(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})},vd=function(u,c){return oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return ie(this,function(e){switch(e.label){case 0:return n=[ee({},u)],r={},[4,Ud(u.body,c)];case 1:return t=ee.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Rd(u,t.body),s=t.body,i=s.code||s.Code||i,o=ee(ee({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:Td(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})},bd=function(u,c){return oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a;return ie(this,function(e){switch(e.label){case 0:return n=[ee({},u)],r={},[4,Ud(u.body,c)];case 1:return t=ee.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Rd(u,t.body),s=t.body,i=s.code||s.Code||i,o=ee(ee({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:Td(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})},wd=function(n,e){return oe(void 0,void 0,void 0,function(){var t;return ie(this,function(e){return t={name:"NoSuchBucket",$fault:"client",$metadata:Td(n)},n.body,[2,t]})})},Sd=function(n,e){return oe(void 0,void 0,void 0,function(){var t;return ie(this,function(e){return t={name:"NoSuchKey",$fault:"client",$metadata:Td(n)},n.body,[2,t]})})},_d=function(n,e){return oe(void 0,void 0,void 0,function(){var t;return ie(this,function(e){return t={name:"NoSuchUpload",$fault:"client",$metadata:Td(n)},n.body,[2,t]})})},Cd=function(e,t){var n=new F.XmlNode("CompletedMultipartUpload");return void 0!==e.Parts&&Ed(e.Parts).map(function(e){e=e.withName("Part"),n.addChildNode(e)}),n},Ed=function(e,t){return e.map(function(e){var t,n,r;return(t=e,r=new F.XmlNode("CompletedPart"),void 0!==t.ETag&&(n=new F.XmlNode("ETag").addChildNode(new F.XmlText(t.ETag)).withName("ETag"),r.addChildNode(n)),void 0!==t.PartNumber&&(n=new F.XmlNode("PartNumber").addChildNode(new F.XmlText(String(t.PartNumber))).withName("PartNumber"),r.addChildNode(n)),r).withName("member")})},Id=function(e,t){return(e||[]).map(function(e){return n={__type:"CommonPrefix",Prefix:void 0},void 0!==(t=e).Prefix&&(n.Prefix=t.Prefix),n;var t,n})},Ad=function(e,t){var n={__type:"Initiator",DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},Pd=function(e,t){return(e||[]).map(function(e){return n={__type:"Object",ETag:void 0,Key:void 0,LastModified:void 0,Owner:void 0,Size:void 0,StorageClass:void 0},void 0!==(t=e).ETag&&(n.ETag=t.ETag),void 0!==t.Key&&(n.Key=t.Key),void 0!==t.LastModified&&(n.LastModified=new Date(t.LastModified)),void 0!==t.Owner&&(n.Owner=kd(t.Owner)),void 0!==t.Size&&(n.Size=parseInt(t.Size)),void 0!==t.StorageClass&&(n.StorageClass=t.StorageClass),n;var t,n})},kd=function(e,t){var n={__type:"Owner",DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},Od=function(e,t){return(e||[]).map(function(e){return n={__type:"Part",ETag:void 0,LastModified:void 0,PartNumber:void 0,Size:void 0},void 0!==(t=e).ETag&&(n.ETag=t.ETag),void 0!==t.LastModified&&(n.LastModified=new Date(t.LastModified)),void 0!==t.PartNumber&&(n.PartNumber=parseInt(t.PartNumber)),void 0!==t.Size&&(n.Size=parseInt(t.Size)),n;var t,n})},Td=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},xd=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},Nd=function(e){return!(void 0===e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},Ud=function(e,t){return xd(e,n=t).then(function(e){return n.utf8Encoder(e)}).then(function(e){if(e.length){var t=L.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}}),n=Object.keys(t)[0],r=t[n];return r["#text"]&&(r[n]=r["#text"],delete r["#text"]),b.getValueFromTextNode(r)}return{}});var n},Rd=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},Md=(X(Dd,ld=b.Command),Dd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Dd.prototype.serialize=function(e,t){return l=e,p=t,oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return ie(this,function(e){switch(e.label){case 0:if(t=ee({"Content-Type":""},Nd(l.RequestPayer)&&{"x-amz-request-payer":l.RequestPayer}),n="/{Bucket}/{Key+}",void 0===l.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=l.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",b.extendedEncodeURIComponent(r)),void 0===l.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=l.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return b.extendedEncodeURIComponent(e)}).join("/")),o=ee({"x-id":"AbortMultipartUpload"},void 0!==l.UploadId&&{uploadId:l.UploadId}),[4,p.endpoint()];case 1:return i=e.sent(),s=i.hostname,a=i.protocol,u=void 0===a?"https":a,c=i.port,[2,new w.HttpRequest({protocol:u,hostname:s,port:c,method:"DELETE",headers:t,path:n,query:o,body:void 0})]}})});var l,p},Dd.prototype.deserialize=function(e,t){return n=e,r=t,oe(void 0,void 0,void 0,function(){var t;return ie(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&400<=n.statusCode?[2,pd(n,r)]:(t={$metadata:Td(n),__type:"AbortMultipartUploadOutput",RequestCharged:void 0},void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,xd(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},Dd);function Dd(e){var t=ld.call(this)||this;return t.input=e,t}var Fd,Ld=(X(jd,Fd=b.Command),jd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},jd.prototype.serialize=function(e,t){return d=e,h=t,oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p;return ie(this,function(e){switch(e.label){case 0:if(t=ee({"Content-Type":"application/xml"},Nd(d.RequestPayer)&&{"x-amz-request-payer":d.RequestPayer}),n="/{Bucket}/{Key+}",void 0===d.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=d.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",b.extendedEncodeURIComponent(r)),void 0===d.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=d.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return b.extendedEncodeURIComponent(e)}).join("/")),o=ee({},void 0!==d.UploadId&&{uploadId:d.UploadId}),void 0!==d.MultipartUpload&&(s=Cd(d.MultipartUpload),i='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=s.toString()),[4,h.endpoint()];case 1:return a=e.sent(),u=a.hostname,c=a.protocol,l=void 0===c?"https":c,p=a.port,[2,new w.HttpRequest({protocol:l,hostname:u,port:p,method:"POST",headers:t,path:n,query:o,body:i})]}})});var d,h},jd.prototype.deserialize=function(e,t){return r=e,o=t,oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,dd(r,o)]:(t={$metadata:Td(r),__type:"CompleteMultipartUploadOutput",Bucket:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),[4,Ud(r.body,o)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.ETag&&(t.ETag=n.ETag),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.Location&&(t.Location=n.Location),[2,Promise.resolve(t)]}})});var r,o},jd);function jd(e){var t=Fd.call(this)||this;return t.input=e,t}var Bd,Vd=(X(qd,Bd=b.Command),qd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(j.getSsecPlugin(t)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},qd.prototype.serialize=function(e,t){return l=e,p=t,oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return ie(this,function(e){switch(e.label){case 0:if(t=ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee({"Content-Type":""},Nd(l.ACL)&&{"x-amz-acl":l.ACL}),Nd(l.CacheControl)&&{"Cache-Control":l.CacheControl}),Nd(l.ContentDisposition)&&{"Content-Disposition":l.ContentDisposition}),Nd(l.ContentEncoding)&&{"Content-Encoding":l.ContentEncoding}),Nd(l.ContentLanguage)&&{"Content-Language":l.ContentLanguage}),Nd(l.ContentType)&&{"Content-Type":l.ContentType}),Nd(l.Expires)&&{Expires:b.dateToUtcString(l.Expires).toString()}),Nd(l.GrantFullControl)&&{"x-amz-grant-full-control":l.GrantFullControl}),Nd(l.GrantRead)&&{"x-amz-grant-read":l.GrantRead}),Nd(l.GrantReadACP)&&{"x-amz-grant-read-acp":l.GrantReadACP}),Nd(l.GrantWriteACP)&&{"x-amz-grant-write-acp":l.GrantWriteACP}),Nd(l.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":l.ObjectLockLegalHoldStatus}),Nd(l.ObjectLockMode)&&{"x-amz-object-lock-mode":l.ObjectLockMode}),Nd(l.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(l.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Nd(l.RequestPayer)&&{"x-amz-request-payer":l.RequestPayer}),Nd(l.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":l.SSECustomerAlgorithm}),Nd(l.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":l.SSECustomerKey}),Nd(l.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":l.SSECustomerKeyMD5}),Nd(l.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":l.SSEKMSEncryptionContext}),Nd(l.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":l.SSEKMSKeyId}),Nd(l.ServerSideEncryption)&&{"x-amz-server-side-encryption":l.ServerSideEncryption}),Nd(l.StorageClass)&&{"x-amz-storage-class":l.StorageClass}),Nd(l.Tagging)&&{"x-amz-tagging":l.Tagging}),Nd(l.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":l.WebsiteRedirectLocation}),void 0!==l.Metadata&&Object.keys(l.Metadata).reduce(function(e,t){return e["x-amz-meta-"+t]=l.Metadata[t],e},{})),n="/{Bucket}/{Key+}",void 0===l.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=l.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",b.extendedEncodeURIComponent(r)),void 0===l.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=l.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return b.extendedEncodeURIComponent(e)}).join("/")),o={uploads:""},[4,p.endpoint()];case 1:return i=e.sent(),s=i.hostname,a=i.protocol,u=void 0===a?"https":a,c=i.port,[2,new w.HttpRequest({protocol:u,hostname:s,port:c,method:"POST",headers:t,path:n,query:o,body:void 0})]}})});var l,p},qd.prototype.deserialize=function(e,t){return r=e,o=t,oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,hd(r,o)]:(t={$metadata:Td(r),__type:"CreateMultipartUploadOutput",AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==r.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(r.headers["x-amz-abort-date"])),void 0!==r.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=r.headers["x-amz-abort-rule-id"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=r.headers["x-amz-server-side-encryption-context"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),[4,Ud(r.body,o)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}})});var r,o},qd);function qd(e){var t=Bd.call(this)||this;return t.input=e,t}var zd,Hd=(X(Kd,zd=b.Command),Kd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Kd.prototype.serialize=function(e,t){return l=e,p=t,oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return ie(this,function(e){switch(e.label){case 0:if(t=ee(ee(ee({"Content-Type":""},Nd(l.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":l.BypassGovernanceRetention.toString()}),Nd(l.MFA)&&{"x-amz-mfa":l.MFA}),Nd(l.RequestPayer)&&{"x-amz-request-payer":l.RequestPayer}),n="/{Bucket}/{Key+}",void 0===l.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=l.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",b.extendedEncodeURIComponent(r)),void 0===l.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=l.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return b.extendedEncodeURIComponent(e)}).join("/")),o=ee({"x-id":"DeleteObject"},void 0!==l.VersionId&&{versionId:l.VersionId}),[4,p.endpoint()];case 1:return i=e.sent(),s=i.hostname,a=i.protocol,u=void 0===a?"https":a,c=i.port,[2,new w.HttpRequest({protocol:u,hostname:s,port:c,method:"DELETE",headers:t,path:n,query:o,body:void 0})]}})});var l,p},Kd.prototype.deserialize=function(e,t){return n=e,r=t,oe(void 0,void 0,void 0,function(){var t;return ie(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&400<=n.statusCode?[2,fd(n,r)]:(t={$metadata:Td(n),__type:"DeleteObjectOutput",DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==n.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===n.headers["x-amz-delete-marker"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),[4,xd(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},Kd);function Kd(e){var t=zd.call(this)||this;return t.input=e,t}var Gd,Wd=(X($d,Gd=b.Command),$d.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(j.getSsecPlugin(t)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},$d.prototype.serialize=function(e,t){return l=e,p=t,oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return ie(this,function(e){switch(e.label){case 0:if(t=ee(ee(ee(ee(ee(ee(ee(ee(ee({"Content-Type":""},Nd(l.IfMatch)&&{"If-Match":l.IfMatch}),Nd(l.IfModifiedSince)&&{"If-Modified-Since":b.dateToUtcString(l.IfModifiedSince).toString()}),Nd(l.IfNoneMatch)&&{"If-None-Match":l.IfNoneMatch}),Nd(l.IfUnmodifiedSince)&&{"If-Unmodified-Since":b.dateToUtcString(l.IfUnmodifiedSince).toString()}),Nd(l.Range)&&{Range:l.Range}),Nd(l.RequestPayer)&&{"x-amz-request-payer":l.RequestPayer}),Nd(l.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":l.SSECustomerAlgorithm}),Nd(l.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":l.SSECustomerKey}),Nd(l.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":l.SSECustomerKeyMD5}),n="/{Bucket}/{Key+}",void 0===l.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=l.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",b.extendedEncodeURIComponent(r)),void 0===l.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=l.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return b.extendedEncodeURIComponent(e)}).join("/")),o=ee(ee(ee(ee(ee(ee(ee(ee({"x-id":"GetObject"},void 0!==l.PartNumber&&{partNumber:l.PartNumber.toString()}),void 0!==l.ResponseCacheControl&&{"response-cache-control":l.ResponseCacheControl}),void 0!==l.ResponseContentDisposition&&{"response-content-disposition":l.ResponseContentDisposition}),void 0!==l.ResponseContentEncoding&&{"response-content-encoding":l.ResponseContentEncoding}),void 0!==l.ResponseContentLanguage&&{"response-content-language":l.ResponseContentLanguage}),void 0!==l.ResponseContentType&&{"response-content-type":l.ResponseContentType}),void 0!==l.ResponseExpires&&{"response-expires":(l.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==l.VersionId&&{versionId:l.VersionId}),[4,p.endpoint()];case 1:return i=e.sent(),s=i.hostname,a=i.protocol,u=void 0===a?"https":a,c=i.port,[2,new w.HttpRequest({protocol:u,hostname:s,port:c,method:"GET",headers:t,path:n,query:o,body:void 0})]}})});var l,p},$d.prototype.deserialize=function(e,t){return r=e,o=t,oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return 200!==r.statusCode&&400<=r.statusCode?[2,md(r,o)]:(t={$metadata:Td(r),__type:"GetObjectOutput",AcceptRanges:void 0,Body:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==r.headers["accept-ranges"]&&(t.AcceptRanges=r.headers["accept-ranges"]),void 0!==r.headers["cache-control"]&&(t.CacheControl=r.headers["cache-control"]),void 0!==r.headers["content-disposition"]&&(t.ContentDisposition=r.headers["content-disposition"]),void 0!==r.headers["content-encoding"]&&(t.ContentEncoding=r.headers["content-encoding"]),void 0!==r.headers["content-language"]&&(t.ContentLanguage=r.headers["content-language"]),void 0!==r.headers["content-length"]&&(t.ContentLength=parseInt(r.headers["content-length"],10)),void 0!==r.headers["content-range"]&&(t.ContentRange=r.headers["content-range"]),void 0!==r.headers["content-type"]&&(t.ContentType=r.headers["content-type"]),void 0!==r.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===r.headers["x-amz-delete-marker"]),void 0!==r.headers.etag&&(t.ETag=r.headers.etag),void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers.expires&&(t.Expires=new Date(r.headers.expires)),void 0!==r.headers["last-modified"]&&(t.LastModified=new Date(r.headers["last-modified"])),void 0!==r.headers["x-amz-missing-meta"]&&(t.MissingMeta=parseInt(r.headers["x-amz-missing-meta"],10)),void 0!==r.headers["x-amz-object-lock-legal-hold"]&&(t.ObjectLockLegalHoldStatus=r.headers["x-amz-object-lock-legal-hold"]),void 0!==r.headers["x-amz-object-lock-mode"]&&(t.ObjectLockMode=r.headers["x-amz-object-lock-mode"]),void 0!==r.headers["x-amz-object-lock-retain-until-date"]&&(t.ObjectLockRetainUntilDate=new Date(r.headers["x-amz-object-lock-retain-until-date"])),void 0!==r.headers["x-amz-mp-parts-count"]&&(t.PartsCount=parseInt(r.headers["x-amz-mp-parts-count"],10)),void 0!==r.headers["x-amz-replication-status"]&&(t.ReplicationStatus=r.headers["x-amz-replication-status"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-restore"]&&(t.Restore=r.headers["x-amz-restore"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-storage-class"]&&(t.StorageClass=r.headers["x-amz-storage-class"]),void 0!==r.headers["x-amz-tagging-count"]&&(t.TagCount=parseInt(r.headers["x-amz-tagging-count"],10)),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["x-amz-website-redirect-location"]&&(t.WebsiteRedirectLocation=r.headers["x-amz-website-redirect-location"]),Object.keys(r.headers).forEach(function(e){void 0===t.Metadata&&(t.Metadata={}),e.startsWith("x-amz-meta-")&&(t.Metadata[e.substring(11)]=r.headers[e])}),n=r.body,t.Body=n,[2,Promise.resolve(t)])})});var r,o},$d);function $d(e){var t=Gd.call(this)||this;return t.input=e,t}var Yd,Jd=(X(Zd,Yd=b.Command),Zd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Zd.prototype.serialize=function(e,t){return l=e,p=t,oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return ie(this,function(e){switch(e.label){case 0:if(t=ee({"Content-Type":""},Nd(l.RequestPayer)&&{"x-amz-request-payer":l.RequestPayer}),n="/{Bucket}",void 0===l.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=l.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",b.extendedEncodeURIComponent(r)),o=ee(ee(ee(ee(ee({},void 0!==l.Delimiter&&{delimiter:l.Delimiter}),void 0!==l.EncodingType&&{"encoding-type":l.EncodingType}),void 0!==l.Marker&&{marker:l.Marker}),void 0!==l.MaxKeys&&{"max-keys":l.MaxKeys.toString()}),void 0!==l.Prefix&&{prefix:l.Prefix}),[4,p.endpoint()];case 1:return i=e.sent(),s=i.hostname,a=i.protocol,u=void 0===a?"https":a,c=i.port,[2,new w.HttpRequest({protocol:u,hostname:s,port:c,method:"GET",headers:t,path:n,query:o,body:void 0})]}})});var l,p},Zd.prototype.deserialize=function(e,t){return r=e,o=t,oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,gd(r,o)]:(t={$metadata:Td(r),__type:"ListObjectsOutput",CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,Ud(r.body,o)]);case 1:return""===(n=e.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==n.CommonPrefixes&&(t.CommonPrefixes=Id(b.getArrayIfSingleItem(n.CommonPrefixes))),""===n.Contents&&(t.Contents=[]),void 0!==n.Contents&&(t.Contents=Pd(b.getArrayIfSingleItem(n.Contents))),void 0!==n.Delimiter&&(t.Delimiter=n.Delimiter),void 0!==n.EncodingType&&(t.EncodingType=n.EncodingType),void 0!==n.IsTruncated&&(t.IsTruncated="true"==n.IsTruncated),void 0!==n.Marker&&(t.Marker=n.Marker),void 0!==n.MaxKeys&&(t.MaxKeys=parseInt(n.MaxKeys)),void 0!==n.Name&&(t.Name=n.Name),void 0!==n.NextMarker&&(t.NextMarker=n.NextMarker),void 0!==n.Prefix&&(t.Prefix=n.Prefix),[2,Promise.resolve(t)]}})});var r,o},Zd);function Zd(e){var t=Yd.call(this)||this;return t.input=e,t}var Qd,Xd=(X(eh,Qd=b.Command),eh.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},eh.prototype.serialize=function(e,t){return l=e,p=t,oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return ie(this,function(e){switch(e.label){case 0:if(t=ee({"Content-Type":""},Nd(l.RequestPayer)&&{"x-amz-request-payer":l.RequestPayer}),n="/{Bucket}/{Key+}",void 0===l.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=l.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",b.extendedEncodeURIComponent(r)),void 0===l.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=l.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return b.extendedEncodeURIComponent(e)}).join("/")),o=ee(ee(ee({"x-id":"ListParts"},void 0!==l.MaxParts&&{"max-parts":l.MaxParts.toString()}),void 0!==l.PartNumberMarker&&{"part-number-marker":l.PartNumberMarker.toString()}),void 0!==l.UploadId&&{uploadId:l.UploadId}),[4,p.endpoint()];case 1:return i=e.sent(),s=i.hostname,a=i.protocol,u=void 0===a?"https":a,c=i.port,[2,new w.HttpRequest({protocol:u,hostname:s,port:c,method:"GET",headers:t,path:n,query:o,body:void 0})]}})});var l,p},eh.prototype.deserialize=function(e,t){return r=e,o=t,oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,yd(r,o)]:(t={$metadata:Td(r),__type:"ListPartsOutput",AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==r.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(r.headers["x-amz-abort-date"])),void 0!==r.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=r.headers["x-amz-abort-rule-id"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),[4,Ud(r.body,o)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Initiator&&(t.Initiator=Ad(n.Initiator)),void 0!==n.IsTruncated&&(t.IsTruncated="true"==n.IsTruncated),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.MaxParts&&(t.MaxParts=parseInt(n.MaxParts)),void 0!==n.NextPartNumberMarker&&(t.NextPartNumberMarker=parseInt(n.NextPartNumberMarker)),void 0!==n.Owner&&(t.Owner=kd(n.Owner)),void 0!==n.PartNumberMarker&&(t.PartNumberMarker=parseInt(n.PartNumberMarker)),""===n.Part&&(t.Parts=[]),void 0!==n.Part&&(t.Parts=Od(b.getArrayIfSingleItem(n.Part))),void 0!==n.StorageClass&&(t.StorageClass=n.StorageClass),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}})});var r,o},eh);function eh(e){var t=Qd.call(this)||this;return t.input=e,t}var th,nh=(X(rh,th=b.Command),rh.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(j.getSsecPlugin(t)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},rh.prototype.serialize=function(e,t){return d=e,h=t,oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p;return ie(this,function(e){switch(e.label){case 0:if(t=ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(ee({"Content-Type":"application/octet-stream"},Nd(d.ACL)&&{"x-amz-acl":d.ACL}),Nd(d.CacheControl)&&{"Cache-Control":d.CacheControl}),Nd(d.ContentDisposition)&&{"Content-Disposition":d.ContentDisposition}),Nd(d.ContentEncoding)&&{"Content-Encoding":d.ContentEncoding}),Nd(d.ContentLanguage)&&{"Content-Language":d.ContentLanguage}),Nd(d.ContentLength)&&{"Content-Length":d.ContentLength.toString()}),Nd(d.ContentMD5)&&{"Content-MD5":d.ContentMD5}),Nd(d.ContentType)&&{"Content-Type":d.ContentType}),Nd(d.Expires)&&{Expires:b.dateToUtcString(d.Expires).toString()}),Nd(d.GrantFullControl)&&{"x-amz-grant-full-control":d.GrantFullControl}),Nd(d.GrantRead)&&{"x-amz-grant-read":d.GrantRead}),Nd(d.GrantReadACP)&&{"x-amz-grant-read-acp":d.GrantReadACP}),Nd(d.GrantWriteACP)&&{"x-amz-grant-write-acp":d.GrantWriteACP}),Nd(d.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":d.ObjectLockLegalHoldStatus}),Nd(d.ObjectLockMode)&&{"x-amz-object-lock-mode":d.ObjectLockMode}),Nd(d.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(d.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Nd(d.RequestPayer)&&{"x-amz-request-payer":d.RequestPayer}),Nd(d.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":d.SSECustomerAlgorithm}),Nd(d.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":d.SSECustomerKey}),Nd(d.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":d.SSECustomerKeyMD5}),Nd(d.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":d.SSEKMSEncryptionContext}),Nd(d.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":d.SSEKMSKeyId}),Nd(d.ServerSideEncryption)&&{"x-amz-server-side-encryption":d.ServerSideEncryption}),Nd(d.StorageClass)&&{"x-amz-storage-class":d.StorageClass}),Nd(d.Tagging)&&{"x-amz-tagging":d.Tagging}),Nd(d.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":d.WebsiteRedirectLocation}),void 0!==d.Metadata&&Object.keys(d.Metadata).reduce(function(e,t){return e["x-amz-meta-"+t]=d.Metadata[t],e},{})),n="/{Bucket}/{Key+}",void 0===d.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=d.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",b.extendedEncodeURIComponent(r)),void 0===d.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=d.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return b.extendedEncodeURIComponent(e)}).join("/")),o={"x-id":"PutObject"},void 0!==d.Body&&(s=d.Body,i=s),[4,h.endpoint()];case 1:return a=e.sent(),u=a.hostname,c=a.protocol,l=void 0===c?"https":c,p=a.port,[2,new w.HttpRequest({protocol:l,hostname:u,port:p,method:"PUT",headers:t,path:n,query:o,body:i})]}})});var d,h},rh.prototype.deserialize=function(e,t){return n=e,r=t,oe(void 0,void 0,void 0,function(){var t;return ie(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&400<=n.statusCode?[2,vd(n,r)]:(t={$metadata:Td(n),__type:"PutObjectOutput",ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-expiration"]&&(t.Expiration=n.headers["x-amz-expiration"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=n.headers["x-amz-server-side-encryption-context"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),[4,xd(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},rh);function rh(e){var t=th.call(this)||this;return t.input=e,t}var oh,ih=(X(sh,oh=b.Command),sh.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(j.getSsecPlugin(t)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},sh.prototype.serialize=function(e,t){return d=e,h=t,oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p;return ie(this,function(e){switch(e.label){case 0:if(t=ee(ee(ee(ee(ee(ee({"Content-Type":"application/octet-stream"},Nd(d.ContentLength)&&{"Content-Length":d.ContentLength.toString()}),Nd(d.ContentMD5)&&{"Content-MD5":d.ContentMD5}),Nd(d.RequestPayer)&&{"x-amz-request-payer":d.RequestPayer}),Nd(d.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":d.SSECustomerAlgorithm}),Nd(d.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":d.SSECustomerKey}),Nd(d.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":d.SSECustomerKeyMD5}),n="/{Bucket}/{Key+}",void 0===d.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=d.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",b.extendedEncodeURIComponent(r)),void 0===d.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=d.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return b.extendedEncodeURIComponent(e)}).join("/")),o=ee(ee({"x-id":"UploadPart"},void 0!==d.PartNumber&&{partNumber:d.PartNumber.toString()}),void 0!==d.UploadId&&{uploadId:d.UploadId}),void 0!==d.Body&&(s=d.Body,i=s),[4,h.endpoint()];case 1:return a=e.sent(),u=a.hostname,c=a.protocol,l=void 0===c?"https":c,p=a.port,[2,new w.HttpRequest({protocol:l,hostname:u,port:p,method:"PUT",headers:t,path:n,query:o,body:i})]}})});var d,h},sh.prototype.deserialize=function(e,t){return n=e,r=t,oe(void 0,void 0,void 0,function(){var t;return ie(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&400<=n.statusCode?[2,bd(n,r)]:(t={$metadata:Td(n),__type:"UploadPartOutput",ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),[4,xd(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},sh);function sh(e){var t=oh.call(this)||this;return t.input=e,t}var ah=new x.ConsoleLogger("axios-http-handler"),uh="sendProgress",ch=(lh.prototype.destroy=function(){},lh.prototype.handle=function(e,t){var n,r=this.httpOptions.requestTimeout,o=this.emitter,i=e.path;!e.query||(n=K.buildQueryString(e.query))&&(i+="?"+n);var s=e.port,a=e.protocol+"//"+e.hostname+(s?":"+s:"")+i,u={};u.url=a,u.method=e.method,u.headers=e.headers,delete u.headers.host,e.body?u.data=e.body:u.headers["Content-Type"]&&(u.data=null),o&&(u.onUploadProgress=function(e){o.emit(uh,e),ah.debug(e)}),u.responseType="blob";var c=[G.request(u).then(function(e){return{response:new w.HttpResponse({headers:e.headers,statusCode:e.status,body:e.data})}}).catch(function(e){throw ah.error(e),e}),function(n){return void 0===n&&(n=0),new Promise(function(e,t){n&&setTimeout(function(){var e=new Error("Request did not complete within "+n+" ms");e.name="TimeoutError",t(e)},n)})}(r)];return Promise.race(c)},lh);function lh(e,t){void 0===e&&(e={}),this.httpOptions=e,this.emitter=t}function ph(){}function dh(){dh.init.call(this)}function hh(e){return void 0===e._maxListeners?dh.defaultMaxListeners:e._maxListeners}function fh(e,t,n,r){var o,i,s,a,u;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),i=o[t]):(o=e._events=new ph,e._eventsCount=0),i?("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),i.warned||(a=hh(e))&&0<a&&i.length>a&&(i.warned=!0,(s=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=i.length,u=s,"function"==typeof console.warn?console.warn(u):console.log(u))):(i=o[t]=n,++e._eventsCount),e}function mh(e,t,n){var r=!1;function o(){e.removeListener(t,o),r||(r=!0,n.apply(e,arguments))}return o.listener=n,o}function gh(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function yh(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}ph.prototype=Object.create(null),(dh.EventEmitter=dh).usingDomains=!1,dh.prototype.domain=void 0,dh.prototype._events=void 0,dh.prototype._maxListeners=void 0,dh.defaultMaxListeners=10,dh.init=function(){this.domain=null,dh.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new ph,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},dh.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},dh.prototype.getMaxListeners=function(){return hh(this)},dh.prototype.emit=function(e,t,n,r){var o,i,s,a,u,c="error"===e,l=this._events;if(l)c=c&&null==l.error;else if(!c)return!1;if(u=this.domain,c){if(o=t,u)return(o=o||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,o.domain=u,o.domainThrown=!1,u.emit("error",o),!1;if(o instanceof Error)throw o;var p=new Error('Uncaught, unspecified "error" event. ('+o+")");throw p.context=o,p}if(!(i=l[e]))return!1;var d,h="function"==typeof i;switch(d=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,o=yh(e,r),i=0;i<r;++i)o[i].call(n)}(i,h,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=yh(e,o),s=0;s<o;++s)i[s].call(n,r)}(i,h,this,t);break;case 3:!function(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,s=yh(e,i),a=0;a<i;++a)s[a].call(n,r,o)}(i,h,this,t,n);break;case 4:!function(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var s=e.length,a=yh(e,s),u=0;u<s;++u)a[u].call(n,r,o,i)}(i,h,this,t,n,r);break;default:for(s=new Array(d-1),a=1;a<d;a++)s[a-1]=arguments[a];!function(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=yh(e,o),s=0;s<o;++s)i[s].apply(n,r)}(i,h,this,s)}return!0},dh.prototype.addListener=function(e,t){return fh(this,e,t,!1)},dh.prototype.on=dh.prototype.addListener,dh.prototype.prependListener=function(e,t){return fh(this,e,t,!0)},dh.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,mh(this,e,t)),this},dh.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,mh(this,e,t)),this},dh.prototype.removeListener=function(e,t){var n,r,o,i,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new ph:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length;0<i--;)if(n[i]===t||n[i].listener&&n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new ph,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o);r.removeListener&&this.emit("removeListener",e,s||t)}return this},dh.prototype.removeAllListeners=function(e){var t,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=new ph,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new ph:delete n[e]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new ph,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(;this.removeListener(e,t[t.length-1]),t[0];);return this},dh.prototype.listeners=function(e){var t,n=this._events,r=n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[];return r},dh.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):gh.call(e,t)},dh.prototype.listenerCount=gh,dh.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var vh=function(){return(vh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},bh=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},wh=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Sh=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_h=new x.ConsoleLogger("AWSS3ProviderManagedUpload"),Ch=(Eh.prototype.upload=function(){return bh(this,void 0,void 0,function(){var t,n,r,o,i,s;return wh(this,function(e){switch(e.label){case 0:return[4,(t=this).validateAndSanitizeBody(this.params.Body)];case 1:return t.body=e.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,n=new nh(this.params),[2,this._createNewS3Client(this.opts,this.emitter).send(n)]):[3,2];case 2:return[4,this.createMultiPartUpload()];case 3:r=e.sent(),o=Math.ceil(this.totalBytesToUpload/this.minPartSize),i=0,e.label=4;case 4:return i<o?[4,this.checkIfUploadCancelled(r)]:[3,9];case 5:return e.sent(),s=this.createParts(i),[4,this.uploadParts(r,s)];case 6:return e.sent(),[4,this.checkIfUploadCancelled(r)];case 7:e.sent(),e.label=8;case 8:return i+=this.queueSize,[3,4];case 9:return[4,this.finishMultiPartUpload(r)];case 10:return[2,e.sent()]}})})},Eh.prototype.createParts=function(e){for(var t=[],n=e,r=e*this.minPartSize;r<this.totalBytesToUpload&&t.length<this.queueSize;){var o=Math.min(r+this.minPartSize,this.totalBytesToUpload);t.push({bodyPart:this.body.slice(r,o),partNumber:++n,emitter:new dh,_lastUploadedBytes:0}),r+=this.minPartSize}return t},Eh.prototype.createMultiPartUpload=function(){return bh(this,void 0,void 0,function(){var t,n;return wh(this,function(e){switch(e.label){case 0:return t=new Vd(this.params),[4,this._createNewS3Client(this.opts).send(t)];case 1:return n=e.sent(),_h.debug(n.UploadId),[2,n.UploadId]}})})},Eh.prototype.uploadParts=function(h,f){return bh(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d;return wh(this,function(e){switch(e.label){case 0:t=[];try{for(n=Sh(f),r=n.next();!r.done;r=n.next())o=r.value,this.setupEventListener(o),i={PartNumber:o.partNumber,Body:o.bodyPart,UploadId:h,Key:this.params.Key,Bucket:this.params.Bucket},s=new ih(i),a=this._createNewS3Client(this.opts,o.emitter),t.push(a.send(s))}catch(e){p={error:e}}finally{try{r&&!r.done&&(d=n.return)&&d.call(n)}finally{if(p)throw p.error}}e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.all(t)];case 2:for(u=e.sent(),c=0;c<u.length;c++)this.multiPartMap.push({PartNumber:f[c].partNumber,ETag:u[c].ETag});return[3,4];case 3:return l=e.sent(),_h.error("error happened while uploading a part. Cancelling the multipart upload",l),this.cancelUpload(),[2];case 4:return[2]}})})},Eh.prototype.finishMultiPartUpload=function(i){return bh(this,void 0,void 0,function(){var t,n,r,o;return wh(this,function(e){switch(e.label){case 0:t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:i,MultipartUpload:{Parts:this.multiPartMap}},n=new Ld(t),r=this._createNewS3Client(this.opts),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,r.send(n)];case 2:return[2,e.sent().Key];case 3:return o=e.sent(),_h.error("error happened while finishing the upload. Cancelling the multipart upload",o),this.cancelUpload(),[2];case 4:return[2]}})})},Eh.prototype.checkIfUploadCancelled=function(r){return bh(this,void 0,void 0,function(){var t,n;return wh(this,function(e){switch(e.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.cleanup(r)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),t+=n.errorMessage,[3,4];case 4:throw new Error(t);case 5:return[2]}})})},Eh.prototype.cancelUpload=function(){this.cancel=!0},Eh.prototype.cleanup=function(o){return bh(this,void 0,void 0,function(){var t,n,r;return wh(this,function(e){switch(e.label){case 0:return this.body=null,this.multiPartMap=[],this.bytesUploaded=0,this.totalBytesToUpload=0,t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:o},[4,(n=this._createNewS3Client(this.opts)).send(new Md(t))];case 1:return e.sent(),[4,n.send(new Xd(t))];case 2:if((r=e.sent())&&r.Parts&&0<r.Parts.length)throw new Error("Multi Part upload clean up failed");return[2]}})})},Eh.prototype.setupEventListener=function(t){var n=this;t.emitter.on(uh,function(e){n.progressChanged(t.partNumber,e.loaded-t._lastUploadedBytes),t._lastUploadedBytes=e.loaded})},Eh.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit(uh,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},Eh.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},Eh.prototype.validateAndSanitizeBody=function(t){return bh(this,void 0,void 0,function(){return wh(this,function(e){switch(e.label){case 0:return this.isGenericObject(t)?[2,JSON.stringify(t)]:[3,1];case 1:return this.isBlob(t)?x.Platform.isReactNative?[4,W.streamCollector(t)]:[3,3]:[3,4];case 2:return[2,e.sent()];case 3:case 4:return[2,t]}})})},Eh.prototype.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob},Eh.prototype.isGenericObject=function(e){if(null!==e&&"object"==typeof e)try{return!(0<=this.byteLength(e))}catch(e){return!0}return!1},Eh.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,o={};e.dangerouslyConnectToHttpEndpointForTesting&&(o={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0});var i=new ud(vh(vh({region:n,credentials:r},o),{requestHandler:new ch({},t),customUserAgent:x.getAmplifyUserAgent(),urlParser:s.parseUrl}));return i.middlewareStack.remove("contentLengthMiddleware"),i},Eh);function Eh(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.multiPartMap=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n}function Ih(e,t,n,r,o){e&&x.Hub.dispatch("storage",{event:t,data:{attrs:n,metrics:r},message:o},"Storage",Th)}var Ah=function(){return(Ah=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ph=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},kh=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Oh=new x.ConsoleLogger("AWSS3Provider"),Th="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",xh=(Nh.prototype.getCategory=function(){return Nh.CATEGORY},Nh.prototype.getProviderName=function(){return Nh.PROVIDER_NAME},Nh.prototype.configure=function(e){if(Oh.debug("configure Storage",e),!e)return this._config;var t=x.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Storage),this._config.bucket||Oh.debug("Do not have bucket yet"),this._config},Nh.prototype.get=function(C,E){return Ph(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,S,_;return kh(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];if(t=Object.assign({},this._config,E),n=t.bucket,r=t.download,o=t.cacheControl,i=t.contentDisposition,s=t.contentEncoding,a=t.contentLanguage,u=t.contentType,c=t.expires,l=t.track,p=this._prefix(t),d=p+C,h=this._createNewS3Client(t),Oh.debug("get "+C+" from "+d),f={Bucket:n,Key:d},o&&(f.ResponseCacheControl=o),i&&(f.ResponseContentDisposition=i),s&&(f.ResponseContentEncoding=s),a&&(f.ResponseContentLanguage=a),u&&(f.ResponseContentType=u),!0!==r)return[3,5];m=new Wd(f),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,h.send(m)];case 3:return g=e.sent(),Ih(l,"download",{method:"get",result:"success"},{fileSize:Number(g.Body.size||g.Body.length)},"Download success for "+C),[2,g];case 4:throw y=e.sent(),Ih(l,"download",{method:"get",result:"failed"},null,"Download failed with "+y.message),y;case 5:f.Expires=c||900,e.label=6;case 6:return e.trys.push([6,9,,10]),v=new H.S3RequestPresigner(Ah({},h.config)),[4,z.createRequest(h,new Wd(f))];case 7:return b=e.sent(),S=q.formatUrl,[4,v.presign(b,{expiresIn:f.Expires})];case 8:return w=S.apply(void 0,[e.sent()]),Ih(l,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+w),[2,w];case 9:throw _=e.sent(),Oh.warn("get signed url error",_),Ih(l,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+C),_;case 10:return[2]}})})},Nh.prototype.put=function(I,A,P){return Ph(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,S,_,C,E;return kh(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];t=Object.assign({},this._config,P),n=t.bucket,r=t.track,o=t.progressCallback,i=t.contentType,s=t.contentDisposition,a=t.cacheControl,u=t.expires,c=t.metadata,l=t.tagging,p=t.acl,d=t.serverSideEncryption,h=t.SSECustomerAlgorithm,f=t.SSECustomerKey,m=t.SSECustomerKeyMD5,g=t.SSEKMSKeyId,y=i||"binary/octet-stream",v=this._prefix(t),b=v+I,Oh.debug("put "+I+" to "+b),w={Bucket:n,Key:b,Body:A,ContentType:y},a&&(w.CacheControl=a),s&&(w.ContentDisposition=s),u&&(w.Expires=u),c&&(w.Metadata=c),l&&(w.Tagging=l),d&&(w.ServerSideEncryption=d,h&&(w.SSECustomerAlgorithm=h),f&&(w.SSECustomerKey=f),m&&(w.SSECustomerKeyMD5=m),g&&(w.SSEKMSKeyId=g)),S=new dh,_=new Ch(w,t,S),p&&(w.ACL=p),e.label=2;case 2:return e.trys.push([2,4,,5]),S.on("sendProgress",function(e){o&&("function"==typeof o?o(e):Oh.warn("progressCallback should be a function, not a "+typeof o))}),[4,_.upload()];case 3:return C=e.sent(),Oh.debug("upload result",C),Ih(r,"upload",{method:"put",result:"success"},null,"Upload success for "+I),[2,{key:I}];case 4:throw E=e.sent(),Oh.warn("error uploading",E),Ih(r,"upload",{method:"put",result:"failed"},null,"Error uploading "+I),E;case 5:return[2]}})})},Nh.prototype.remove=function(l,p){return Ph(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return kh(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];t=Object.assign({},this._config,p),n=t.bucket,r=t.track,o=this._prefix(t),i=o+l,s=this._createNewS3Client(t),Oh.debug("remove "+l+" from "+i),a=new Hd({Bucket:n,Key:i}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,s.send(a)];case 3:return u=e.sent(),Ih(r,"delete",{method:"remove",result:"success"},null,"Deleted "+l+" successfully"),[2,u];case 4:throw c=e.sent(),Ih(r,"delete",{method:"remove",result:"failed"},null,"Deletion of "+l+" failed with "+c),c;case 5:return[2]}})})},Nh.prototype.list=function(d,h){return Ph(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p;return kh(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];t=Object.assign({},this._config,h),n=t.bucket,r=t.track,o=t.maxKeys,i=this._prefix(t),s=i+d,a=this._createNewS3Client(t),Oh.debug("list "+d+" from "+s),u=new Jd({Bucket:n,Prefix:s,MaxKeys:o}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,a.send(u)];case 3:return c=e.sent(),l=[],c&&c.Contents&&(l=c.Contents.map(function(e){return{key:e.Key.substr(i.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}})),Ih(r,"list",{method:"list",result:"success"},null,l.length+" items returned from list operation"),Oh.debug("list",l),[2,l];case 4:throw p=e.sent(),Oh.warn("list error",p),Ih(r,"list",{method:"list",result:"failed"},null,"Listing items failed: "+p.message),p;case 5:return[2]}})})},Nh.prototype._ensureCredentials=function(){var n=this;return x.Credentials.get().then(function(e){if(!e)return!1;var t=x.Credentials.shear(e);return Oh.debug("set credentials for storage",t),n._config.credentials=t,!0}).catch(function(e){return Oh.warn("ensure credentials error",e),!1})},Nh.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},o=e.identityId||t.identityId,i=(void 0!==r.private?r.private:"private/")+o+"/",s=(void 0!==r.protected?r.protected:"protected/")+o+"/",a=void 0!==r.public?r.public:"public/";switch(n){case"private":return i;case"protected":return s;default:return a}},Nh.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,o={};return e.dangerouslyConnectToHttpEndpointForTesting&&(o={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),new ud(Ah(Ah({region:n,credentials:r,customUserAgent:x.getAmplifyUserAgent()},o),{requestHandler:new ch({},t)}))},Nh.CATEGORY="Storage",Nh.PROVIDER_NAME="AWSS3",Nh);function Nh(e){this._config=e||{},Oh.debug("Storage Options",this._config)}var Uh=function(){return(Uh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Rh=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},Mh=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Dh=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},Fh=new x.ConsoleLogger("StorageClass"),Lh="AWSS3",jh=(Bh.prototype.getModuleName=function(){return"Storage"},Bh.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory())return this._pluggables.push(e),e.configure(this._config[e.getProviderName()])},Bh.prototype.getPluggable=function(t){var e=this._pluggables.find(function(e){return e.getProviderName()===t});return void 0===e?(Fh.debug("No plugin found with providerName",t),null):e},Bh.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},Bh.prototype.configure=function(e){var t=this;if(Fh.debug("configure Storage"),!e)return this._config;function o(t){return r.some(function(e){return e===t})}var i=x.Parser.parseMobilehubConfig(e),n=Object.keys(i.Storage),r=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"];return n&&n.find(o)&&!i.Storage[Lh]&&(i.Storage[Lh]={}),Object.entries(i.Storage).map(function(e){var t=Dh(e,2),n=t[0],r=t[1];n&&o(n)&&void 0!==r&&(i.Storage[Lh][n]=r,delete i.Storage[n])}),Object.keys(i.Storage).forEach(function(e){"string"!=typeof i.Storage[e]&&(t._config[e]=Uh(Uh({},t._config[e]),i.Storage[e]))}),this._pluggables.forEach(function(e){e.configure(t._config[e.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new xh),this._config},Bh.prototype.get=function(o,i){return Rh(this,void 0,void 0,function(){var t,n,r;return Mh(this,function(e){return n=void 0===(t=(i||{}).provider)?Lh:t,void 0===(r=this._pluggables.find(function(e){return e.getProviderName()===n}))&&(Fh.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")),[2,r.get(o,i)]})})},Bh.prototype.put=function(o,i,s){return Rh(this,void 0,void 0,function(){var t,n,r;return Mh(this,function(e){return n=void 0===(t=(s||{}).provider)?Lh:t,void 0===(r=this._pluggables.find(function(e){return e.getProviderName()===n}))&&(Fh.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")),[2,r.put(o,i,s)]})})},Bh.prototype.remove=function(o,i){return Rh(this,void 0,void 0,function(){var t,n,r;return Mh(this,function(e){return n=void 0===(t=(i||{}).provider)?Lh:t,void 0===(r=this._pluggables.find(function(e){return e.getProviderName()===n}))&&(Fh.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")),[2,r.remove(o,i)]})})},Bh.prototype.list=function(o,i){return Rh(this,void 0,void 0,function(){var t,n,r;return Mh(this,function(e){return n=void 0===(t=(i||{}).provider)?Lh:t,void 0===(r=this._pluggables.find(function(e){return e.getProviderName()===n}))&&(Fh.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")),[2,r.list(o,i)]})})},Bh);function Bh(){this._config={},this._pluggables=[],Fh.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this),x.Amplify.register(this)}var Vh=function(){return(Vh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},qh=new x.ConsoleLogger("Storage"),zh=null,Hh=function(){if(zh)return zh;qh.debug("Create Storage Instance, debug"),(zh=new jh).vault=new jh;var n=zh.configure;return zh.configure=function(e){qh.debug("storage configure called");var t=Vh({},n.call(zh,e));Object.keys(t).forEach(function(e){"string"!=typeof t[e]&&(t[e]=Vh(Vh({},t[e]),{level:"private"}))}),qh.debug("storage vault configure called"),zh.vault.configure(t)},zh}(),Kh=function(){return(Kh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Gh=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},Wh=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},$h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},Yh=new x.ConsoleLogger("RestClient"),Jh=(Zh.prototype.ajax=function(h,f,m){return Gh(this,void 0,void 0,function(){var n,i,r,o,s,a,u,c,l,p,d=this;return Wh(this,function(e){switch(e.label){case 0:return Yh.debug(f+" "+h),n=this._parseUrl(h),i={method:f,url:h,host:n.host,path:n.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},r={},x.Platform.isReactNative&&(o=x.Platform.userAgent||"aws-amplify/0.1.x",r={"User-Agent":o}),s=Object.assign({},m),a=s.response,s.body&&(r["Content-Type"]="application/json; charset=UTF-8",i.data=JSON.stringify(s.body)),s.responseType&&(i.responseType=s.responseType),s.withCredentials&&(i.withCredentials=s.withCredentials),s.timeout&&(i.timeout=s.timeout),s.cancellableToken&&(i.cancelToken=s.cancellableToken.token),i.signerServiceInfo=s.signerServiceInfo,this._custom_header?[4,this._custom_header()]:[3,2];case 1:return c=e.sent(),[3,3];case 2:c=void 0,e.label=3;case 3:return u=c,i.headers=Kh(Kh(Kh({},r),u),s.headers),(l=wp(h,!0,!0)).search,p=$h(l,["search"]),i.url=(Ql(t=Kh(Kh({},p),{query:Kh(Kh({},p.query),s.queryStringParameters||{})}))&&(t=Sp({},t)),_p(t)),void 0!==i.headers.Authorization?(i.headers=Object.keys(i.headers).reduce(function(e,t){return i.headers[t]&&(e[t]=i.headers[t]),e},{}),[2,this._request(i,a)]):[2,x.Credentials.get().then(function(e){return d._signed(Kh({},i),e,a).catch(function(e){if(x.DateUtils.isClockSkewError(e)){var t=e.response.headers,n=t&&(t.date||t.Date),r=new Date(n),o=x.DateUtils.getDateFromHeaderString(i.headers["x-amz-date"]);if(x.DateUtils.isClockSkewed(o,r))return x.DateUtils.setClockOffset(r.getTime()-o.getTime()),d.ajax(h,f,m)}throw e})},function(e){return Yh.debug("No credentials available, the request will be unsigned"),d._request(i,a)})]}var t})})},Zh.prototype.get=function(e,t){return this.ajax(e,"GET",t)},Zh.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},Zh.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},Zh.prototype.post=function(e,t){return this.ajax(e,"POST",t)},Zh.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},Zh.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},Zh.prototype.cancel=function(e,t){var n=this._cancelTokenMap.get(e);return n&&n.cancel(t),!0},Zh.prototype.isCancel=function(e){return G.isCancel(e)},Zh.prototype.getCancellableToken=function(){return G.CancelToken.source()},Zh.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},Zh.prototype.endpoint=function(t){var n=this,e=this._options.endpoints,r="";return Array.isArray(e)&&e.forEach(function(e){e.name===t&&(r=e.endpoint,"string"==typeof e.region?n._region=e.region:"string"==typeof n._options.region&&(n._region=n._options.region),"string"==typeof e.service?n._service=e.service||"execute-api":n._service="execute-api","function"==typeof e.custom_header?n._custom_header=e.custom_header:n._custom_header=void 0)}),r},Zh.prototype._signed=function(e,t,n){var r=e.signerServiceInfo,o=$h(e,["signerServiceInfo"]),i=this._region||this._options.region,s=this._service||this._options.service,a={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},u={region:i,service:s},c=Object.assign(u,r),l=x.Signer.sign(o,a,c);return l.data&&(l.body=l.data),Yh.debug("Signed Request: ",l),delete l.headers.host,G(l).then(function(e){return n?e:e.data}).catch(function(e){throw Yh.debug(e),e})},Zh.prototype._request=function(e,t){return void 0===t&&(t=!1),G(e).then(function(e){return t?e:e.data}).catch(function(e){throw Yh.debug(e),e})},Zh.prototype._parseUrl=function(e){var t=e.split("/");return{host:t[2],path:"/"+t.slice(3).join("/")}},Zh);function Zh(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this._options=e,Yh.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}var Qh=function(){return(Qh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Xh=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},ef=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},tf=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},nf=new x.ConsoleLogger("RestAPI"),rf=(of.prototype.getModuleName=function(){return"RestAPI"},of.prototype.configure=function(e){var t,n=e||{},r=n.API,o=void 0===r?{}:r,i=tf(n,["API"]),s=Qh(Qh({},i),o);return nf.debug("configure Rest API",{opt:s}),s.aws_project_region&&(s.aws_cloud_logic_custom&&(t=s.aws_cloud_logic_custom,s.endpoints="string"==typeof t?JSON.parse(t):t),s=Object.assign({},s,{region:s.aws_project_region,header:{}})),Array.isArray(s.endpoints)||(s.endpoints=[]),s.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(nf.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}),this._options=Object.assign({},this._options,s),this.createInstance(),this._options},of.prototype.createInstance=function(){return nf.debug("create Rest API instance"),this._api=new Jh(this._options),!0},of.prototype.get=function(e,t,n){var r=this._api.endpoint(e);if(0===r.length)return Promise.reject("API "+e+" does not exist");var o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.get(r+t,i);return this._api.updateRequestToBeCancellable(s,o),s},of.prototype.post=function(e,t,n){var r=this._api.endpoint(e);if(0===r.length)return Promise.reject("API "+e+" does not exist");var o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.post(r+t,i);return this._api.updateRequestToBeCancellable(s,o),s},of.prototype.put=function(e,t,n){var r=this._api.endpoint(e);if(0===r.length)return Promise.reject("API "+e+" does not exist");var o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.put(r+t,i);return this._api.updateRequestToBeCancellable(s,o),s},of.prototype.patch=function(e,t,n){var r=this._api.endpoint(e);if(0===r.length)return Promise.reject("API "+e+" does not exist");var o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.patch(r+t,i);return this._api.updateRequestToBeCancellable(s,o),s},of.prototype.del=function(e,t,n){var r=this._api.endpoint(e);if(0===r.length)return Promise.reject("API "+e+" does not exist");var o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.del(r+t,i);return this._api.updateRequestToBeCancellable(s,o),s},of.prototype.head=function(e,t,n){var r=this._api.endpoint(e);if(0===r.length)return Promise.reject("API "+e+" does not exist");var o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var s=this._api.head(r+t,i);return this._api.updateRequestToBeCancellable(s,o),s},of.prototype.isCancel=function(e){return this._api.isCancel(e)},of.prototype.cancel=function(e,t){return this._api.cancel(e,t)},of.prototype.endpoint=function(t){return Xh(this,void 0,void 0,function(){return ef(this,function(e){return[2,this._api.endpoint(t)]})})},of);function of(e){this._api=null,this._options=e,Z.register(this),nf.debug("API Options",this._options)}new rf(null);function sf(e,t){for(var n,r=/\r\n|[\n\r]/g,o=1,i=t+1;(n=r.exec(e.body))&&n.index<t;)o+=1,i=t+1-(n.index+n[0].length);return{line:o,column:i}}function af(e,t){var n=e.locationOffset.column-1,r=uf(n)+e.body,o=t.line-1,i=e.locationOffset.line-1,s=t.line+i,a=1===t.line?n:0,u=t.column+a,c=r.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(s,":").concat(u,")\n")+function(e){var t=e.filter(function(e){e[0];return void 0!==e[1]}),o=0,n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value[0];o=Math.max(o,u.length)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.map(function(e){var t,n=e[0],r=e[1];return uf(o-(t=n).length)+t+r}).join("\n")}([["".concat(s-1,": "),c[o-1]],["".concat(s,": "),c[o]],["",uf(u-1)+"^"],["".concat(s+1,": "),c[1+o]]])}function uf(e){return Array(e+1).join(" ")}function cf(e,t,n,r,o,i,s){var a,u=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,c=n;!c&&u&&(c=(a=u[0])&&a.loc&&a.loc.source);var l,p=r;!p&&u&&(p=u.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e},[])),p&&0===p.length&&(p=void 0),r&&n?l=r.map(function(e){return sf(n,e)}):u&&(l=u.reduce(function(e,t){return t.loc&&e.push(sf(t.loc.source,t.loc.start)),e},[]));var d=s||i&&i.extensions;Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:l||void 0,enumerable:Boolean(l)},path:{value:o||void 0,enumerable:Boolean(o)},nodes:{value:u||void 0},source:{value:c||void 0},positions:{value:p||void 0},originalError:{value:i},extensions:{value:d||void 0,enumerable:Boolean(d)}}),i&&i.stack?Object.defineProperty(this,"stack",{value:i.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,cf):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}cf.prototype=Object.create(Error.prototype,{constructor:{value:cf},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,o=void 0;try{for(var i,s=e.nodes[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;a.loc&&t.push(af(a.loc.source,sf(a.loc.source,a.loc.start)))}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}}else if(e.source&&e.locations){var u=e.source,c=!0,l=!1,p=void 0;try{for(var d,h=e.locations[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var f=d.value;t.push(af(u,f))}}catch(e){l=!0,p=e}finally{try{c||null==h.return||h.return()}finally{if(l)throw p}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var lf={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},pf={};function df(e,t,n){var r=2<arguments.length&&void 0!==n?n:lf,o=void 0,i=Array.isArray(e),s=[e],a=-1,u=[],c=void 0,l=void 0,p=void 0,d=[],h=[],f=e;do{var m=++a===s.length,g=m&&0!==u.length;if(m){if(l=0===h.length?void 0:d[d.length-1],c=p,p=h.pop(),g){if(i)c=c.slice();else{var y={};for(var v in c)c.hasOwnProperty(v)&&(y[v]=c[v]);c=y}for(var b=0,w=0;w<u.length;w++){var S=u[w][0],_=u[w][1];i&&(S-=b),i&&null===_?(c.splice(S,1),b++):c[S]=_}}a=o.index,s=o.keys,u=o.edits,i=o.inArray,o=o.prev}else{if(l=p?i?a:s[a]:void 0,null==(c=p?p[l]:f))continue;p&&d.push(l)}var C=void 0;if(!Array.isArray(c)){if(!hf(c))throw new Error("Invalid AST Node: "+JSON.stringify(c));var E=function(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var o=n?r.leave:r.enter;if("function"==typeof o)return o}else{var i=n?e.leave:e.enter;if(i){if("function"==typeof i)return i;var s=i[t];if("function"==typeof s)return s}}}(t,c.kind,m);if(E){if((C=E.call(t,c,l,p,d,h))===pf)break;if(!1===C){if(!m){d.pop();continue}}else if(void 0!==C&&(u.push([l,C]),!m)){if(!hf(C)){d.pop();continue}c=C}}}void 0===C&&g&&u.push([l,c]),m?d.pop():(o={inArray:i,index:a,keys:s,edits:u,prev:o},s=(i=Array.isArray(c))?c:r[c.kind]||[],a=-1,u=[],p&&h.push(p),p=c)}while(void 0!==o);return 0!==u.length&&(f=u[u.length-1][1]),f}function hf(e){return Boolean(e&&"string"==typeof e.kind)}function ff(e){return df(e,{leave:mf})}var mf={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return yf(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=bf("(",yf(e.variableDefinitions,", "),")"),o=yf(e.directives," "),i=e.selectionSet;return n||o||r||"query"!==t?yf([t,yf([n,r]),o,i]," "):i},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,o=e.directives;return t+": "+n+bf(" = ",r)+bf(" ",yf(o," "))},SelectionSet:function(e){return vf(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,o=e.directives,i=e.selectionSet;return yf([bf("",t,": ")+n+bf("(",yf(r,", "),")"),yf(o," "),i]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+bf(" ",yf(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return yf(["...",bf("on ",t),yf(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,o=e.directives,i=e.selectionSet;return"fragment ".concat(t).concat(bf("(",yf(r,", "),")")," ")+"on ".concat(n," ").concat(bf("",yf(o," ")," "))+i},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n,r,o,i=e.value;return e.block?(r="description"===t,o=(n=i).replace(/"""/g,'\\"""')," "!==n[0]&&"\t"!==n[0]||-1!==n.indexOf("\n")?'"""\n'.concat(r?o:wf(o),'\n"""'):'"""'.concat(o.replace(/"$/,'"\n'),'"""')):JSON.stringify(i)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+yf(e.values,", ")+"]"},ObjectValue:function(e){return"{"+yf(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+bf("(",yf(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,n=e.operationTypes;return yf(["schema",yf(t," "),vf(n)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:gf(function(e){return yf(["scalar",e.name,yf(e.directives," ")]," ")}),ObjectTypeDefinition:gf(function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return yf(["type",t,bf("implements ",yf(n," & ")),yf(r," "),vf(o)]," ")}),FieldDefinition:gf(function(e){var t=e.name,n=e.arguments,r=e.type,o=e.directives;return t+(n.every(function(e){return-1===e.indexOf("\n")})?bf("(",yf(n,", "),")"):bf("(\n",wf(yf(n,"\n")),"\n)"))+": "+r+bf(" ",yf(o," "))}),InputValueDefinition:gf(function(e){var t=e.name,n=e.type,r=e.defaultValue,o=e.directives;return yf([t+": "+n,bf("= ",r),yf(o," ")]," ")}),InterfaceTypeDefinition:gf(function(e){var t=e.name,n=e.directives,r=e.fields;return yf(["interface",t,yf(n," "),vf(r)]," ")}),UnionTypeDefinition:gf(function(e){var t=e.name,n=e.directives,r=e.types;return yf(["union",t,yf(n," "),r&&0!==r.length?"= "+yf(r," | "):""]," ")}),EnumTypeDefinition:gf(function(e){var t=e.name,n=e.directives,r=e.values;return yf(["enum",t,yf(n," "),vf(r)]," ")}),EnumValueDefinition:gf(function(e){return yf([e.name,yf(e.directives," ")]," ")}),InputObjectTypeDefinition:gf(function(e){var t=e.name,n=e.directives,r=e.fields;return yf(["input",t,yf(n," "),vf(r)]," ")}),DirectiveDefinition:gf(function(e){var t=e.name,n=e.arguments,r=e.locations;return"directive @"+t+(n.every(function(e){return-1===e.indexOf("\n")})?bf("(",yf(n,", "),")"):bf("(\n",wf(yf(n,"\n")),"\n)"))+" on "+yf(r," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return yf(["extend schema",yf(t," "),vf(n)]," ")},ScalarTypeExtension:function(e){return yf(["extend scalar",e.name,yf(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return yf(["extend type",t,bf("implements ",yf(n," & ")),yf(r," "),vf(o)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return yf(["extend interface",t,yf(n," "),vf(r)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return yf(["extend union",t,yf(n," "),r&&0!==r.length?"= "+yf(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return yf(["extend enum",t,yf(n," "),vf(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return yf(["extend input",t,yf(n," "),vf(r)]," ")}};function gf(t){return function(e){return yf([e.description,t(e)],"\n")}}function yf(e,t){return e?e.filter(function(e){return e}).join(t||""):""}function vf(e){return e&&0!==e.length?"{\n"+wf(yf(e,"\n"))+"\n}":""}function bf(e,t,n){return t?e+t+(n||""):""}function wf(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function Sf(e){return(Sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _f(t){return t&&"object"===Sf(t)?"function"==typeof t.inspect?t.inspect():Array.isArray(t)?"["+t.map(_f).join(", ")+"]":"{"+Object.keys(t).map(function(e){return"".concat(e,": ").concat(_f(t[e]))}).join(", ")+"}":"string"==typeof t?'"'+t+'"':"function"==typeof t?"[function ".concat(t.name,"]"):String(t)}function Cf(e,t){if(!e)throw new Error(t)}function Ef(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function If(e,t,n){Ef(this,"body",void 0),Ef(this,"name",void 0),Ef(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},0<this.locationOffset.line||Cf(0,"line in locationOffset is 1-indexed and must be positive"),0<this.locationOffset.column||Cf(0,"column in locationOffset is 1-indexed and must be positive")}var Af;function Pf(e,t,n){return new cf("Syntax Error: ".concat(n),void 0,e,[t])}function kf(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function Of(e){return kf(e)===e.length}function Tf(){return this.lastToken=this.token,this.token=this.lookahead()}function xf(){var e=this.token;if(e.kind!==Nf.EOF)for(;(e=e.next||(e.next=function(e,t){var n=e.source,r=n.body,o=r.length,i=function(e,t,n){var r=e.length,o=t;for(;o<r;){var i=Rf.call(e,o);if(9===i||32===i||44===i||65279===i)++o;else if(10===i)++o,++n.line,n.lineStart=o;else{if(13!==i)break;10===Rf.call(e,o+1)?o+=2:++o,++n.line,n.lineStart=o}}return o}(r,t.end,e),s=e.line,a=1+i-e.lineStart;if(o<=i)return new Df(Nf.EOF,o,o,s,a,t);var u=Rf.call(r,i);switch(u){case 33:return new Df(Nf.BANG,i,i+1,s,a,t);case 35:return function(e,t,n,r,o){var i,s=e.body,a=t;for(;i=Rf.call(s,++a),null!==i&&(31<i||9===i););return new Df(Nf.COMMENT,t,a,n,r,o,Mf.call(s,t+1,a))}(n,i,s,a,t);case 36:return new Df(Nf.DOLLAR,i,i+1,s,a,t);case 38:return new Df(Nf.AMP,i,i+1,s,a,t);case 40:return new Df(Nf.PAREN_L,i,i+1,s,a,t);case 41:return new Df(Nf.PAREN_R,i,i+1,s,a,t);case 46:if(46===Rf.call(r,i+1)&&46===Rf.call(r,i+2))return new Df(Nf.SPREAD,i,i+3,s,a,t);break;case 58:return new Df(Nf.COLON,i,i+1,s,a,t);case 61:return new Df(Nf.EQUALS,i,i+1,s,a,t);case 64:return new Df(Nf.AT,i,i+1,s,a,t);case 91:return new Df(Nf.BRACKET_L,i,i+1,s,a,t);case 93:return new Df(Nf.BRACKET_R,i,i+1,s,a,t);case 123:return new Df(Nf.BRACE_L,i,i+1,s,a,t);case 124:return new Df(Nf.PIPE,i,i+1,s,a,t);case 125:return new Df(Nf.BRACE_R,i,i+1,s,a,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,o){var i=e.body,s=i.length,a=t+1,u=0;for(;a!==s&&null!==(u=Rf.call(i,a))&&(95===u||48<=u&&u<=57||65<=u&&u<=90||97<=u&&u<=122);)++a;return new Df(Nf.NAME,t,a,n,r,o,Mf.call(i,t,a))}(n,i,s,a,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,o,i){var s=e.body,a=n,u=t,c=!1;45===a&&(a=Rf.call(s,++u));if(48===a){if(48<=(a=Rf.call(s,++u))&&a<=57)throw Pf(e,u,"Invalid number, unexpected digit after 0: ".concat(Ff(a),"."))}else u=Lf(e,u,a),a=Rf.call(s,u);46===a&&(c=!0,a=Rf.call(s,++u),u=Lf(e,u,a),a=Rf.call(s,u));69!==a&&101!==a||(c=!0,43!==(a=Rf.call(s,++u))&&45!==a||(a=Rf.call(s,++u)),u=Lf(e,u,a));return new Df(c?Nf.FLOAT:Nf.INT,t,u,r,o,i,Mf.call(s,t,u))}(n,i,u,s,a,t);case 34:return 34===Rf.call(r,i+1)&&34===Rf.call(r,i+2)?function(e,t,n,r,o){var i=e.body,s=t+3,a=s,u=0,c="";for(;s<i.length&&null!==(u=Rf.call(i,s));){if(34===u&&34===Rf.call(i,s+1)&&34===Rf.call(i,s+2))return c+=Mf.call(i,a,s),new Df(Nf.BLOCK_STRING,t,s+3,n,r,o,function(e){for(var t=e.split(/\r\n|[\n\r]/g),n=null,r=1;r<t.length;r++){var o=t[r],i=kf(o);if(i<o.length&&(null===n||i<n)&&0===(n=i))break}if(n)for(var s=1;s<t.length;s++)t[s]=t[s].slice(n);for(;0<t.length&&Of(t[0]);)t.shift();for(;0<t.length&&Of(t[t.length-1]);)t.pop();return t.join("\n")}(c));if(u<32&&9!==u&&10!==u&&13!==u)throw Pf(e,s,"Invalid character within String: ".concat(Ff(u),"."));92===u&&34===Rf.call(i,s+1)&&34===Rf.call(i,s+2)&&34===Rf.call(i,s+3)?(c+=Mf.call(i,a,s)+'"""',a=s+=4):++s}throw Pf(e,s,"Unterminated string.")}(n,i,s,a,t):function(e,t,n,r,o){var i=e.body,s=t+1,a=s,u=0,c="";for(;s<i.length&&null!==(u=Rf.call(i,s))&&10!==u&&13!==u;){if(34===u)return c+=Mf.call(i,a,s),new Df(Nf.STRING,t,s+1,n,r,o,c);if(u<32&&9!==u)throw Pf(e,s,"Invalid character within String: ".concat(Ff(u),"."));if(++s,92===u){switch(c+=Mf.call(i,a,s-1),u=Rf.call(i,s)){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+="\n";break;case 114:c+="\r";break;case 116:c+="\t";break;case 117:var l=function(e,t,n,r){return jf(e)<<12|jf(t)<<8|jf(n)<<4|jf(r)}(Rf.call(i,s+1),Rf.call(i,s+2),Rf.call(i,s+3),Rf.call(i,s+4));if(l<0)throw Pf(e,s,"Invalid character escape sequence: "+"\\u".concat(i.slice(s+1,s+5),"."));c+=String.fromCharCode(l),s+=4;break;default:throw Pf(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(u),"."))}a=++s}}throw Pf(e,s,"Unterminated string.")}(n,i,s,a,t)}throw Pf(n,i,function(e){if(e<32&&9!==e&&10!==e&&13!==e)return"Cannot contain the invalid character ".concat(Ff(e),".");return 39!==e?"Cannot parse the unexpected character ".concat(Ff(e),"."):"Unexpected single quote character ('), did you mean to use a double quote (\")?"}(u))}(this,e))).kind===Nf.COMMENT;);return e}Af=If,"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Af.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var Nf=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function Uf(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var Rf=String.prototype.charCodeAt,Mf=String.prototype.slice;function Df(e,t,n,r,o,i,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=o,this.value=s,this.prev=i,this.next=null}function Ff(e){return isNaN(e)?Nf.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function Lf(e,t,n){var r=e.body,o=t,i=n;if(48<=i&&i<=57){for(;48<=(i=Rf.call(r,++o))&&i<=57;);return o}throw Pf(e,o,"Invalid number, expected digit but got: ".concat(Ff(i),"."))}function jf(e){return 48<=e&&e<=57?e-48:65<=e&&e<=70?e-55:97<=e&&e<=102?e-87:-1}Df.prototype.toJSON=Df.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var Bf=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),Vf=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function qf(e,t){var n="string"==typeof e?new If(e):e;if(!(n instanceof If))throw new TypeError("Must provide Source. Received: ".concat(_f(n)));var r,o,i,s,a,u=(r=n,o=t||{},i=new Df(Nf.SOF,0,0,0,0,null),{source:r,options:o,lastToken:i,token:i,line:1,lineStart:0,advance:Tf,lookahead:xf});return a=(s=u).token,{kind:Bf.DOCUMENT,definitions:Tm(s,Nf.SOF,Hf,Nf.EOF),loc:Cm(s,a)}}function zf(e){var t=Pm(e,Nf.NAME);return{kind:Bf.NAME,value:t.value,loc:Cm(e,t)}}function Hf(e){if(Im(e,Nf.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return Kf(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return lm(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===Nf.NAME)switch(t.value){case"schema":return function(e){var t=e.token;km(e,"extend"),km(e,"schema");var n=am(e,!0),r=Im(e,Nf.BRACE_L)?Tm(e,Nf.BRACE_L,hm,Nf.BRACE_R):[];if(0!==n.length||0!==r.length)return{kind:Bf.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:Cm(e,t)};throw Om(e)}(e);case"scalar":return function(e){var t=e.token;km(e,"extend"),km(e,"scalar");var n=zf(e),r=am(e,!0);if(0!==r.length)return{kind:Bf.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:Cm(e,t)};throw Om(e)}(e);case"type":return function(e){var t=e.token;km(e,"extend"),km(e,"type");var n=zf(e),r=fm(e),o=am(e,!0),i=mm(e);if(0!==r.length||0!==o.length||0!==i.length)return{kind:Bf.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:o,fields:i,loc:Cm(e,t)};throw Om(e)}(e);case"interface":return function(e){var t=e.token;km(e,"extend"),km(e,"interface");var n=zf(e),r=am(e,!0),o=mm(e);if(0!==r.length||0!==o.length)return{kind:Bf.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:o,loc:Cm(e,t)};throw Om(e)}(e);case"union":return function(e){var t=e.token;km(e,"extend"),km(e,"union");var n=zf(e),r=am(e,!0),o=bm(e);if(0!==r.length||0!==o.length)return{kind:Bf.UNION_TYPE_EXTENSION,name:n,directives:r,types:o,loc:Cm(e,t)};throw Om(e)}(e);case"enum":return function(e){var t=e.token;km(e,"extend"),km(e,"enum");var n=zf(e),r=am(e,!0),o=wm(e);if(0!==r.length||0!==o.length)return{kind:Bf.ENUM_TYPE_EXTENSION,name:n,directives:r,values:o,loc:Cm(e,t)};throw Om(e)}(e);case"input":return function(e){var t=e.token;km(e,"extend"),km(e,"input");var n=zf(e),r=am(e,!0),o=_m(e);if(0!==r.length||0!==o.length)return{kind:Bf.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:o,loc:Cm(e,t)};throw Om(e)}(e)}throw Om(e,t)}(e)}else{if(Im(e,Nf.BRACE_L))return Kf(e);if(pm(e))return lm(e)}throw Om(e)}function Kf(e){if(Im(e,Nf.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return Gf(e);case"fragment":return function(e){var t=e.token;if(km(e,"fragment"),e.options.experimentalFragmentVariables)return{kind:Bf.FRAGMENT_DEFINITION,name:nm(e),variableDefinitions:$f(e),typeCondition:(km(e,"on"),cm(e)),directives:am(e,!1),selectionSet:Zf(e),loc:Cm(e,t)};return{kind:Bf.FRAGMENT_DEFINITION,name:nm(e),typeCondition:(km(e,"on"),cm(e)),directives:am(e,!1),selectionSet:Zf(e),loc:Cm(e,t)}}(e)}else if(Im(e,Nf.BRACE_L))return Gf(e);throw Om(e)}function Gf(e){var t=e.token;if(Im(e,Nf.BRACE_L))return{kind:Bf.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:Zf(e),loc:Cm(e,t)};var n,r=Wf(e);return Im(e,Nf.NAME)&&(n=zf(e)),{kind:Bf.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:$f(e),directives:am(e,!1),selectionSet:Zf(e),loc:Cm(e,t)}}function Wf(e){var t=Pm(e,Nf.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw Om(e,t)}function $f(e){return Im(e,Nf.PAREN_L)?Tm(e,Nf.PAREN_L,Yf,Nf.PAREN_R):[]}function Yf(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:Bf.VARIABLE_DEFINITION,variable:Jf(e),type:(Pm(e,Nf.COLON),um(e)),defaultValue:Am(e,Nf.EQUALS)?rm(e,!0):void 0,directives:am(e,!0),loc:Cm(e,t)}:{kind:Bf.VARIABLE_DEFINITION,variable:Jf(e),type:(Pm(e,Nf.COLON),um(e)),defaultValue:Am(e,Nf.EQUALS)?rm(e,!0):void 0,loc:Cm(e,t)}}function Jf(e){var t=e.token;return Pm(e,Nf.DOLLAR),{kind:Bf.VARIABLE,name:zf(e),loc:Cm(e,t)}}function Zf(e){var t=e.token;return{kind:Bf.SELECTION_SET,selections:Tm(e,Nf.BRACE_L,Qf,Nf.BRACE_R),loc:Cm(e,t)}}function Qf(e){return(Im(e,Nf.SPREAD)?function(e){var t,n=e.token;if(Pm(e,Nf.SPREAD),Im(e,Nf.NAME)&&"on"!==e.token.value)return{kind:Bf.FRAGMENT_SPREAD,name:nm(e),directives:am(e,!1),loc:Cm(e,n)};"on"===e.token.value&&(e.advance(),t=cm(e));return{kind:Bf.INLINE_FRAGMENT,typeCondition:t,directives:am(e,!1),selectionSet:Zf(e),loc:Cm(e,n)}}:function(e){var t,n,r=e.token,o=zf(e);n=Am(e,Nf.COLON)?(t=o,zf(e)):o;return{kind:Bf.FIELD,alias:t,name:n,arguments:Xf(e,!1),directives:am(e,!1),selectionSet:Im(e,Nf.BRACE_L)?Zf(e):void 0,loc:Cm(e,r)}})(e)}function Xf(e,t){var n=t?tm:em;return Im(e,Nf.PAREN_L)?Tm(e,Nf.PAREN_L,n,Nf.PAREN_R):[]}function em(e){var t=e.token;return{kind:Bf.ARGUMENT,name:zf(e),value:(Pm(e,Nf.COLON),rm(e,!1)),loc:Cm(e,t)}}function tm(e){var t=e.token;return{kind:Bf.ARGUMENT,name:zf(e),value:(Pm(e,Nf.COLON),im(e)),loc:Cm(e,t)}}function nm(e){if("on"===e.token.value)throw Om(e);return zf(e)}function rm(e,t){var n,r,o,i,s=e.token;switch(s.kind){case Nf.BRACKET_L:return r=t,o=(n=e).token,i=r?im:sm,{kind:Bf.LIST,values:function(e,t,n,r){Pm(e,t);for(var o=[];!Am(e,r);)o.push(n(e));return o}(n,Nf.BRACKET_L,i,Nf.BRACKET_R),loc:Cm(n,o)};case Nf.BRACE_L:return function(e,t){var n=e.token;Pm(e,Nf.BRACE_L);var r=[];for(;!Am(e,Nf.BRACE_R);)r.push(function(e,t){var n=e.token;return{kind:Bf.OBJECT_FIELD,name:zf(e),value:(Pm(e,Nf.COLON),rm(e,t)),loc:Cm(e,n)}}(e,t));return{kind:Bf.OBJECT,fields:r,loc:Cm(e,n)}}(e,t);case Nf.INT:return e.advance(),{kind:Bf.INT,value:s.value,loc:Cm(e,s)};case Nf.FLOAT:return e.advance(),{kind:Bf.FLOAT,value:s.value,loc:Cm(e,s)};case Nf.STRING:case Nf.BLOCK_STRING:return om(e);case Nf.NAME:return"true"===s.value||"false"===s.value?(e.advance(),{kind:Bf.BOOLEAN,value:"true"===s.value,loc:Cm(e,s)}):"null"===s.value?(e.advance(),{kind:Bf.NULL,loc:Cm(e,s)}):(e.advance(),{kind:Bf.ENUM,value:s.value,loc:Cm(e,s)});case Nf.DOLLAR:if(!t)return Jf(e)}throw Om(e)}function om(e){var t=e.token;return e.advance(),{kind:Bf.STRING,value:t.value,block:t.kind===Nf.BLOCK_STRING,loc:Cm(e,t)}}function im(e){return rm(e,!0)}function sm(e){return rm(e,!1)}function am(e,t){for(var n,r,o,i=[];Im(e,Nf.AT);)i.push((r=t,o=void 0,o=(n=e).token,Pm(n,Nf.AT),{kind:Bf.DIRECTIVE,name:zf(n),arguments:Xf(n,r),loc:Cm(n,o)}));return i}function um(e){var t=e.token,n=Am(e,Nf.BRACKET_L)?(n=um(e),Pm(e,Nf.BRACKET_R),{kind:Bf.LIST_TYPE,type:n,loc:Cm(e,t)}):cm(e);return Am(e,Nf.BANG)?{kind:Bf.NON_NULL_TYPE,type:n,loc:Cm(e,t)}:n}function cm(e){var t=e.token;return{kind:Bf.NAMED_TYPE,name:zf(e),loc:Cm(e,t)}}function lm(e){var t=pm(e)?e.lookahead():e.token;if(t.kind===Nf.NAME)switch(t.value){case"schema":return function(e){var t=e.token;km(e,"schema");var n=am(e,!0),r=Tm(e,Nf.BRACE_L,hm,Nf.BRACE_R);return{kind:Bf.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:Cm(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=dm(e);km(e,"scalar");var r=zf(e),o=am(e,!0);return{kind:Bf.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:o,loc:Cm(e,t)}}(e);case"type":return function(e){var t=e.token,n=dm(e);km(e,"type");var r=zf(e),o=fm(e),i=am(e,!0),s=mm(e);return{kind:Bf.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:o,directives:i,fields:s,loc:Cm(e,t)}}(e);case"interface":return function(e){var t=e.token,n=dm(e);km(e,"interface");var r=zf(e),o=am(e,!0),i=mm(e);return{kind:Bf.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:o,fields:i,loc:Cm(e,t)}}(e);case"union":return function(e){var t=e.token,n=dm(e);km(e,"union");var r=zf(e),o=am(e,!0),i=bm(e);return{kind:Bf.UNION_TYPE_DEFINITION,description:n,name:r,directives:o,types:i,loc:Cm(e,t)}}(e);case"enum":return function(e){var t=e.token,n=dm(e);km(e,"enum");var r=zf(e),o=am(e,!0),i=wm(e);return{kind:Bf.ENUM_TYPE_DEFINITION,description:n,name:r,directives:o,values:i,loc:Cm(e,t)}}(e);case"input":return function(e){var t=e.token,n=dm(e);km(e,"input");var r=zf(e),o=am(e,!0),i=_m(e);return{kind:Bf.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:o,fields:i,loc:Cm(e,t)}}(e);case"directive":return function(e){var t=e.token,n=dm(e);km(e,"directive"),Pm(e,Nf.AT);var r=zf(e),o=ym(e);km(e,"on");var i=function(e){Am(e,Nf.PIPE);var t=[];for(;t.push(function(e){var t=e.token,n=zf(e);if(Vf.hasOwnProperty(n.value))return n;throw Om(e,t)}(e)),Am(e,Nf.PIPE););return t}(e);return{kind:Bf.DIRECTIVE_DEFINITION,description:n,name:r,arguments:o,locations:i,loc:Cm(e,t)}}(e)}throw Om(e,t)}function pm(e){return Im(e,Nf.STRING)||Im(e,Nf.BLOCK_STRING)}function dm(e){if(pm(e))return om(e)}function hm(e){var t=e.token,n=Wf(e);Pm(e,Nf.COLON);var r=cm(e);return{kind:Bf.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:Cm(e,t)}}function fm(e){var t=[];if("implements"===e.token.value)for(e.advance(),Am(e,Nf.AMP);t.push(cm(e)),Am(e,Nf.AMP)||e.options.allowLegacySDLImplementsInterfaces&&Im(e,Nf.NAME););return t}function mm(e){return e.options.allowLegacySDLEmptyFields&&Im(e,Nf.BRACE_L)&&e.lookahead().kind===Nf.BRACE_R?(e.advance(),e.advance(),[]):Im(e,Nf.BRACE_L)?Tm(e,Nf.BRACE_L,gm,Nf.BRACE_R):[]}function gm(e){var t=e.token,n=dm(e),r=zf(e),o=ym(e);Pm(e,Nf.COLON);var i=um(e),s=am(e,!0);return{kind:Bf.FIELD_DEFINITION,description:n,name:r,arguments:o,type:i,directives:s,loc:Cm(e,t)}}function ym(e){return Im(e,Nf.PAREN_L)?Tm(e,Nf.PAREN_L,vm,Nf.PAREN_R):[]}function vm(e){var t=e.token,n=dm(e),r=zf(e);Pm(e,Nf.COLON);var o,i=um(e);Am(e,Nf.EQUALS)&&(o=im(e));var s=am(e,!0);return{kind:Bf.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:o,directives:s,loc:Cm(e,t)}}function bm(e){var t=[];if(Am(e,Nf.EQUALS))for(Am(e,Nf.PIPE);t.push(cm(e)),Am(e,Nf.PIPE););return t}function wm(e){return Im(e,Nf.BRACE_L)?Tm(e,Nf.BRACE_L,Sm,Nf.BRACE_R):[]}function Sm(e){var t=e.token,n=dm(e),r=zf(e),o=am(e,!0);return{kind:Bf.ENUM_VALUE_DEFINITION,description:n,name:r,directives:o,loc:Cm(e,t)}}function _m(e){return Im(e,Nf.BRACE_L)?Tm(e,Nf.BRACE_L,vm,Nf.BRACE_R):[]}function Cm(e,t){if(!e.options.noLocation)return new Em(t,e.lastToken,e.source)}function Em(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function Im(e,t){return e.token.kind===t}function Am(e,t){var n=e.token.kind===t;return n&&e.advance(),n}function Pm(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw Pf(e.source,n.start,"Expected ".concat(t,", found ").concat(Uf(n)))}function km(e,t){var n=e.token;if(n.kind===Nf.NAME&&n.value===t)return e.advance(),n;throw Pf(e.source,n.start,'Expected "'.concat(t,'", found ').concat(Uf(n)))}function Om(e,t){var n=t||e.token;return Pf(e.source,n.start,"Unexpected ".concat(Uf(n)))}function Tm(e,t,n,r){Pm(e,t);for(var o=[n(e)];!Am(e,r);)o.push(n(e));return o}Em.prototype.toJSON=Em.prototype.inspect=function(){return{start:this.start,end:this.end}};var xm=$,Nm=function(){return(Nm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Um=new x.ConsoleLogger("AbstractPubSubProvider"),Rm=(Mm.prototype.configure=function(e){return void 0===e&&(e={}),this._config=Nm(Nm({},e),this._config),Um.debug("configure "+this.getProviderName(),this._config),this.options},Mm.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(Mm.prototype,"options",{get:function(){return Nm({},this._config)},enumerable:!0,configurable:!0}),Mm);function Mm(e){void 0===e&&(e={}),this._config=e}var Dm,Fm=(Dm=function(e,t){return(Dm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Dm(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Lm=function(){return(Lm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},jm=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},Bm=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Vm=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},qm=new x.ConsoleLogger("MqttOverWSProvider");var zm=(Hm.prototype.get=function(n,r){return jm(this,void 0,void 0,function(){var t;return Bm(this,function(e){return(t=this.promises.get(n))||(t=r(n),this.promises.set(n,t)),[2,t]})})},Object.defineProperty(Hm.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),Hm.prototype.remove=function(e){this.promises.delete(e)},Hm);function Hm(){this.promises=new Map}var Km,Gm="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",Wm=(Fm($m,Km=Rm),Object.defineProperty($m.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty($m.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty($m.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty($m.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),$m.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[Gm]},$m.prototype.getProviderName=function(){return"MqttOverWSProvider"},$m.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,o=Vm(e,["clientId","errorCode"]);if(0!==r){qm.warn(n,JSON.stringify(Lm({errorCode:r},o),null,2));var i=[],s=this._clientIdObservers.get(n);if(!s)return;s.forEach(function(n){n.error("Disconnected, error code: "+r),t._topicObservers.forEach(function(e,t){e.delete(n),0===e.size&&i.push(t)})}),this._clientIdObservers.delete(n),i.forEach(function(e){t._topicObservers.delete(e)})}},$m.prototype.newClient=function(e){var t=e.url,o=e.clientId;return jm(this,void 0,void 0,function(){var n,r=this;return Bm(this,function(e){switch(e.label){case 0:return qm.debug("Creating new MQTT client",o),(n=new Y.Client(t,o)).onMessageArrived=function(e){var t=e.destinationName,n=e.payloadString;r._onMessage(t,n)},n.onConnectionLost=function(e){var t=e.errorCode,n=Vm(e,["errorCode"]);r.onDisconnect(Lm({clientId:o,errorCode:t},n))},[4,new Promise(function(e,t){n.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return e(n)},onFailure:t})})];case 1:return e.sent(),[2,n]}})})},$m.prototype.connect=function(n,r){return void 0===r&&(r={}),jm(this,void 0,void 0,function(){var t=this;return Bm(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(e){return t.newClient(Lm(Lm({},r),{clientId:e}))})];case 1:return[2,e.sent()]}})})},$m.prototype.disconnect=function(n){return jm(this,void 0,void 0,function(){var t;return Bm(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(){return null})];case 1:return(t=e.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(n),[2]}})})},$m.prototype.publish=function(i,s){return jm(this,void 0,void 0,function(){var t,n,r,o;return Bm(this,function(e){switch(e.label){case 0:return t=[].concat(i),n=JSON.stringify(s),[4,this.endpoint];case 1:return r=e.sent(),[4,this.connect(this.clientId,{url:r})];case 2:return o=e.sent(),qm.debug("Publishing to topic(s)",t.join(","),n),t.forEach(function(e){return o.send(e,n)}),[2]}})})},$m.prototype._onMessage=function(n,t){try{var r=[];this._topicObservers.forEach(function(e,t){!function(e,t){for(var n=e.split("/"),r=n.length,o=t.split("/"),i=0;i<r;++i){var s=n[i],a=o[i];if("#"===s)return o.length>=r;if("+"!==s&&s!==a)return}return r===o.length}(t,n)||r.push(e)});var o=JSON.parse(t);"object"==typeof o&&(o[Gm]=n),r.forEach(function(e){e.forEach(function(e){return e.next(o)})})}catch(e){qm.warn("Error handling message",e,t)}},$m.prototype.subscribe=function(e,u){var n=this;void 0===u&&(u={});var c=[].concat(e);return qm.debug("Subscribing to topic(s)",c.join(",")),new xm(function(i){var s;c.forEach(function(e){var t=n._topicObservers.get(e);t||(t=new Set,n._topicObservers.set(e,t)),t.add(i)});var e=u.clientId,a=void 0===e?n.clientId:e,t=n._clientIdObservers.get(a);return(t=t||new Set).add(i),n._clientIdObservers.set(a,t),jm(n,void 0,void 0,function(){var t,n,r,o;return Bm(this,function(e){switch(e.label){case 0:return void 0!==(t=u.url)?[3,2]:[4,this.endpoint];case 1:return r=e.sent(),[3,3];case 2:r=t,e.label=3;case 3:n=r,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.connect(a,{url:n})];case 5:return s=e.sent(),c.forEach(function(e){s.subscribe(e)}),[3,7];case 6:return o=e.sent(),i.error(o),[3,7];case 7:return[2]}})}),function(){return qm.debug("Unsubscribing from topic(s)",c.join(",")),s&&(n._clientIdObservers.get(a).delete(i),0===n._clientIdObservers.get(a).size&&(n.disconnect(a),n._clientIdObservers.delete(a)),c.forEach(function(e){var t=n._topicObservers.get(e)||new Set;t.delete(i),0===t.size&&(n._topicObservers.delete(e),s.isConnected()&&s.unsubscribe(e))})),null}})},$m);function $m(e){void 0===e&&(e={});var t=Km.call(this,Lm(Lm({},e),{clientId:e.clientId||_.v4()}))||this;return t._clientsQueue=new zm,t._topicObservers=new Map,t._clientIdObservers=new Map,t}var Ym,Jm,Zm=(Ym=function(e,t){return(Ym=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Ym(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Qm=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},Xm=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},eg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},tg=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},ng=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(tg(arguments[t]));return e},rg=new x.ConsoleLogger("AWSAppSyncProvider"),og=(Zm(ig,Jm=Wm),Object.defineProperty(ig.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),ig.prototype.getProviderName=function(){return"AWSAppSyncProvider"},ig.prototype.publish=function(e,t,n){return Qm(this,void 0,void 0,function(){return Xm(this,function(e){throw new Error("Operation not supported")})})},ig.prototype._cleanUp=function(t){var n=this;Array.from(this._topicClient.entries()).filter(function(e){return tg(e,2)[1].clientId===t}).map(function(e){return tg(e,1)[0]}).forEach(function(e){return n._cleanUpForTopic(e)})},ig.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},ig.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,o=eg(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(e){return tg(e,2)[1].clientId===n}).map(function(e){return tg(e,1)[0]}).forEach(function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach(function(e){e.closed||e.error(o)}),t._topicObservers.delete(e))}),this._cleanUp(n))},ig.prototype.disconnect=function(t){return Qm(this,void 0,void 0,function(){return Xm(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return e.sent(),[4,Jm.prototype.disconnect.call(this,t)];case 2:return e.sent(),this._cleanUp(t),[2]}})})},ig.prototype.subscribe=function(e,c){var n=this;void 0===c&&(c={});var t=new xm(function(u){var s=[].concat(e);return rg.debug("Subscribing to topic(s)",s.join(",")),Qm(n,void 0,void 0,function(){var t,i,n,r,o,a=this;return Xm(this,function(e){switch(e.label){case 0:return s.forEach(function(e){a._topicObservers.has(e)||a._topicObservers.set(e,new Set),a._topicObservers.get(e).add(u)}),t=c.mqttConnections,i=void 0===t?[]:t,n=c.newSubscriptions,r=Object.entries(n).map(function(e){var t=tg(e,2),n=t[0];return[t[1].topic,n]}),this._topicAlias=new Map(ng(Array.from(this._topicAlias.entries()),r)),o=Object.entries(s.reduce(function(e,t){var n,r,o=i.find(function(e){return-1<e.topics.indexOf(t)});return o&&(n=o.client,r=o.url,e[n]||(e[n]={url:r,topics:new Set}),e[n].topics.add(t)),e},{})),[4,Promise.all(o.map(function(e){var t=tg(e,2),o=t[0],n=t[1],i=n.url,s=n.topics;return Qm(a,void 0,void 0,function(){var t,n,r=this;return Xm(this,function(e){switch(e.label){case 0:t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.connect(o,{clientId:o,url:i})];case 2:return t=e.sent(),[3,4];case 3:return n=e.sent(),u.error({message:"Failed to connect",error:n}),u.complete(),[2,void 0];case 4:return s.forEach(function(e){t.isConnected()&&(t.subscribe(e),r._topicClient.set(e,t))}),[2,t]}})})}))];case 1:return e.sent(),[2]}})}),function(){rg.debug("Unsubscribing from topic(s)",s.join(",")),s.forEach(function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some(function(e){return e===t})||n.disconnect(t.clientId)),n._topicObservers.delete(e)})}});return xm.from(t).map(function(e){var t=n.getTopicForValue(e),i=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce(function(e,t){var n=tg(t,2),r=n[0],o=n[1];return e[i||r]=o,e},{}),e})},ig);function ig(){var e=null!==Jm&&Jm.apply(this,arguments)||this;return e._topicClient=new Map,e._topicAlias=new Map,e}var sg,ag,ug,cg,lg,pg,dg,hg=(sg=function(e,t){return(sg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}sg(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),fg=function(){return(fg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},mg=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},gg=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},yg=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},vg=new x.Logger("AWSAppSyncRealTimeProvider"),bg="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",wg=[400,401,403];(ug=ag=ag||{}).GQL_CONNECTION_INIT="connection_init",ug.GQL_CONNECTION_ERROR="connection_error",ug.GQL_CONNECTION_ACK="connection_ack",ug.GQL_START="start",ug.GQL_START_ACK="start_ack",ug.GQL_DATA="data",ug.GQL_CONNECTION_KEEP_ALIVE="ka",ug.GQL_STOP="stop",ug.GQL_COMPLETE="complete",ug.GQL_ERROR="error",(lg=cg=cg||{})[lg.PENDING=0]="PENDING",lg[lg.CONNECTED=1]="CONNECTED",lg[lg.FAILED=2]="FAILED",(dg=pg=pg||{})[dg.CLOSED=0]="CLOSED",dg[dg.READY=1]="READY",dg[dg.CONNECTING=2]="CONNECTING";var Sg,_g={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},Cg=(hg(Eg,Sg=Rm),Eg.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},Eg.prototype.newClient=function(){throw new Error("Not used here")},Eg.prototype.publish=function(e,t,n){return mg(this,void 0,void 0,function(){return gg(this,function(e){throw new Error("Operation not supported")})})},Eg.prototype.subscribe=function(e,t){var n=this,o=t.appSyncGraphqlEndpoint;return new xm(function(e){if(o){var r=_.v4();return n._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:r}),function(){return mg(n,void 0,void 0,function(){var t,n;return gg(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(r)];case 1:if(e.sent(),!(t=(this.subscriptionObserverMap.get(r)||{}).subscriptionState))return[2];if(t!==cg.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(r),[3,4];case 2:return n=e.sent(),vg.debug("Error while unsubscribing "+n),[3,4];case 3:return this._removeSubscriptionObserver(r),[7];case 4:return[2]}})})}}e.error({errors:[fg({},new cf("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()})},Object.defineProperty(Eg.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),Eg.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var k=e.options,O=e.observer,T=e.subscriptionId;return mg(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,S,_,C,E,I,A,P=this;return gg(this,function(e){switch(e.label){case 0:return t=k.appSyncGraphqlEndpoint,n=k.authenticationType,r=k.query,o=k.variables,i=k.apiKey,s=k.region,a=k.graphql_headers,u=void 0===a?function(){return{}}:a,c=k.additionalHeaders,l=void 0===c?{}:c,p=cg.PENDING,d={query:r,variables:o},this.subscriptionObserverMap.set(T,{observer:O,query:r,variables:o,subscriptionState:p,startAckTimeoutId:null}),h=JSON.stringify(d),m=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:i,appSyncGraphqlEndpoint:t,authenticationType:n,payload:h,canonicalUri:"",region:s})];case 1:return g=[fg.apply(void 0,m.concat([e.sent()]))],[4,u()];case 2:f=fg.apply(void 0,[fg.apply(void 0,[fg.apply(void 0,g.concat([e.sent()])),l]),((A={})[x.USER_AGENT_HEADER]=x.Constants.userAgent,A)]),y={id:T,payload:{data:h,extensions:{authorization:fg({},f)}},type:ag.GQL_START},v=JSON.stringify(y),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:i,appSyncGraphqlEndpoint:t,authenticationType:n,region:s})];case 4:return e.sent(),[3,6];case 5:return b=e.sent(),vg.debug({err:b}),w=b.message,S=void 0===w?"":w,O.error({errors:[fg({},new cf("Connection failed: "+S))]}),O.complete(),"function"==typeof(_=(this.subscriptionObserverMap.get(T)||{}).subscriptionFailedCallback)&&_(),[2];case 6:return C=this.subscriptionObserverMap.get(T),E=C.subscriptionFailedCallback,I=C.subscriptionReadyCallback,this.subscriptionObserverMap.set(T,{observer:O,subscriptionState:p,variables:o,query:r,subscriptionReadyCallback:I,subscriptionFailedCallback:E,startAckTimeoutId:setTimeout(function(){P._timeoutStartSubscriptionAck.call(P,T)},15e3)}),this.awsRealTimeSocket.send(v),[2]}})})},Eg.prototype._waitForSubscriptionToBeConnected=function(u){return mg(this,void 0,void 0,function(){var a=this;return gg(this,function(e){return this.subscriptionObserverMap.get(u).subscriptionState===cg.PENDING?[2,new Promise(function(e,t){var n=a.subscriptionObserverMap.get(u),r=n.observer,o=n.subscriptionState,i=n.variables,s=n.query;a.subscriptionObserverMap.set(u,{observer:r,subscriptionState:o,variables:i,query:s,subscriptionReadyCallback:e,subscriptionFailedCallback:t})})]:[2]})})},Eg.prototype._sendUnsubscriptionMessage=function(e){try{var t,n;this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===pg.READY&&(t={id:e,type:ag.GQL_STOP},n=JSON.stringify(t),this.awsRealTimeSocket.send(n))}catch(e){vg.debug({err:e})}},Eg.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},Eg.prototype._closeSocketIfRequired=function(){var e;0<this.subscriptionObserverMap.size||(this.awsRealTimeSocket?0<this.awsRealTimeSocket.bufferedAmount?setTimeout(this._closeSocketIfRequired.bind(this),1e3):(vg.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId),(e=this.awsRealTimeSocket).onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=pg.CLOSED):this.socketStatus=pg.CLOSED)},Eg.prototype._handleIncomingSubscriptionMessage=function(e){vg.debug("subscription message from AWS AppSync RealTime: "+e.data);var t,n,r,o=JSON.parse(e.data),i=o.id,s=void 0===i?"":i,a=o.payload,u=o.type,c=this.subscriptionObserverMap.get(s)||{},l=c.observer,p=void 0===l?null:l,d=c.query,h=void 0===d?"":d,f=c.variables,m=void 0===f?{}:f,g=c.startAckTimeoutId,y=c.subscriptionReadyCallback,v=c.subscriptionFailedCallback;if(vg.debug({id:s,observer:p,query:h,variables:m}),u===ag.GQL_DATA&&a&&a.data)p?p.next(a):vg.debug("observer not found for id: "+s);else if(u!==ag.GQL_START_ACK){if(u===ag.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,Og.TIMEOUT_DISCONNECT),this.keepAliveTimeout));u===ag.GQL_ERROR&&(b=cg.FAILED,this.subscriptionObserverMap.set(s,{observer:p,query:h,variables:m,startAckTimeoutId:g,subscriptionReadyCallback:y,subscriptionFailedCallback:v,subscriptionState:b}),p.error({errors:[fg({},new cf("Connection failed: "+JSON.stringify(a)))]}),clearTimeout(g),p.complete(),"function"==typeof v&&v())}else{vg.debug("subscription ready for "+JSON.stringify({query:h,variables:m})),"function"==typeof y&&y(),clearTimeout(g),t=Og.SUBSCRIPTION_ACK,n={query:h,variables:m},r="Connection established for subscription",x.Hub.dispatch("api",{event:t,data:n,message:r},"PubSub",bg);var b=cg.CONNECTED;this.subscriptionObserverMap.set(s,{observer:p,query:h,variables:m,startAckTimeoutId:null,subscriptionState:b,subscriptionReadyCallback:y,subscriptionFailedCallback:v})}},Eg.prototype._errorDisconnect=function(n){vg.debug("Disconnect error: "+n),this.subscriptionObserverMap.forEach(function(e){var t=e.observer;t.closed||t.error({errors:[fg({},new cf(n))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=pg.CLOSED},Eg.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e)||{},n=t.observer,r=t.query,o=t.variables;n&&(this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:o,subscriptionState:cg.FAILED}),n&&!n.closed&&(n.error({errors:[fg({},new cf("Subscription timeout "+JSON.stringify({query:r,variables:o})))]}),n.complete()),vg.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:o})))},Eg.prototype._initializeWebSocketConnection=function(e){var t=this,h=e.appSyncGraphqlEndpoint,f=e.authenticationType,m=e.apiKey,g=e.region;if(this.socketStatus!==pg.READY)return new Promise(function(p,d){return mg(t,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l;return gg(this,function(e){switch(e.label){case 0:if(this.promiseArray.push({res:p,rej:d}),this.socketStatus!==pg.CLOSED)return[3,5];e.label=1;case 1:return e.trys.push([1,4,,5]),this.socketStatus=pg.CONNECTING,t=this.isSSLEnabled?"wss://":"ws://",n=h.replace("https://",t).replace("http://",t).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),r="{}",s=(i=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:f,payload:r,canonicalUri:"/connect",apiKey:m,appSyncGraphqlEndpoint:h,region:g})];case 2:return o=s.apply(i,[e.sent()]),a=Sc.from(o).toString("base64"),u=Sc.from(r).toString("base64"),c=n+"?header="+a+"&payload="+u,[4,this._initializeRetryableHandshake({awsRealTimeUrl:c})];case 3:return e.sent(),this.promiseArray.forEach(function(e){var t=e.res;vg.debug("Notifying connection successful"),t()}),this.socketStatus=pg.READY,this.promiseArray=[],[3,5];case 4:throw l=e.sent(),this.promiseArray.forEach(function(e){return(0,e.rej)(l)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=pg.CLOSED,l;case 5:return[2]}})})})},Eg.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return mg(this,void 0,void 0,function(){return gg(this,function(e){switch(e.label){case 0:return vg.debug("Initializaling retryable Handshake"),[4,x.jitteredExponentialRetry(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}})})},Eg.prototype._initializeHandshake=function(e){var o=e.awsRealTimeUrl;return mg(this,void 0,void 0,function(){var t,n,r,g=this;return gg(this,function(e){switch(e.label){case 0:vg.debug("Initializing handshake "+o),e.label=1;case 1:return e.trys.push([1,4,,5]),[4,new Promise(function(e,t){var n=new WebSocket(o,"graphql-ws");n.onerror=function(){vg.debug("WebSocket connection error")},n.onclose=function(){t(new Error("Connection handshake error"))},n.onopen=function(){return g.awsRealTimeSocket=n,e()}})];case 2:return e.sent(),[4,new Promise(function(h,f){var m=!1;g.awsRealTimeSocket.onerror=function(e){vg.debug("WebSocket error "+JSON.stringify(e))},g.awsRealTimeSocket.onclose=function(e){vg.debug("WebSocket closed "+e.reason),f(new Error(JSON.stringify(e)))},g.awsRealTimeSocket.onmessage=function(e){vg.debug("subscription message from AWS AppSyncRealTime: "+e.data+" ");var t,n,r,o,i,s,a,u=JSON.parse(e.data),c=u.type,l=u.payload,p=(void 0===l?{}:l).connectionTimeoutMs,d=void 0===p?3e5:p;if(c===ag.GQL_CONNECTION_ACK)return m=!0,g.keepAliveTimeout=d,g.awsRealTimeSocket.onmessage=g._handleIncomingSubscriptionMessage.bind(g),g.awsRealTimeSocket.onerror=function(e){vg.debug(e),g._errorDisconnect(Og.CONNECTION_CLOSED)},void h("Cool, connected to AWS AppSyncRealTime");c===ag.GQL_CONNECTION_ERROR&&(n=(void 0===(t=u.payload)?{}:t).errors,s=void 0===(i=(o=void 0===(r=yg(void 0===n?[]:n,1)[0])?{}:r).errorType)?"":i,a=o.errorCode,f({errorType:s,errorCode:void 0===a?0:a}))};var e={type:ag.GQL_CONNECTION_INIT};g.awsRealTimeSocket.send(JSON.stringify(e)),setTimeout(function(){m||f(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(g),15e3)})];case 3:return e.sent(),[3,5];case 4:throw t=e.sent(),n=t.errorType,r=t.errorCode,wg.includes(r)?new x.NonRetryableError(n):n?new Error(n):t;case 5:return[2]}})})},Eg.prototype._awsRealTimeHeaderBasedAuth=function(e){var o=e.authenticationType,i=e.payload,s=e.canonicalUri,a=e.appSyncGraphqlEndpoint,u=e.apiKey,c=e.region;return mg(this,void 0,void 0,function(){var t,n,r;return gg(this,function(e){switch(e.label){case 0:return t={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!=typeof(n=t[o])?(vg.debug("Authentication type "+o+" not supported"),[2,""]):(r=wp(a).host,[4,n({payload:i,canonicalUri:s,appSyncGraphqlEndpoint:a,apiKey:u,region:c,host:r})]);case 1:return[2,e.sent()]}})})},Eg.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return mg(this,void 0,void 0,function(){return gg(this,function(e){switch(e.label){case 0:return[4,ed.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},Eg.prototype._awsRealTimeOPENIDHeader=function(e){var n=e.host;return mg(this,void 0,void 0,function(){var t;return gg(this,function(e){switch(e.label){case 0:return[4,Ra.getItem("federatedInfo")];case 1:if(!(t=e.sent())||!t.token)throw new Error("No federated jwt");return[2,{Authorization:t.token,host:n}]}})})},Eg.prototype._awsRealTimeApiKeyHeader=function(e){var r=e.apiKey,o=e.host;return mg(this,void 0,void 0,function(){var t,n;return gg(this,function(e){return t=new Date,n=t.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:o,"x-amz-date":n,"x-api-key":r}]})})},Eg.prototype._awsRealTimeIAMHeader=function(e){var o=e.payload,i=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.region;return mg(this,void 0,void 0,function(){var t,n,r;return gg(this,function(e){switch(e.label){case 0:return t={region:a,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!e.sent())throw new Error("No credentials");return[4,x.Credentials.get().then(function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}})];case 2:return n=e.sent(),r={url:""+s+i,data:o,method:"POST",headers:fg({},_g)},[2,x.Signer.sign(r,n,t).headers]}})})},Eg.prototype._ensureCredentials=function(){return x.Credentials.get().then(function(e){if(!e)return!1;var t=x.Credentials.shear(e);return vg.debug("set credentials for AWSAppSyncRealTimeProvider",t),!0}).catch(function(e){return vg.warn("ensure credentials error",e),!1})},Eg);function Eg(){var e=null!==Sg&&Sg.apply(this,arguments)||this;return e.socketStatus=pg.CLOSED,e.keepAliveTimeout=3e5,e.subscriptionObserverMap=new Map,e.promiseArray=[],e}var Ig=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},Ag=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Pg=new x.ConsoleLogger("PubSub");function kg(e){this._options=e,Pg.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this),x.Amplify.register(this)}var Og,Tg,xg=new(Object.defineProperty(kg.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new og(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(kg.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new Cg(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),kg.prototype.getModuleName=function(){return"PubSub"},kg.prototype.configure=function(e){var t=this,n=e?e.PubSub||e:{};return Pg.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},kg.prototype.addPluggable=function(t){return Ig(this,void 0,void 0,function(){return Ag(this,function(e){return t&&"PubSub"===t.getCategory()?(this._pluggables.push(t),[2,t.configure(this._options)]):[2]})})},kg.prototype.getProviderByName=function(t){return t===x.INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER?this.awsAppSyncProvider:t===x.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(e){return e.getProviderName()===t})},kg.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;var n=this.getProviderByName(t);if(!n)throw new Error("Could not find provider named "+t);return[n]},kg.prototype.publish=function(t,n,r){return Ig(this,void 0,void 0,function(){return Ag(this,function(e){return[2,Promise.all(this.getProviders(r).map(function(e){return e.publish(t,n,r)}))]})})},kg.prototype.subscribe=function(t,r){Pg.debug("subscribe options",r);var o=this.getProviders(r);return new xm(function(n){var e=o.map(function(e){return{provider:e,observable:e.subscribe(t,r)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return n.next({provider:t,value:e})},error:function(e){return n.error({provider:t,error:e})}})});return function(){return e.forEach(function(e){return e.unsubscribe()})}})},kg)(null);(Tg=Og=Og||{}).CONNECTION_CLOSED="Connection closed",Tg.TIMEOUT_DISCONNECT="Timeout disconnect",Tg.SUBSCRIPTION_ACK="Subscription ack";var Ng=function(){return(Ng=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ug=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},Rg=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Mg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},Dg=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},Fg=new x.ConsoleLogger("GraphQLAPI"),Lg=(jg.prototype.getModuleName=function(){return"GraphQLAPI"},jg.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,o=Mg(t,["API"]),i=Ng(Ng({},o),r);return Fg.debug("configure GraphQL API",{opt:i}),i.aws_project_region&&(i=Object.assign({},i,{region:i.aws_project_region,header:{}})),void 0!==i.graphql_headers&&"function"!=typeof i.graphql_headers&&(Fg.warn("graphql_headers should be a function"),i.graphql_headers=void 0),this._options=Object.assign({},this._options,i),this.createInstance(),this._options},jg.prototype.createInstance=function(){return Fg.debug("create Rest instance"),this._options?(this._api=new Jh(this._options),!0):Promise.reject("API not configured")},jg.prototype._headerBasedAuth=function(a){return Ug(this,void 0,void 0,function(){var t,n,r,o,i,s;return Rg(this,function(e){switch(e.label){case 0:switch(t=this._options,n=t.aws_appsync_authenticationType,r=t.aws_appsync_apiKey,o={},a||n||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,6]}return[3,8];case 1:if(!r)throw new Error("No api-key configured");return o={Authorization:null,"X-Api-Key":r},[3,9];case 2:return[4,this._ensureCredentials()];case 3:if(!e.sent())throw new Error("No credentials");return[3,9];case 4:return[4,Ra.getItem("federatedInfo")];case 5:if(!(i=e.sent())||!i.token)throw new Error("No federated jwt");return o={Authorization:i.token},[3,9];case 6:return[4,ed.currentSession()];case 7:return s=e.sent(),o={Authorization:s.getAccessToken().getJwtToken()},[3,9];case 8:return o={Authorization:null},[3,9];case 9:return[2,o]}})})},jg.prototype.getGraphqlOperationType=function(e){var t=qf(e);return Dg(t.definitions,1)[0].operation},jg.prototype.graphql=function(e,t){var n=e.query,r=e.variables,o=void 0===r?{}:r,i=e.authMode,s=qf("string"==typeof n?n:ff(n)),a=Dg(s.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0],u=(void 0===a?{}:a).operation;switch(u){case"query":case"mutation":var c=this._api.getCancellableToken(),l={cancellableToken:c},p=this._graphql({query:s,variables:o,authMode:i},t,l);return this._api.updateRequestToBeCancellable(p,c),p;case"subscription":return this._graphqlSubscribe({query:s,variables:o,authMode:i},t)}throw new Error("invalid operation type: "+u)},jg.prototype._graphql=function(e,_,C){var E=e.query,I=e.variables,A=e.authMode;return void 0===_&&(_={}),void 0===C&&(C={}),Ug(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,S;return Rg(this,function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return t=this._options,n=t.aws_appsync_region,r=t.aws_appsync_graphqlEndpoint,o=t.graphql_headers,i=void 0===o?function(){return{}}:o,s=t.graphql_endpoint,a=t.graphql_endpoint_iam_region,c=[{}],(l=!s)?[4,this._headerBasedAuth(A)]:[3,4];case 3:l=e.sent(),e.label=4;case 4:return p=[Ng.apply(void 0,c.concat([l]))],(d=s)?a?[4,this._headerBasedAuth(A)]:[3,6]:[3,8];case 5:return h=e.sent(),[3,7];case 6:h={Authorization:null},e.label=7;case 7:d=h,e.label=8;case 8:return f=[Ng.apply(void 0,p.concat([d]))],[4,i({query:E,variables:I})];case 9:if(u=Ng.apply(void 0,[Ng.apply(void 0,[Ng.apply(void 0,f.concat([e.sent()])),_]),!s&&((S={})["x-amz-user-agent"]=x.Constants.userAgent,S)]),m={query:ff(E),variables:I},g=Object.assign({headers:u,body:m,signerServiceInfo:{service:s?"execute-api":"appsync",region:s?a:n}},C),!(y=s||r))throw{data:{},errors:[new cf("No graphql endpoint provided.")]};e.label=10;case 10:return e.trys.push([10,12,,13]),[4,this._api.post(y,g)];case 11:return v=e.sent(),[3,13];case 12:if(b=e.sent(),this._api.isCancel(b))throw b;return v={data:{},errors:[new cf(b.message)]},[3,13];case 13:if((w=v.errors)&&w.length)throw v;return[2,v]}})})},jg.prototype.isCancel=function(e){return this._api.isCancel(e)},jg.prototype.cancel=function(e,t){return this._api.cancel(e,t)},jg.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,o=e.authMode;void 0===t&&(t={});var i=this._options,s=i.aws_appsync_region,a=i.aws_appsync_graphqlEndpoint,u=i.aws_appsync_authenticationType,c=i.aws_appsync_apiKey,l=i.graphql_headers,p=void 0===l?function(){return{}}:l,d=o||u||"AWS_IAM";if(xg&&"function"==typeof xg.subscribe)return xg.subscribe("",{provider:x.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER,appSyncGraphqlEndpoint:a,authenticationType:d,apiKey:c,query:ff(n),region:s,variables:r,graphql_headers:p,additionalHeaders:t});throw Fg.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},jg.prototype._ensureCredentials=function(){return x.Credentials.get().then(function(e){if(!e)return!1;var t=x.Credentials.shear(e);return Fg.debug("set credentials for api",t),!0}).catch(function(e){return Fg.warn("ensure credentials error",e),!1})},jg);function jg(e){this._api=null,this._options=e,Z.register(this),Fg.debug("API Options",this._options)}new Lg(null);var Bg=function(){return(Bg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Vg=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},qg=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},zg=new x.ConsoleLogger("API");function Hg(e){this._options=e,this._restApi=new rf(e),this._graphqlApi=new Lg(e),x.Amplify.register(this),zg.debug("API Options",this._options)}var Kg=new(Hg.prototype.getModuleName=function(){return"API"},Hg.prototype.configure=function(e){this._options=Object.assign({},this._options,e);var t=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return Bg(Bg({},t),n)},Hg.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},Hg.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},Hg.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},Hg.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},Hg.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},Hg.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},Hg.prototype.isCancel=function(e){return this._restApi.isCancel(e)},Hg.prototype.cancel=function(e,t){return this._restApi.cancel(e,t)},Hg.prototype.endpoint=function(t){return Vg(this,void 0,void 0,function(){return qg(this,function(e){return[2,this._restApi.endpoint(t)]})})},Hg.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},Hg.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},Hg)(null),Gg=function(){return(Gg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Wg=new x.ConsoleLogger("AbstractInteractionsProvider"),$g=(Yg.prototype.configure=function(e){return void 0===e&&(e={}),this._config=Gg(Gg({},this._config),e),Wg.debug("configure "+this.getProviderName(),this._config),this.options},Yg.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(Yg.prototype,"options",{get:function(){return Gg({},this._config)},enumerable:!0,configurable:!0}),Yg);function Yg(e){void 0===e&&(e={}),this._config=e}var Jg,Zg="runtime.lex.{region}.amazonaws.com",Qg=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Xg=new Set(["cn-north-1","cn-northwest-1"]),ey=new Set(["us-iso-east-1"]),ty=new Set(["us-isob-east-1"]),ny=new Set(["us-gov-west-1","us-gov-east-1"]),ry=ee(ee({},{apiVersion:"2016-11-28",disableHostPrefix:!1,regionInfoProvider:function(e,t){var n=void 0;switch(e){case"eu-west-1":n={hostname:"runtime.lex.eu-west-1.amazonaws.com",signingService:"lex"};break;case"us-east-1":n={hostname:"runtime.lex.us-east-1.amazonaws.com",signingService:"lex"};break;case"us-west-2":n={hostname:"runtime.lex.us-west-2.amazonaws.com",signingService:"lex"};break;default:Qg.has(e)&&(n={hostname:Zg.replace("{region}",e),signingService:"lex"}),Xg.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com.cn".replace("{region}",e)}),ey.has(e)&&(n={hostname:"runtime.lex.{region}.c2s.ic.gov".replace("{region}",e)}),ty.has(e)&&(n={hostname:"runtime.lex.{region}.sc2s.sgov.gov".replace("{region}",e)}),ny.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:Zg.replace("{region}",e),signingService:"lex"})}return Promise.resolve(n)},signingName:"lex"}),{runtime:"node",base64Decoder:a.fromBase64,base64Encoder:a.toBase64,bodyLengthChecker:u.calculateBodyLength,credentialDefaultProvider:n.defaultProvider,defaultUserAgent:c.defaultUserAgent("@aws-sdk/client-lex-runtime-service","1.0.0-gamma.2"),regionDefaultProvider:i.defaultProvider,requestHandler:new o.NodeHttpHandler,sha256:r.Hash.bind(null,"sha256"),streamCollector:o.streamCollector,urlParser:s.parseUrl,utf8Decoder:l.fromUtf8,utf8Encoder:l.toUtf8}),oy=(X(iy,Jg=b.Client),iy.prototype.destroy=function(){Jg.prototype.destroy.call(this)},iy);function iy(e){var t=this,n=ee(ee({},ry),e),r=p.resolveRegionConfig(n),o=p.resolveEndpointsConfig(r),i=g.resolveAwsAuthConfig(o),s=m.resolveRetryConfig(i),a=v.resolveUserAgentConfig(s),u=f.resolveHostHeaderConfig(a);return(t=Jg.call(this,u)||this).config=u,t.middlewareStack.use(g.getAwsAuthPlugin(t.config)),t.middlewareStack.use(m.getRetryPlugin(t.config)),t.middlewareStack.use(v.getUserAgentPlugin(t.config)),t.middlewareStack.use(d.getContentLengthPlugin(t.config)),t.middlewareStack.use(f.getHostHeaderPlugin(t.config)),t}function sy(e,t){return r=t,void 0===(n=e)&&(n=new Uint8Array),(n instanceof Uint8Array?Promise.resolve(n):r.streamCollector(n)||Promise.resolve(new Uint8Array)).then(function(e){return t.utf8Encoder(e)});var n,r}var ay,uy=function(b,w){return oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v;return ie(this,function(e){switch(e.label){case 0:return n=[ee({},b)],r={},[4,Oy(b.body,w)];case 1:switch(t=ee.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Ty(b,t.body)){case"BadRequestException":case"com.amazonaws.commonapi.exceptions#BadRequestException":return[3,2];case"ConflictException":case"com.amazonaws.commonapi.exceptions#ConflictException":return[3,4];case"InternalFailureException":case"com.amazonaws.commonapi.exceptions#InternalFailureException":return[3,6];case"LimitExceededException":case"com.amazonaws.commonapi.exceptions#LimitExceededException":return[3,8];case"NotAcceptableException":case"com.amazonaws.commonapi.exceptions#NotAcceptableException":return[3,10];case"NotFoundException":case"com.amazonaws.commonapi.exceptions#NotFoundException":return[3,12];case"RequestTimeoutException":case"com.amazonaws.commonapi.exceptions#RequestTimeoutException":return[3,14];case"UnsupportedMediaTypeException":case"com.amazonaws.commonapi.exceptions#UnsupportedMediaTypeException":return[3,16];case"BadGatewayException":case"com.amazonaws.deepsense.runtimeservice#BadGatewayException":return[3,18];case"DependencyFailedException":case"com.amazonaws.deepsense.runtimeservice#DependencyFailedException":return[3,20];case"LoopDetectedException":case"com.amazonaws.deepsense.runtimeservice#LoopDetectedException":return[3,22]}return[3,24];case 2:return s=[{}],[4,ly(t)];case 3:return o=ee.apply(void 0,[ee.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:Py(b)}]),[3,25];case 4:return a=[{}],[4,py(t)];case 5:return o=ee.apply(void 0,[ee.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:Py(b)}]),[3,25];case 6:return u=[{}],[4,dy(t)];case 7:return o=ee.apply(void 0,[ee.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:Py(b)}]),[3,25];case 8:return c=[{}],[4,hy(t)];case 9:return o=ee.apply(void 0,[ee.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:Py(b)}]),[3,25];case 10:return l=[{}],[4,fy(t)];case 11:return o=ee.apply(void 0,[ee.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:Py(b)}]),[3,25];case 12:return p=[{}],[4,my(t)];case 13:return o=ee.apply(void 0,[ee.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:Py(b)}]),[3,25];case 14:return d=[{}],[4,gy(t)];case 15:return o=ee.apply(void 0,[ee.apply(void 0,d.concat([e.sent()])),{name:i,$metadata:Py(b)}]),[3,25];case 16:return h=[{}],[4,yy(t)];case 17:return o=ee.apply(void 0,[ee.apply(void 0,h.concat([e.sent()])),{name:i,$metadata:Py(b)}]),[3,25];case 18:return f=[{}],[4,vy(t)];case 19:return o=ee.apply(void 0,[ee.apply(void 0,f.concat([e.sent()])),{name:i,$metadata:Py(b)}]),[3,25];case 20:return m=[{}],[4,by(t)];case 21:return o=ee.apply(void 0,[ee.apply(void 0,m.concat([e.sent()])),{name:i,$metadata:Py(b)}]),[3,25];case 22:return g=[{}],[4,wy(t)];case 23:return o=ee.apply(void 0,[ee.apply(void 0,g.concat([e.sent()])),{name:i,$metadata:Py(b)}]),[3,25];case 24:y=t.body,i=y.code||y.Code||i,o=ee(ee({},y),{name:""+i,message:y.message||y.Message||i,$fault:"client",$metadata:Py(b)}),e.label=25;case 25:return v=o.message||o.Message||i,o.message=v,delete o.Message,[2,Promise.reject(Object.assign(new Error(v),o))]}})})},cy=function(g,y){return oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m;return ie(this,function(e){switch(e.label){case 0:return n=[ee({},g)],r={},[4,Oy(g.body,y)];case 1:switch(t=ee.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Ty(g,t.body)){case"BadRequestException":case"com.amazonaws.commonapi.exceptions#BadRequestException":return[3,2];case"ConflictException":case"com.amazonaws.commonapi.exceptions#ConflictException":return[3,4];case"InternalFailureException":case"com.amazonaws.commonapi.exceptions#InternalFailureException":return[3,6];case"LimitExceededException":case"com.amazonaws.commonapi.exceptions#LimitExceededException":return[3,8];case"NotFoundException":case"com.amazonaws.commonapi.exceptions#NotFoundException":return[3,10];case"BadGatewayException":case"com.amazonaws.deepsense.runtimeservice#BadGatewayException":return[3,12];case"DependencyFailedException":case"com.amazonaws.deepsense.runtimeservice#DependencyFailedException":return[3,14];case"LoopDetectedException":case"com.amazonaws.deepsense.runtimeservice#LoopDetectedException":return[3,16]}return[3,18];case 2:return s=[{}],[4,ly(t)];case 3:return o=ee.apply(void 0,[ee.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:Py(g)}]),[3,19];case 4:return a=[{}],[4,py(t)];case 5:return o=ee.apply(void 0,[ee.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:Py(g)}]),[3,19];case 6:return u=[{}],[4,dy(t)];case 7:return o=ee.apply(void 0,[ee.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:Py(g)}]),[3,19];case 8:return c=[{}],[4,hy(t)];case 9:return o=ee.apply(void 0,[ee.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:Py(g)}]),[3,19];case 10:return l=[{}],[4,my(t)];case 11:return o=ee.apply(void 0,[ee.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:Py(g)}]),[3,19];case 12:return p=[{}],[4,vy(t)];case 13:return o=ee.apply(void 0,[ee.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:Py(g)}]),[3,19];case 14:return d=[{}],[4,by(t)];case 15:return o=ee.apply(void 0,[ee.apply(void 0,d.concat([e.sent()])),{name:i,$metadata:Py(g)}]),[3,19];case 16:return h=[{}],[4,wy(t)];case 17:return o=ee.apply(void 0,[ee.apply(void 0,h.concat([e.sent()])),{name:i,$metadata:Py(g)}]),[3,19];case 18:f=t.body,i=f.code||f.Code||i,o=ee(ee({},f),{name:""+i,message:f.message||f.Message||i,$fault:"client",$metadata:Py(g)}),e.label=19;case 19:return m=o.message||o.Message||i,o.message=m,delete o.Message,[2,Promise.reject(Object.assign(new Error(m),o))]}})})},ly=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:Py(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},py=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"ConflictException",$fault:"client",$metadata:Py(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},dy=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"InternalFailureException",$fault:"server",$metadata:Py(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},hy=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"LimitExceededException",$fault:"client",$metadata:Py(r),message:void 0,retryAfterSeconds:void 0},void 0!==r.headers["retry-after"]&&(t.retryAfterSeconds=r.headers["retry-after"]),void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},fy=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"NotAcceptableException",$fault:"client",$metadata:Py(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},my=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:Py(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},gy=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"RequestTimeoutException",$fault:"client",$metadata:Py(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},yy=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:Py(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},vy=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"BadGatewayException",$fault:"server",$metadata:Py(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},by=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"DependencyFailedException",$fault:"client",$metadata:Py(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},wy=function(r,e){return oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return t={name:"LoopDetectedException",$fault:"server",$metadata:Py(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},Sy=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r=ae(t,2),o=r[0],i=r[1];return ee(ee({},e),((n={})[o]=i,n))},{})},_y=function(e,t){return{__type:"SentimentResponse",sentimentLabel:void 0!==e.sentimentLabel&&null!==e.sentimentLabel?e.sentimentLabel:void 0,sentimentScore:void 0!==e.sentimentScore&&null!==e.sentimentScore?e.sentimentScore:void 0}},Cy=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r=ae(t,2),o=r[0],i=r[1];return ee(ee({},e),((n={})[o]=i,n))},{})},Ey=function(e,t){return{__type:"ResponseCard",contentType:void 0!==e.contentType&&null!==e.contentType?e.contentType:void 0,genericAttachments:void 0!==e.genericAttachments&&null!==e.genericAttachments?Iy(e.genericAttachments):void 0,version:void 0!==e.version&&null!==e.version?e.version:void 0}},Iy=function(e,t){return(e||[]).map(function(e){return{__type:"GenericAttachment",attachmentLinkUrl:void 0!==(t=e).attachmentLinkUrl&&null!==t.attachmentLinkUrl?t.attachmentLinkUrl:void 0,buttons:void 0!==t.buttons&&null!==t.buttons?Ay(t.buttons):void 0,imageUrl:void 0!==t.imageUrl&&null!==t.imageUrl?t.imageUrl:void 0,subTitle:void 0!==t.subTitle&&null!==t.subTitle?t.subTitle:void 0,title:void 0!==t.title&&null!==t.title?t.title:void 0};var t})},Ay=function(e,t){return(e||[]).map(function(e){return{__type:"Button",text:void 0!==(t=e).text&&null!==t.text?t.text:void 0,value:void 0!==t.value&&null!==t.value?t.value:void 0};var t})},Py=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},ky=function(e){return!(void 0===e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},Oy=function(e,t){return sy(e,t).then(function(e){return e.length?JSON.parse(e):{}})},Ty=function(e,t){function n(e){var t=e;return 0<=t.indexOf(":")&&(t=t.split(":")[0]),0<=t.indexOf("#")&&(t=t.split("#")[1]),t}var r,o,i=(r=e.headers,o="x-amzn-errortype",Object.keys(r).find(function(e){return e.toLowerCase()===o.toLowerCase()}));return void 0!==i?n(e.headers[i]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},xy=(X(Ny,ay=b.Command),Ny.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Ny.prototype.serialize=function(e,t){return l=e,p=t,oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return ie(this,function(e){switch(e.label){case 0:if(t=ee(ee(ee(ee({"Content-Type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED_PAYLOAD"},ky(l.accept)&&{Accept:l.accept}),ky(l.contentType)&&{"Content-Type":l.contentType}),ky(l.requestAttributes)&&{"x-amz-lex-request-attributes":b.LazyJsonString.fromObject(l.requestAttributes)}),ky(l.sessionAttributes)&&{"x-amz-lex-session-attributes":b.LazyJsonString.fromObject(l.sessionAttributes)}),n="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===l.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((r=l.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",b.extendedEncodeURIComponent(r)),void 0===l.botName)throw new Error("No value provided for input HTTP label: botName.");if((r=l.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",b.extendedEncodeURIComponent(r)),void 0===l.userId)throw new Error("No value provided for input HTTP label: userId.");if((r=l.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",b.extendedEncodeURIComponent(r)),void 0!==l.inputStream&&(o=l.inputStream),[4,p.endpoint()];case 1:return i=e.sent(),s=i.hostname,a=i.protocol,u=void 0===a?"https":a,c=i.port,[2,new w.HttpRequest({protocol:u,hostname:s,port:c,method:"POST",headers:t,path:n,body:o})]}})});var l,p},Ny.prototype.deserialize=function(e,t){return r=e,o=t,oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){return 200!==r.statusCode&&400<=r.statusCode?[2,uy(r,o)]:(t={$metadata:Py(r),__type:"PostContentResponse",audioStream:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==r.headers["content-type"]&&(t.contentType=r.headers["content-type"]),void 0!==r.headers["x-amz-lex-dialog-state"]&&(t.dialogState=r.headers["x-amz-lex-dialog-state"]),void 0!==r.headers["x-amz-lex-input-transcript"]&&(t.inputTranscript=r.headers["x-amz-lex-input-transcript"]),void 0!==r.headers["x-amz-lex-intent-name"]&&(t.intentName=r.headers["x-amz-lex-intent-name"]),void 0!==r.headers["x-amz-lex-message"]&&(t.message=r.headers["x-amz-lex-message"]),void 0!==r.headers["x-amz-lex-message-format"]&&(t.messageFormat=r.headers["x-amz-lex-message-format"]),void 0!==r.headers["x-amz-lex-sentiment"]&&(t.sentimentResponse=r.headers["x-amz-lex-sentiment"]),void 0!==r.headers["x-amz-lex-session-attributes"]&&(t.sessionAttributes=new b.LazyJsonString(r.headers["x-amz-lex-session-attributes"])),void 0!==r.headers["x-amz-lex-session-id"]&&(t.sessionId=r.headers["x-amz-lex-session-id"]),void 0!==r.headers["x-amz-lex-slot-to-elicit"]&&(t.slotToElicit=r.headers["x-amz-lex-slot-to-elicit"]),void 0!==r.headers["x-amz-lex-slots"]&&(t.slots=new b.LazyJsonString(r.headers["x-amz-lex-slots"])),n=r.body,t.audioStream=n,[2,Promise.resolve(t)])})});var r,o},Ny);function Ny(e){var t=ay.call(this)||this;return t.input=e,t}var Uy,Ry=(X(My,Uy=b.Command),My.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(S.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},My.prototype.serialize=function(e,t){return l=e,p=t,oe(void 0,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return ie(this,function(e){switch(e.label){case 0:if(t={"Content-Type":"application/json"},n="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===l.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((r=l.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",b.extendedEncodeURIComponent(r)),void 0===l.botName)throw new Error("No value provided for input HTTP label: botName.");if((r=l.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",b.extendedEncodeURIComponent(r)),void 0===l.userId)throw new Error("No value provided for input HTTP label: userId.");if((r=l.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",b.extendedEncodeURIComponent(r)),o=JSON.stringify(ee(ee(ee({},void 0!==l.inputText&&{inputText:l.inputText}),void 0!==l.requestAttributes&&{requestAttributes:Sy(l.requestAttributes)}),void 0!==l.sessionAttributes&&{sessionAttributes:Sy(l.sessionAttributes)})),[4,p.endpoint()];case 1:return i=e.sent(),s=i.hostname,a=i.protocol,u=void 0===a?"https":a,c=i.port,[2,new w.HttpRequest({protocol:u,hostname:s,port:c,method:"POST",headers:t,path:n,body:o})]}})});var l,p},My.prototype.deserialize=function(e,t){return r=e,o=t,oe(void 0,void 0,void 0,function(){var t,n;return ie(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,cy(r,o)]:(t={$metadata:Py(r),__type:"PostTextResponse",dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,Oy(r.body,o)]);case 1:return void 0!==(n=e.sent()).dialogState&&null!==n.dialogState&&(t.dialogState=n.dialogState),void 0!==n.intentName&&null!==n.intentName&&(t.intentName=n.intentName),void 0!==n.message&&null!==n.message&&(t.message=n.message),void 0!==n.messageFormat&&null!==n.messageFormat&&(t.messageFormat=n.messageFormat),void 0!==n.responseCard&&null!==n.responseCard&&(t.responseCard=Ey(n.responseCard)),void 0!==n.sentimentResponse&&null!==n.sentimentResponse&&(t.sentimentResponse=_y(n.sentimentResponse)),void 0!==n.sessionAttributes&&null!==n.sessionAttributes&&(t.sessionAttributes=Cy(n.sessionAttributes)),void 0!==n.sessionId&&null!==n.sessionId&&(t.sessionId=n.sessionId),void 0!==n.slotToElicit&&null!==n.slotToElicit&&(t.slotToElicit=n.slotToElicit),void 0!==n.slots&&null!==n.slots&&(t.slots=Cy(n.slots)),[2,Promise.resolve(t)]}})});var r,o},My);function My(e){var t=Uy.call(this)||this;return t.input=e,t}var Dy,Fy,Ly=(Dy=function(e,t){return(Dy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Dy(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),jy=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},By=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Vy=new x.ConsoleLogger("AWSLexProvider"),qy=(Ly(zy,Fy=$g),zy.prototype.getProviderName=function(){return"AWSLexProvider"},zy.prototype.reportBotStatus=function(e,t){var n=this;Vy.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t](null,{slots:e.slots})},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete(null,{slots:e.slots})},0)),"Failed"===e.dialogState&&("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t]("Bot conversation failed")},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete("Bot conversation failed")},0))},zy.prototype.sendMessage=function(u,c){return jy(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return By(this,function(e){switch(e.label){case 0:return this._config[u]?[4,x.Credentials.get()]:[2,Promise.reject("Bot "+u+" does not exist")];case 1:if(!(t=e.sent()))return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new oy({region:this._config[u].region,credentials:t,customUserAgent:x.getAmplifyUserAgent()}),"string"!=typeof c)return[3,6];n={botAlias:this._config[u].alias,botName:u,inputText:c,userId:t.identityId},Vy.debug("postText to lex",c),e.label=2;case 2:return e.trys.push([2,4,,5]),r=new Ry(n),[4,this.lexRuntimeServiceClient.send(r)];case 3:return s=e.sent(),this.reportBotStatus(s,u),[2,s];case 4:return o=e.sent(),[2,Promise.reject(o)];case 5:return[3,10];case 6:n="voice"===c.options.messageType?{botAlias:this._config[u].alias,botName:u,contentType:"audio/x-l16; sample-rate=16000",inputStream:c.content,userId:t.identityId,accept:"audio/mpeg"}:{botAlias:this._config[u].alias,botName:u,contentType:"text/plain; charset=utf-8",inputStream:c.content,userId:t.identityId,accept:"audio/mpeg"},Vy.debug("postContent to lex",c),e.label=7;case 7:return e.trys.push([7,9,,10]),i=new xy(n),[4,this.lexRuntimeServiceClient.send(i)];case 8:return s=e.sent(),this.reportBotStatus(s,u),[2,s];case 9:return a=e.sent(),[2,Promise.reject(a)];case 10:return[2]}})})},zy.prototype.onComplete=function(e,t){if(!this._config[e])throw new ErrorEvent("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},zy);function zy(e){void 0===e&&(e={});var t=Fy.call(this,e)||this;return t._botsCompleteCallback={},t}var Hy=function(){return(Hy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ky=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},Gy=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Wy=new x.ConsoleLogger("Interactions");function $y(e){this._options=e,Wy.debug("Interactions Options",this._options),this._pluggables={},x.Amplify.register(this)}var Yy=new($y.prototype.getModuleName=function(){return"Interactions"},$y.prototype.configure=function(e){var t=this,n=e?e.Interactions||e:{};Wy.debug("configure Interactions",{opt:n}),this._options=Hy(Hy({bots:{}},n),n.Interactions);var r=this._options.aws_bots_config,o=this._options.bots;return!Object.keys(o).length&&r&&Array.isArray(r)&&r.forEach(function(e){t._options.bots[e.name]=e}),!this._pluggables.AWSLexProvider&&o&&Object.keys(o).map(function(e){return o[e]}).find(function(e){return!e.providerName||"AWSLexProvider"===e.providerName})&&(this._pluggables.AWSLexProvider=new qy),Object.keys(this._pluggables).map(function(e){t._pluggables[e].configure(t._options.bots)}),this._options},$y.prototype.addPluggable=function(e){if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Bot "+e.getProviderName()+" already plugged");return e.configure(this._options.bots),void(this._pluggables[e.getProviderName()]=e)}},$y.prototype.send=function(n,r){return Ky(this,void 0,void 0,function(){var t;return Gy(this,function(e){switch(e.label){case 0:if(!this._options.bots||!this._options.bots[n])throw new Error("Bot "+n+" does not exist");if(t=this._options.bots[n].providerName||"AWSLexProvider",!this._pluggables[t])throw new Error("Bot "+t+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[t].sendMessage(n,r)];case 1:return[2,e.sent()]}})})},$y.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},$y)(null),Jy=function(){return(Jy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Zy=new x.ConsoleLogger("AbstractXRProvider"),Qy=(Xy.prototype.configure=function(e){return void 0===e&&(e={}),this._config=Jy(Jy({},e),this._config),Zy.debug("configure "+this.getProviderName(),this._config),this.options},Xy.prototype.getCategory=function(){return"XR"},Object.defineProperty(Xy.prototype,"options",{get:function(){return Jy({},this._config)},enumerable:!0,configurable:!0}),Xy);function Xy(e){void 0===e&&(e={}),this._config=e}var ev,tv,nv=(ev=function(e,t){return(ev=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ev(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),rv=(tv=Error,nv(ov,tv),ov);function ov(){return null!==tv&&tv.apply(this,arguments)||this}var iv,sv=(nv(av,iv=rv),av);function av(){return null!==iv&&iv.apply(this,arguments)||this}var uv,cv=(nv(lv,uv=rv),lv);function lv(){return null!==uv&&uv.apply(this,arguments)||this}var pv,dv=(nv(hv,pv=rv),hv);function hv(){return null!==pv&&pv.apply(this,arguments)||this}var fv,mv=(nv(gv,fv=rv),gv);function gv(){return null!==fv&&fv.apply(this,arguments)||this}var yv,vv=(nv(bv,yv=rv),bv);function bv(){return null!==yv&&yv.apply(this,arguments)||this}var wv,Sv=(nv(_v,wv=rv),_v);function _v(){return null!==wv&&wv.apply(this,arguments)||this}var Cv,Ev,Iv=(Cv=function(e,t){return(Cv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Cv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Av=function(){return(Av=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Pv=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},kv=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Ov=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Tv=new x.ConsoleLogger("SumerianProvider"),xv=(Iv(Nv,Ev=Qy),Nv.prototype.getProviderName=function(){return"SumerianProvider"},Nv.prototype.loadScript=function(r){return Pv(this,void 0,void 0,function(){return kv(this,function(e){return[2,new Promise(function(t,n){var e=document.createElement("script");e.src=r,e.addEventListener("load",function(e){t()}),e.addEventListener("error",function(e){n(new Error("Failed to load script: "+r))}),document.head.appendChild(e)})]})})},Nv.prototype.loadScene=function(k,O,T){return Pv(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,S,_,C,E,I,A,P;return kv(this,function(e){switch(e.label){case 0:if(!k)throw s="No scene name passed into loadScene",Tv.error(s),new vv(s);if(!O)throw s="No dom element id passed into loadScene",Tv.error(s),new mv(s);if(!(t=document.getElementById(O)))throw s="DOM element id, "+O+" not found",Tv.error(s),new mv(s);if(!(n=this.getScene(k)).sceneConfig)throw s="No scene config configured for scene: "+k,Tv.error(s),new vv(s);if(r=n.sceneConfig.url,o=n.sceneConfig.sceneId,n.sceneConfig.hasOwnProperty("region"))i=n.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw s="No region configured for scene: "+k,Tv.error(s),new vv(s);i=this.options.region}a={region:i,customUserAgent:x.Constants.userAgent+"-SumerianScene"},u={headers:{"X-Amz-User-Agent":x.Constants.userAgent}},c=r,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,x.Credentials.get()];case 2:return l=e.sent(),a.credentials=l,p={secret_key:l.secretAccessKey,access_key:l.accessKeyId,session_token:l.sessionToken},d={region:i,service:"sumerian"},h=x.Signer.sign({method:"GET",url:r},p,d),u.headers=Av(Av({},u.headers),h.headers),c=h.url,[3,4];case 3:return e.sent(),Tv.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(c,u)];case 5:return[4,(f=e.sent()).json()];case 6:if(m=e.sent(),403===f.status)throw m.message?(Tv.error("Failure to authenticate user: "+m.message),new vv("Failure to authenticate user: "+m.message)):(Tv.error("Failure to authenticate user"),new vv("Failure to authenticate user"));return g=m.bundleData[o],[4,fetch(g.url,{headers:g.headers})];case 7:return[4,e.sent().json()];case 8:y=e.sent(),e.label=9;case 9:return e.trys.push([9,11,,12]),[4,this.loadScript(y[o].bootstrapperUrl)];case 10:return e.sent(),[3,12];case 11:throw v=e.sent(),Tv.error(v),new vv(v);case 12:return b=T.progressCallback?T.progressCallback:void 0,w=n.publishParamOverrides?n.publishParamOverrides:void 0,S={element:t,sceneId:o,sceneBundle:y,apiResponse:m,progressCallback:b,publishParamOverrides:w,awsSDKConfigOverride:a},[4,window.SumerianBootstrapper.loadScene(S)];case 13:_=e.sent(),n.sceneController=_,n.isLoaded=!0;try{for(C=Ov(_.sceneLoadWarnings),E=C.next();!E.done;E=C.next())I=E.value,Tv.warn("loadScene warning: "+I)}catch(e){A={error:e}}finally{try{E&&!E.done&&(P=C.return)&&P.call(C)}finally{if(A)throw A.error}}return[2]}})})},Nv.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},Nv.prototype.getScene=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw Tv.error(t),new sv(t)}if(!e)throw t="No scene name was passed",Tv.error(t),new cv(t);if(this.options.scenes[e])return this.options.scenes[e];throw t="Scene '"+e+"' is not configured",Tv.error(t),new cv(t)},Nv.prototype.getSceneController=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw Tv.error(t),new sv(t)}var n=this.options.scenes[e];if(!n)throw t="Scene '"+e+"' is not configured",Tv.error(t),new cv(t);var r=n.sceneController;if(r)return r;throw t="Scene controller for '"+e+"' has not been loaded",Tv.error(t),new dv(t)},Nv.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},Nv.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},Nv.prototype.start=function(e){this.getSceneController(e).start()},Nv.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},Nv.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},Nv.prototype.isMuted=function(e){return this.getSceneController(e).muted},Nv.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},Nv.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},Nv.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},Nv);function Nv(e){return void 0===e&&(e={}),Ev.call(this,e)||this}var Uv=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},Rv=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Mv=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},Dv=new x.ConsoleLogger("XR");function Fv(e){this._options=e,Dv.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new xv),x.Amplify.register(this)}var Lv=new(Fv.prototype.configure=function(e){var o=this,i=e?e.XR||e:{};return Dv.debug("configure XR",{opt:i}),this._options=Object.assign({},this._options,i),Object.entries(this._pluggables).map(function(e){var t=Mv(e,2),n=t[0],r=t[1];n!==o._defaultProvider||i[o._defaultProvider]?r.configure(o._options[n]):r.configure(o._options)}),this._options},Fv.prototype.addPluggable=function(t){return Uv(this,void 0,void 0,function(){return Rv(this,function(e){return t&&"XR"===t.getCategory()?[2,(this._pluggables[t.getProviderName()]=t).configure(this._options)]:[2]})})},Fv.prototype.loadScene=function(t,n,r,o){return void 0===r&&(r={}),void 0===o&&(o=this._defaultProvider),Uv(this,void 0,void 0,function(){return Rv(this,function(e){switch(e.label){case 0:if(!this._pluggables[o])throw new Sv("Provider '"+o+"' not configured");return[4,this._pluggables[o].loadScene(t,n,r)];case 1:return[2,e.sent()]}})})},Fv.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Sv("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},Fv.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Sv("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},Fv.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Sv("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},Fv.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Sv("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},Fv.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Sv("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},Fv.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Sv("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},Fv.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Sv("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},Fv.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Sv("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},Fv.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new Sv("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},Fv.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new Sv("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},Fv.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Sv("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},Fv)(null),jv=(Bv.prototype.auth=function(){return this._auth||ed},Bv.prototype.analytics=function(){return this._analytics||rc},Bv.prototype.storage=function(){return this._storage||Hh},Bv.prototype.api=function(){return this._api||Kg},Bv.prototype.interactions=function(){return this._interactions||Yy},Bv.prototype.cache=function(){return this._cache},Bv.prototype.pubsub=function(){return this._pubsub||xg},Bv.prototype.logger=function(e,t){return new this._logger(e,t)},Bv.prototype.xr=function(){return this._xr||Lv},Bv.prototype.i18n=function(){return this._i18n},Bv.prototype.authState=function(){return this._authState},Bv.prototype.setAuthState=function(e){this._authState.next(e)},Bv.decorators=[{type:h.Injectable}],Bv.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:["modules"]},{type:h.Optional}]}]},Bv);function Bv(e){void 0===e&&(e={}),this.modules=e,this._authState=new ke,this.authStateChange$=this._authState.asObservable();var t=e||Z;_s(this._authState,t.Auth),this._auth=t.Auth,this._analytics=t.Analytics,this._storage=t.Storage,this._api=t.API,this._cache=t.Cache,this._pubsub=t.PubSub,this._interactions=t.Interactions,this._xr=t.XR,this._i18n=x.I18n,this._logger=x.Logger}var Vv=(qv.prototype.ngOnInit=function(){var t=this;if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider");this.amplifyService.auth().currentAuthenticatedUser().then(function(e){"loading"===t.authState.state&&e&&t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){"loading"===t.authState.state&&t.amplifyService.setAuthState({state:"signIn",user:null})})},Object.defineProperty(qv.prototype,"data",{set:function(e){e.signUpConfig&&(this._signUpConfig=e.signUpConfig),e.hide&&(this.hide=e.hide),this._usernameAttributes=e.usernameAttributes||this._usernameAttributes||"username"},enumerable:!0,configurable:!0}),Object.defineProperty(qv.prototype,"signUpConfig",{set:function(e){this._signUpConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(qv.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e||"username"},enumerable:!0,configurable:!0}),qv.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){t.authState=e},function(){t.authState={state:"signIn",user:null}})},qv.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},qv.decorators=[{type:h.Component,args:[{selector:"amplify-authenticator-core",template:'\n  <div class="amplify-authenticator">\n    <amplify-auth-sign-in-core\n      *ngIf="!shouldHide(\'SignIn\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-in-core>\n\n    <amplify-auth-sign-up-core\n      *ngIf="!shouldHide(\'SignUp\')"\n      [authState]="authState"\n      [signUpConfig]="_signUpConfig"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-up-core>\n\n    <amplify-auth-confirm-sign-up-core\n      *ngIf="!shouldHide(\'ConfirmSignUp\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-up-core>\n\n    <amplify-auth-confirm-sign-in-core\n      *ngIf="!shouldHide(\'ConfirmSignIn\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-in-core>\n\n    <amplify-auth-forgot-password-core\n      *ngIf="!shouldHide(\'ForgotPassword\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-forgot-password-core>\n\n    <amplify-auth-greetings-core\n    *ngIf="!shouldHide(\'Greetings\')"\n    [authState]="authState"\n    [usernameAttributes]="_usernameAttributes"\n    ></amplify-auth-greetings-core>\n\n     <amplify-auth-require-new-password-core\n      *ngIf="!shouldHide(\'RequireNewPassword\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-require-new-password-core>\n  </div>\n'}]}],qv.ctorParameters=function(){return[{type:jv}]},qv.propDecorators={hide:[{type:h.Input}],data:[{type:h.Input}],signUpConfig:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},qv);function qv(e){this.amplifyService=e,this.authState={state:"loading",user:null},this._signUpConfig={},this._usernameAttributes="username",this.hide=[],this.subscribe()}var zv,Hv,Kv=(zv=function(e,t){return(zv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}zv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Gv=(Kv(Wv,Hv=Vv),Wv.decorators=[{type:h.Component,args:[{selector:"amplify-authenticator-ionic",template:'\n<div class="amplify-authenticator amplify-authenticator-ionic ">\n\n<amplify-auth-sign-in-ionic\n  *ngIf="!shouldHide(\'SignIn\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-in-ionic>\n\n<amplify-auth-sign-up-ionic\n  *ngIf="!shouldHide(\'SignUp\')"\n  [authState]="authState"\n  [signUpConfig]="_signUpConfig"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-up-ionic>\n\n<amplify-auth-confirm-sign-up-ionic\n  *ngIf="!shouldHide(\'ConfirmSignUp\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-confirm-sign-up-ionic>\n\n<amplify-auth-confirm-sign-in-ionic\n  *ngIf="!shouldHide(\'ConfirmSignIn\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-confirm-sign-in-ionic>\n\n<amplify-auth-forgot-password-ionic\n  *ngIf="!shouldHide(\'ForgotPassword\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-forgot-password-ionic>\n\n<amplify-auth-greetings-ionic\n  *ngIf="!shouldHide(\'Greetings\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n></amplify-auth-greetings-ionic>\n\n<amplify-auth-require-new-password-ionic\n  *ngIf="!shouldHide(\'RequireNewPassword\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-require-new-password-ionic>\n</div>\n'}]}],Wv.ctorParameters=function(){return[{type:jv}]},Wv);function Wv(e){var t=Hv.call(this,e)||this;return t.amplifyService=e,t}var $v=(Yv.prototype.ngOnInit=function(){this.loadComponent()},Yv.prototype.ngOnDestroy=function(){},Yv.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new ws(Gv,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}):new ws(Vv,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},Yv.decorators=[{type:h.Component,args:[{selector:"amplify-authenticator",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],Yv.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},Yv.propDecorators={framework:[{type:h.Input}],hide:[{type:h.Input}],signUpConfig:[{type:h.Input}],usernameAttributes:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[vs]}]},Yv);function Yv(e){this.componentFactoryResolver=e,this.hide=[],this.usernameAttributes="username"}var Jv="sumerian-scene-container",Zv="sumerian-scene",Qv="sumerian-scene-loading",Xv="sumerian-scene-loading-logo",eb="sumerian-scene-loading-scene-name",tb="sumerian-scene-loading-bar",nb="sumerian-scene-error-text",rb="sumerian-scene-bar",ob="sumerian-scene-actions",ib={section:"sign-in-section",headerSection:"sign-in-header-section",bodySection:"sign-in-body-section",footerSection:"sign-in-footer-section",usernameInput:"username-input",passwordInput:"sign-in-password-input",forgotPasswordLink:"sign-in-forgot-password-link",signInButton:"sign-in-sign-in-button",createAccountLink:"sign-in-create-account-link",signInError:"authenticator-error"},sb={section:"sign-up-section",headerSection:"sign-up-header-section",bodySection:"sign-up-body-section",nonPhoneNumberInput:"sign-up-non-phone-number-input",phoneNumberInput:"sign-up-phone-number-input",dialCodeSelect:"sign-up-dial-code-select",footerSection:"sign-up-footer-section",createAccountButton:"sign-up-create-account-button",signInLink:"sign-up-sign-in-link",signUpButton:"sign-up-sign-up-button",signInButton:"sign-up-sign-in-button",confirmButton:"sign-up-confirm-button"},ab={section:"require-new-password-section",headerSection:"require-new-password-header-section",footerSection:"require-new-password-footer-section",bodySection:"require-new-password-body-section",newPasswordInput:"require-new-password-new-password-input",backToSignInLink:"require-new-password-back-to-sign-in-link",submitButton:"require-new-password-submit-button"},ub={usernameInput:"username-input",emailInput:"email-input",phoneNumberInput:"phone-number-input",dialCodeSelect:"dial-code-select"},cb={signOutButton:"sign-out-button",signOutLink:"greeting-sign-out-link",navRight:"greetings-nav-right"},lb={section:"confirm-sign-up-section",headerSection:"confirm-sign-up-header-section",bodySection:"confirm-sign-up-body-section",usernameInput:"confirm-sign-up-username-input",confirmationCodeInput:"confirm-sign-up-confirmation-code-input",resendCodeLink:"confirm-sign-up-resend-code-link",confirmButton:"confirm-sign-up-confirm-button",backToSignInLink:"confirm-sign-up-back-to-sign-in-link"},pb={section:"confirm-sign-in-section",headerSection:"confirm-sign-in-header-section",bodySection:"confirm-sign-in-body-section",codeInput:"confirm-sign-in-code-input",confirmButton:"confirm-sign-in-confirm-button",backToSignInLink:"confirm-sign-in-back-to-sign-in-link"},db={section:"forgot-password-section",headerSection:"forgot-password-header-section",bodySection:"forgot-password-body-section",submitButton:"forgot-password-submit-button",sendCodeButton:"forgot-password-send-code-button",resendCodeLink:"forgot-password-resend-code-link",backToSignInLink:"forgot-password-back-to-sign-in-link",usernameInput:"username-input",codeInput:"forgot-password-code-input",newPasswordInput:"forgot-password-new-password-input"},hb='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+pb.section+'">\n    <div class="amplify-form-body" data-test="'+pb.bodySection+'">\n    <div class="amplify-form-header" data-test="'+pb.headerSection+'">{{ this.amplifyService.i18n().get(\'Confirm Sign in\') }}</div>\n      <div class="amplify-form-row" *ngIf="!shouldHide(\'SignIn\')">\n        <label class="amplify-input-label" for="code">\n          {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n        </label>\n        <input #code\n          (change)="setCode(code.value)"\n          (keyup)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          class="amplify-form-input"\n          type="text"\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n          data-test="'+pb.codeInput+'"\n        />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a \n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+pb.backToSignInLink+'"\n              >\n                {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button\n            class="amplify-form-button"\n            data-test="'+pb.confirmButton+'"\n            (click)="onConfirm()"\n            >\n              {{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n        </div>\n      </div>\n      </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',fb=(Object.defineProperty(mb.prototype,"data",{set:function(e){this.hide=e.hide?e.hide:this.hide,this._authState=e.authState,this._show="confirmSignIn"===e.authState.state},enumerable:!0,configurable:!0}),Object.defineProperty(mb.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignIn"===e.state},enumerable:!0,configurable:!0}),mb.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},mb.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},mb.prototype.setCode=function(e){this.code=e},mb.prototype.onConfirm=function(){var t=this,e=this._authState.user,n=e.challengeName,r="SOFTWARE_TOKEN_MFA"===n?n:null;this.amplifyService.auth().confirmSignIn(e,this.code,r).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){return t._setError(e)})},mb.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},mb.prototype.onAlertClose=function(){this._setError(null)},mb.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},mb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-in-core",template:hb}]}],mb.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},mb.propDecorators={data:[{type:h.Input}],authState:[{type:h.Input}],hide:[{type:h.Input}]},mb);function mb(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("ConfiSignInComponent")}var gb,yb,vb=(gb=function(e,t){return(gb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}gb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),bb='\n<div class="amplify-form-container" *ngIf="_show" data-test="'+pb.section+'">\n  <div class="amplify-form-body" data-test="'+pb.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+pb.headerSection+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Confirm your sign in code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+pb.codeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button expand="block" color="primary"\n          (click)="onConfirm()"\n          data-test="'+pb.confirmButton+'"\n        >{{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',wb=(vb(Sb,yb=fb),Sb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-in-ionic",template:bb}]}],Sb.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},Sb);function Sb(e){var t=yb.call(this,e)||this;return t.amplifyService=e,t}var _b=(Cb.prototype.ngOnInit=function(){this.loadComponent()},Cb.prototype.ngOnDestroy=function(){},Cb.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new ws(wb,{authState:this.authState,hide:this.hide}):new ws(fb,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},Cb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],Cb.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},Cb.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[vs]}]},Cb);function Cb(e){this.componentFactoryResolver=e,this.hide=[]}function Eb(e,t){return 0<e.filter(function(e){return e===t}).length}function Ib(e,t){return"+"+e+t.replace(/[-()]/g,"")}var Ab={email:"Email",phone_number:"Phone Number",username:"Username"},Pb='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+lb.section+'">\n  <div class="amplify-form-body" data-test="'+lb.bodySection+'">\n    <div\n      class="amplify-form-header"\n      data-test="'+lb.headerSection+'"\n    >\n      {{ this.amplifyService.i18n().get(\'Confirm Sign up\') }}</div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="amplifyUsername">\n        {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n      </label>\n      <input\n        #amplifyUsername\n        class="amplify-form-input"\n        type="text"\n        disabled\n        placeholder="{{ this.amplifyService.i18n().get(getUsernameLabel()) }}"\n        [value]="username"\n        data-test="'+lb.usernameInput+'"\n      />\n    </div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (change)="setCode(code.value)"\n        (keyup)="setCode(code.value)"\n        (keyup.enter)="onConfirm()"\n        class="amplify-form-input"\n        type="text"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n        data-test="'+lb.confirmationCodeInput+'"\n      />\n      <span class="amplify-form-action">{{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a class="amplify-form-link"\n            (click)="onResend()"\n            data-test="'+lb.resendCodeLink+'"\n          >{{ this.amplifyService.i18n().get(\'Resend Code\') }}</a></span>\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <div class="amplify-form-actions-left">\n          <a\n            class="amplify-form-link"\n            (click)="onSignIn()"\n            data-test="'+lb.backToSignInLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n          </a>\n        </div>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button\n          class="amplify-form-button"\n          (click)="onConfirm()"\n          data-test="'+lb.confirmButton+'"\n          >{{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n',kb=(Object.defineProperty(Ob.prototype,"data",{set:function(e){this.hide=e.hide?e.hide:this.hide,this._authState=e.authState,this._show="confirmSignUp"===e.authState.state,this.username=e.authState.user&&e.authState.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(Ob.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignUp"===e.state,this.username=e.user&&e.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(Ob.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Ob.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Ob.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Ob.prototype.setUsername=function(e){this.username=e},Ob.prototype.setCode=function(e){this.code=e},Ob.prototype.onConfirm=function(){var t=this;this.amplifyService.auth().confirmSignUp(this.username,this.code).then(function(){return t.logger.info("confirm success")}).catch(function(e){return t._setError(e)})},Ob.prototype.onResend=function(){var t=this;this.amplifyService.auth().resendSignUp(this.username).then(function(){return t.logger.info("code resent")}).catch(function(e){return t._setError(e)})},Ob.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},Ob.prototype.onAlertClose=function(){this._setError(null)},Ob.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},Ob.prototype.getUsernameLabel=function(){return Ab[this._usernameAttributes]||this._usernameAttributes},Ob.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-up-core",template:Pb}]}],Ob.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},Ob.propDecorators={data:[{type:h.Input}],hide:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},Ob);function Ob(e){this.amplifyService=e,this._usernameAttributes="username",this.hide=[],this.logger=this.amplifyService.logger("ConfirmSignUpComponent")}var Tb,xb,Nb=(Tb=function(e,t){return(Tb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Tb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ub='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+lb.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+lb.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+lb.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Confirm your sign up code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n        </ion-label>\n        <ion-input type="text"\n          class="amplify-form-input"\n          (input)="setUsername($event.target.value)"\n          [value]="username"\n          data-test="'+lb.usernameInput+'"\n        ></ion-input>\n      </ion-item>\n\n      <ion-item lines="none">\n        <ion-label  class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+lb.confirmationCodeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button\n          expand="block"\n          color="primary"\n          (click)="onConfirm()"\n          data-test="'+lb.confirmButton+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+lb.backToSignInLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onResend()"\n          data-test="'+lb.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',Rb=(Nb(Mb,xb=kb),Mb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-up-ionic",template:Ub}]}],Mb.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},Mb);function Mb(e){var t=xb.call(this,e)||this;return t.amplifyService=e,t}var Db,Fb,Lb=(jb.prototype.ngOnInit=function(){this.loadComponent()},jb.prototype.ngOnDestroy=function(){},jb.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new ws(Rb,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}):new ws(kb,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},jb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],jb.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},jb.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[vs]}]},jb);function jb(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}(Fb=Db=Db||{}).EMAIL="email",Fb.PHONE_NUMBER="phone_number",Fb.USERNAME="username";var Bb='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+ib.section+'">\n    <div class="amplify-form-body" data-test="'+ib.bodySection+'">\n      <div class="amplify-form-header" data-test="'+ib.headerSection+'">\n        {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n      </div>\n      <amplify-auth-username-field-core\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-core>\n      <div class="amplify-form-row amplify-signin-password">\n        <label class="amplify-input-label" for="passwordField">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </label>\n        <input #passwordField\n          (keyup)="setPassword(passwordField.value)"\n          (keyup.enter)="onSignIn()"\n          class="amplify-form-input"\n          type="password"\n          required\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your password\') }}"\n          data-test="'+ib.passwordInput+'"\n        />\n        <span class="amplify-form-action" *ngIf="!shouldHide(\'ForgotPassword\')">\n          {{ this.amplifyService.i18n().get(\'Forgot Password?\') }}\n          <a class="amplify-form-link"\n            (click)="onForgotPassword()"\n            data-test="'+ib.forgotPasswordLink+'"\n          >{{ this.amplifyService.i18n().get(\'Reset password\') }}</a>\n        </span>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            (click)="onSignIn()"\n            data-test="'+ib.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignUp\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'No account?\') }}\n            <a\n              class="amplify-form-link"\n              (click)="onSignUp()"\n              data-test="'+ib.createAccountLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Create account\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div\n        class="amplify-alert-message"\n        data-test="'+ib.signInError+'"\n        >\n          {{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Vb=(Object.defineProperty(qb.prototype,"data",{set:function(e){this.hide=e.hide?e.hide:this.hide,this._usernameAttributes=e.usernameAttributes,this._authState=e.authState,this._show=Eb(["signIn","signedOut","signedUp"],e.authState.state)},enumerable:!0,configurable:!0}),Object.defineProperty(qb.prototype,"authState",{set:function(e){this._authState=e,this._show=Eb(["signIn","signedOut","signedUp"],e.state),this.username=e.user&&e.user.username||"",this.email=e.user&&e.user.email||"",this.country_code=e.user&&e.user.country_code?e.user.country_code:this.country_code,this.local_phone_number=e.user&&e.user.local_phone_number||""},enumerable:!0,configurable:!0}),Object.defineProperty(qb.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),qb.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},qb.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},qb.prototype.setUsername=function(e){this.username=e},qb.prototype.setPassword=function(e){this.password=e},qb.prototype.onSignIn=function(){var t=this;this.amplifyService.auth().signIn(this.getSignInUsername(),this.password).then(function(e){"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?t.amplifyService.setAuthState({state:"confirmSignIn",user:e}):"NEW_PASSWORD_REQUIRED"===e.challengeName?t.amplifyService.setAuthState({state:"requireNewPassword",user:e}):"CUSTOM_CHALLENGE"===e.challengeName&&e.challengeParam&&"true"===e.challengeParam.trigger&&t.amplifyService.setAuthState({state:"customConfirmSignIn",user:e})}).catch(function(e){t._setError(e)})},qb.prototype.onAlertClose=function(){this._setError(null)},qb.prototype.getUserObj=function(){return this.username||this.email||this.local_phone_number?{username:this.username,email:this.email,local_phone_number:this.local_phone_number,courtry_code:this.country_code}:null},qb.prototype.onForgotPassword=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"forgotPassword",user:e})},qb.prototype.onSignUp=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"signUp",user:e})},qb.prototype._setError=function(e){e?(this.errorMessage=e.message||e,this.logger.error(this.errorMessage)):this.errorMessage=null},qb.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},qb.prototype.getSignInUsername=function(){switch(this._usernameAttributes){case Db.EMAIL:return this.email;case Db.PHONE_NUMBER:return Ib(this.country_code,this.local_phone_number);default:return this.username}},qb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-in-core",template:Bb}]}],qb.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},qb.propDecorators={data:[{type:h.Input}],hide:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},qb);function qb(e){this.amplifyService=e,this._usernameAttributes="username",this.local_phone_number="",this.country_code="1",this.email="",this.signInUsername="",this.hide=[],this.logger=this.amplifyService.logger("SignInComponent"),this.onUsernameFieldChanged=this.onUsernameFieldChanged.bind(this)}var zb,Hb,Kb=(zb=function(e,t){return(zb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}zb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Gb='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+ib.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+ib.bodySection+'">\n    <div class="amplify-form-header" data-test="'+ib.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n    </div>\n    <ion-list lines="none">\n      <amplify-auth-username-field-ionic\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-ionic>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label" for="password" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSignIn()"\n          data-test="'+ib.passwordInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignIn()"\n          data-test="'+ib.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</ion-button>\n      </div>\n\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'No account?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onSignUp()"\n            data-test="'+ib.createAccountLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Create account\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'ForgotPassword\')">\n          <a class="amplify-form-link" (click)="onForgotPassword()" data-test="'+ib.forgotPasswordLink+'">\n            {{ this.amplifyService.i18n().get(\'Reset Password\') }}\n          </a>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Wb=(Kb($b,Hb=Vb),$b.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-in-ionic",template:Gb}]}],$b.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},$b);function $b(e){var t=Hb.call(this,e)||this;return t.amplifyService=e,t}var Yb=(Jb.prototype.ngOnInit=function(){this.loadComponent()},Jb.prototype.ngOnDestroy=function(){},Jb.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework?new ws(Wb,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new ws(Vb,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},Jb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],Jb.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},Jb.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[vs]}]},Jb);function Jb(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var Zb=[{label:"Username",key:"username",required:!1,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:4}],Qb=[{label:"Email",key:"email",required:!0,type:"email",displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:3}],Xb=[{label:"Phone Number",key:"phone_number",required:!0,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3}],ew='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+sb.section+'">\n    <div class="amplify-form-body" data-test="'+sb.bodySection+'">\n      <div\n        class="amplify-form-header"\n        data-test="'+sb.headerSection+'"\n        >{{ this.amplifyService.i18n().get(this.header) }}</div>\n      <div class="amplify-form-row" *ngFor="let field of signUpFields">\n        <div *ngIf="field.key !== \'phone_number\'">\n          <label class="amplify-input-label">\n            {{ this.amplifyService.i18n().get(field.label) }}\n            <span *ngIf="field.required">*</span>\n          </label>\n          <input #{{field.key}}\n            class="amplify-form-input"\n            [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n            type={{field.type}}\n            [placeholder]="this.amplifyService.i18n().get(field.label)"\n            [(ngModel)]="user[field.key]"\n            name="field.key"\n            data-test="'+sb.nonPhoneNumberInput+'"\n            />\n            <div *ngIf="field.key === \'password\'" class="amplify-form-extra-details">\n              {{passwordPolicy}}\n            </div>\n        </div>\n        <div *ngIf="field.key === \'phone_number\'">\n          <amplify-auth-phone-field-core\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-core>\n        </div>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignIn\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n            <a class="amplify-form-link" (click)="onSignIn()" data-test="'+sb.signInLink+'">\n              {{ this.amplifyService.i18n().get(\'Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n          (click)="onSignUp()"\n          data-test="'+sb.createAccountButton+'"\n          >{{ this.amplifyService.i18n().get(\'Create Account\') }}</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',tw=(Object.defineProperty(nw.prototype,"data",{set:function(e){this._authState=e.authState,this._show="signUp"===e.authState.state,this._usernameAttributes=e.usernameAttributes,e.signUpConfig&&(this._signUpConfig=e.signUpConfig,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._usernameAttributes===Db.EMAIL?(this.signUpFields=Qb,this.defaultSignUpFields=Qb):this._usernameAttributes===Db.PHONE_NUMBER&&(this.signUpFields=Xb,this.defaultSignUpFields=Xb),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),Object.defineProperty(nw.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e,this._usernameAttributes===Db.EMAIL?(this.signUpFields=Qb,this.defaultSignUpFields=Qb):this._usernameAttributes===Db.PHONE_NUMBER&&(this.signUpFields=Xb,this.defaultSignUpFields=Xb)},enumerable:!0,configurable:!0}),Object.defineProperty(nw.prototype,"authState",{set:function(e){this._authState=e,this._show="signUp"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(nw.prototype,"signUpConfig",{set:function(e){e&&(this._signUpConfig=e,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),nw.prototype.ngOnInit=function(){this.amplifyService.auth()||this.logger.warn("Auth module not registered on AmplifyService provider"),this.sortFields()},nw.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},nw.prototype.onSignUp=function(){var r=this,e=this.validate();if(e&&0<e.length)return this._setError("The following fields need to be filled out: "+e.join(", "));this.user.attributes={},this.signUpFields.find(function(e){return"phone_number"===e.key})&&(this.user.phone_number=Ib(this.country_code,this.local_phone_number));var t=Object.keys(this.user),o=t.map(function(e){return r.user[e]});t.forEach(function(e,t){var n;"username"!==e&&"password"!==e&&"attributes"!==e&&(n=(r.needPrefix(e)?"custom:":"")+e,r.user.attributes[n]=o[t])});var n=!1;if(this.signUpFields.forEach(function(e){e.label===r.getUsernameLabel()&&(r.amplifyService.logger("Changing the username to the value of "+e.label,"DEBUG"),r.user.username=r.user.attributes[e.key]||r.user.username,n=!0)}),!n&&!this.user.username)throw new Error("Couldn't find the label: "+this.getUsernameLabel()+", in sign up fields according to usernameAttributes!");this.amplifyService.auth().signUp(this.user).then(function(e){var t=r.user.username;r.user={},r.onAlertClose(),r.amplifyService.setAuthState({state:"confirmSignUp",user:{username:t}})}).catch(function(e){return r._setError(e)})},nw.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},nw.prototype.needPrefix=function(t){var e=this.signUpFields.find(function(e){return e.key===t});return 0!==t.indexOf("custom:")?e.custom:(0===t.indexOf("custom:")&&!1===e.custom&&this.logger.warn("Custom prefix prepended to key but custom field flag is set to false"),null)},nw.prototype.onConfirmSignUp=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"confirmSignUp",user:{username:this.user.username}})},nw.prototype.sortFields=function(){var n=this;0<this.hiddenFields.length&&(this.defaultSignUpFields=this.defaultSignUpFields.filter(function(e){return!n.hiddenFields.includes(e.key)})),this._signUpConfig&&this._signUpConfig.signUpFields&&0<this._signUpConfig.signUpFields.length&&(this._signUpConfig.hideAllDefaults||this.defaultSignUpFields.forEach(function(t,e){-1===n.signUpFields.findIndex(function(e){return e.key===t.key})&&n.signUpFields.push(t)}),this.signUpFields.sort(function(e,t){return e.displayOrder&&t.displayOrder?e.displayOrder<t.displayOrder||!(e.displayOrder>t.displayOrder)&&e.key<t.key?-1:1:!e.displayOrder&&t.displayOrder?1:e.displayOrder&&!t.displayOrder?-1:e.displayOrder||t.displayOrder?void 0:e.key<t.key?-1:1}),this.signUpFields=this.removeHiddenFields())},nw.prototype.onAlertClose=function(){this._setError(null)},nw.prototype.removeHiddenFields=function(){return this.signUpFields.filter(function(e){return!e.displayOrder||-1!==e.displayOrder})},nw.prototype.validate=function(){var t=this,n=[];return this.signUpFields.map(function(e){"phone_number"!==e.key?e.required&&!t.user[e.key]?(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label))):e.invalid=!1:!e.required||t.country_code&&t.local_phone_number?e.invalid=!1:(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label)))}),n},nw.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},nw.prototype.getUsernameLabel=function(){return Ab[this._usernameAttributes]||this._usernameAttributes},nw.prototype.onPhoneFieldChanged=function(e){this.country_code=e.country_code,this.local_phone_number=e.local_phone_number},nw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-up-core",template:ew}]}],nw.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},nw.propDecorators={data:[{type:h.Input}],hide:[{type:h.Input}],usernameAttributes:[{type:h.Input}],authState:[{type:h.Input}],signUpConfig:[{type:h.Input}]},nw);function nw(e){this.amplifyService=e,this._usernameAttributes="username",this.user={},this.local_phone_number="",this.country_code="1",this.header="Create a new account",this.defaultSignUpFields=Zb,this.signUpFields=this.defaultSignUpFields,this.hiddenFields=[],this.hide=[],this.logger=this.amplifyService.logger("SignUpComponent")}var rw,ow,iw=(rw=function(e,t){return(rw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}rw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),sw='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+sb.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+sb.bodySection+'">\n    <div class="amplify-form-header" data-test="'+sb.headerSection+'">\n      {{ this.amplifyService.i18n().get(this.header) }}</div>\n    <ion-list lines="none">\n      <ion-item lines="none" *ngFor="let field of signUpFields">\n        <ion-label class="amplify-input-label"\n        position="stacked"\n        *ngIf="field.key !== \'phone_number\'"\n        >\n          {{ this.amplifyService.i18n().get(field.label) }}\n          <span *ngIf="field.required">*</span>\n        </ion-label>\n        <ion-input\n          [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n          *ngIf="field.key !== \'phone_number\'"\n          #{{field.key}}\n          type="text"\n          class="amplify-form-input"\n          type={{field.type}}\n          [placeholder]="this.amplifyService.i18n().get(field.label)"\n          (keyup)="setProp($event.target)"\n          name={{field.key}}\n          data-test="'+sb.nonPhoneNumberInput+'"\n        ></ion-input>\n        <ion-content *ngIf="field.key === \'phone_number\'" class="amplify-phone-ion-content">\n          <amplify-auth-phone-field-ionic\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-ionic>\n        </ion-content>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignUp()"\n          data-test="'+sb.createAccountButton+'"\n        >{{ this.amplifyService.i18n().get(\'Create Account\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup">\n          {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n          <a class="amplify-form-link" (click)="onSignIn()" data-test="'+sb.signInButton+'">\n            {{ this.amplifyService.i18n().get(\'Sign In\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'Have a code?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onConfirmSignUp()"\n            data-test="'+sb.confirmButton+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Confirm\') }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',aw=(iw(uw,ow=tw),uw.prototype.setProp=function(e){return this.user[e.name]=e.value},uw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-up-ionic",template:sw}]}],uw.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},uw);function uw(e){var t=ow.call(this,e)||this;return t.amplifyService=e,t}var cw=(lw.prototype.ngOnInit=function(){this.loadComponent()},lw.prototype.ngOnDestroy=function(){},lw.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new ws(aw,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}):new ws(tw,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},lw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],lw.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},lw.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],signUpConfig:[{type:h.Input}],usernameAttributes:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[vs]}]},lw);function lw(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var pw='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+ab.section+'">\n  <div class="amplify-form-body" data-test="'+ab.bodySection+'">\n  <div class="amplify-form-header" data-test="'+ab.headerSection+'">\n    {{ this.amplifyService.i18n().get(\'You are required to update your password\') }}\n  </div>\n  <div class="amplify-form-row">\n    <label class="amplify-input-label" for="password">\n      {{ this.amplifyService.i18n().get(\'Password *\') }}\n    </label>\n    <input #password\n      (keyup)="setPassword(password.value)"\n      (keyup.enter)="onSubmit()"\n      class="amplify-form-input"\n      type="password"\n      placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n      data-test="'+ab.newPasswordInput+'"\n    />\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <a class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+ab.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</a>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button class="amplify-form-button"\n          (click)="onSubmit()"\n          data-test="'+ab.submitButton+'"\n        >{{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n<div class="amplify-alert-body">\n  <span class="amplify-alert-icon">&#9888;</span>\n  <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n  <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n</div>\n</div>\n</div>\n',dw=(Object.defineProperty(hw.prototype,"authState",{set:function(e){this._authState=e,this._show="requireNewPassword"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(hw.prototype,"data",{set:function(e){this._authState=e.authState,this._show="requireNewPassword"===e.authState.state,this.hide=e.hide?e.hide:this.hide},enumerable:!0,configurable:!0}),hw.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},hw.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},hw.prototype.setPassword=function(e){this.password=e},hw.prototype.onSubmit=function(){var t=this,e=this._authState.user,n=e.challengeParam.requiredAttributes;this.amplifyService.auth().completeNewPassword(e,this.password,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},hw.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},hw.prototype.onAlertClose=function(){this._setError(null)},hw.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},hw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-require-new-password-core",template:pw}]}],hw.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},hw.propDecorators={authState:[{type:h.Input}],hide:[{type:h.Input}],data:[{type:h.Input}]},hw);function hw(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("RequireNewPasswordComponent")}var fw,mw,gw=(fw=function(e,t){return(fw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}fw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),yw='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+ab.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+ab.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+ab.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSubmit()"\n          data-test="'+ab.newPasswordInput+'"\n        ></ion-input>\n      </ion-item>\n\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSignIn()"\n          data-test="'+ab.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSubmit()"\n          data-test="'+ab.submitButton+'"\n        >Submit</ion-button>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ errorMessage }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',vw=(gw(bw,mw=dw),bw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-require-new-password-ionic",template:yw}]}],bw.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},bw);function bw(e){var t=mw.call(this,e)||this;return t.amplifyService=e,t}var ww=(Sw.prototype.ngOnInit=function(){this.loadComponent()},Sw.prototype.ngOnDestroy=function(){},Sw.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new ws(vw,{authState:this.authState,hide:this.hide}):new ws(dw,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},Sw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-require-new-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],Sw.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},Sw.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[vs]}]},Sw);function Sw(e){this.componentFactoryResolver=e,this.hide=[]}var _w='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <a class="amplify-form-link amplify-greeting-sign-out"\n      (click)="onSignOut()"\n      data-test="'+cb.signOutButton+"\"\n    >{{ this.amplifyService.i18n().get('Sign Out') }}</a>\n</div>\n",Cw=(Object.defineProperty(Ew.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Ew.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Ew.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){return t.setAuthState(e)})},Ew.prototype.setAuthState=function(e){this.authState=e,this.signedIn="signedIn"===e.state;var t="";e.user&&(t=this._usernameAttributes===Db.EMAIL?e.user.attributes?e.user.attributes.email:e.user.username:this._usernameAttributes===Db.PHONE_NUMBER&&e.user.attributes?e.user.attributes.phone_number:e.user.username),this.greeting=this.signedIn?this.amplifyService.i18n().get("Hello, {{username}}").replace("{{username}}",t):""},Ew.prototype.onSignOut=function(){this.amplifyService.auth().signOut()},Ew.decorators=[{type:h.Component,args:[{selector:"amplify-auth-greetings-core",template:_w}]}],Ew.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},Ew.propDecorators={authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},Ew);function Ew(e){this.amplifyService=e,this._usernameAttributes="username",this.logger=this.amplifyService.logger("GreetingComponent"),this.subscribe()}var Iw,Aw,Pw=(Iw=function(e,t){return(Iw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Iw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),kw='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <ion-button\n        class="amplify-greeting-sign-out"\n        size="small"\n        *ngIf="signedIn"\n        (click)="onSignOut()"\n        data-test="'+cb.signOutButton+"\"\n      >{{ this.amplifyService.i18n().get('Sign Out') }}</ion-button>\n</div>\n",Ow=(Pw(Tw,Aw=Cw),Tw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-greetings-ionic",template:kw}]}],Tw.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},Tw);function Tw(e){var t=Aw.call(this,e)||this;return t.amplifyService=e,t}var xw=(Nw.prototype.ngOnInit=function(){this.loadComponent()},Nw.prototype.ngOnDestroy=function(){},Nw.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new ws(Ow,{authState:this.authState,usernameAttributes:this.usernameAttributes}):new ws(Cw,{authState:this.authState,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},Nw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-greetings",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],Nw.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},Nw.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[vs]}]},Nw);function Nw(e){this.componentFactoryResolver=e,this.usernameAttributes="username"}var Uw='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+db.section+'">\n    <div class="amplify-form-body" data-test="'+db.bodySection+'">\n    <div class="amplify-form-header" data-test="'+db.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="!code_sent">\n      {{ this.amplifyService.i18n().get(\'You will receive a verification code\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="code_sent">\n      {{ this.amplifyService.i18n().get(\'Enter the code you received and set a new password\') }}\n    </div>\n    <amplify-auth-username-field-core\n      *ngIf="!code_sent"\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-core>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (keyup)="setCode(code.value)"\n        class="amplify-form-input"\n        type="text"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter code\') }}"\n        data-test="'+db.codeInput+'"\n      />\n      </div>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="password">\n        {{ this.amplifyService.i18n().get(\'New Password *\') }}\n      </label>\n      <input #password\n        (keyup)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        class="amplify-form-input"\n        type="password"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n        data-test="'+db.newPasswordInput+'"\n      />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            *ngIf="!code_sent"\n            (click)="onSend()"\n            data-test="'+db.sendCodeButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n          <button class="amplify-form-button"\n            *ngIf="code_sent"\n            (click)="onSubmit()"\n            data-test="'+db.submitButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Verify\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a\n              *ngIf="code_sent"\n              class="amplify-form-link"\n              (click)="onSend()"\n              data-test="'+db.resendCodeLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Resend Code\') }}\n            </a>\n            <a\n              *ngIf="!code_sent"\n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+db.backToSignInLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Rw=(Object.defineProperty(Mw.prototype,"data",{set:function(e){this._authState=e.authState,this._show="forgotPassword"===e.authState.state,this._usernameAttributes=e.usernameAttributes,this.hide=e.hide?e.hide:this.hide,this.username=e.authState.user&&e.authState.user.username?e.authState.user.username:""},enumerable:!0,configurable:!0}),Mw.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Object.defineProperty(Mw.prototype,"authState",{set:function(e){this._authState=e,this._show="forgotPassword"===e.state,this.email=e.user&&e.user.email?e.user.email:"",this.country_code=e.user&&e.user.contry_code?e.user.country_code:"1",this.local_phone_number=e.user&&e.user.local_phone_number?e.user.local_phone_number:"",this.username=e.user&&e.user.username?e.user.username:""},enumerable:!0,configurable:!0}),Mw.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Object.defineProperty(Mw.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Mw.prototype.setCode=function(e){this.code=e},Mw.prototype.setPassword=function(e){this.password=e},Mw.prototype.getforgotPwUsername=function(){switch(this._usernameAttributes){case Db.EMAIL:return this.email;case Db.PHONE_NUMBER:return Ib(this.country_code,this.local_phone_number);default:return this.username}},Mw.prototype.onSend=function(){var t=this,e=this.getforgotPwUsername();e?this.amplifyService.auth().forgotPassword(e).then(function(){t.code_sent=!0}).catch(function(e){t._setError(e),t.code_sent=!1}):this.errorMessage="Username cannot be empty"},Mw.prototype.onSubmit=function(){var t=this;this.amplifyService.auth().forgotPasswordSubmit(this.getforgotPwUsername(),this.code,this.password).then(function(){var e={username:t.username};t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},Mw.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},Mw.prototype.onAlertClose=function(){this._setError(null)},Mw.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},Mw.prototype.getUsernameLabel=function(){return Ab[this._usernameAttributes]||this._usernameAttributes},Mw.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},Mw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-forgot-password-core",template:Uw}]}],Mw.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},Mw.propDecorators={data:[{type:h.Input}],hide:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},Mw);function Mw(e){this.amplifyService=e,this._usernameAttributes="username",this.code_sent=!1,this.country_code="1",this.hide=[],this.logger=this.amplifyService.logger("ForgotPasswordComponent")}var Dw,Fw,Lw=(Dw=function(e,t){return(Dw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Dw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),jw='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+db.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+db.bodySection+'">\n  <div\n    class="amplify-form-header amplify-form-header-ionic"\n    data-test="'+db.headerSection+'"\n    >\n    {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n  </div>\n  <div class="amplify-form-text" *ngIf="!code_sent">\n    {{ this.amplifyService.i18n().get(\'You will receive a verification code to reset your password\') }}\n  </div>\n\n  <ion-list>\n    <amplify-auth-username-field-ionic\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-ionic>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Code *\') }}\n      </ion-label>\n      <ion-input\n        #code\n        type="text"\n        class="amplify-form-input"\n        (input)="setCode(code.value)"\n        data-test="'+db.codeInput+'"\n      ></ion-input>\n    </ion-item>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Password *\') }}\n      </ion-label>\n      <ion-input\n        #password\n        type="password"\n        class="amplify-form-input"\n        (input)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        data-test="'+db.newPasswordInput+'"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n  <div class="amplify-form-actions">\n    <div>\n      <ion-button expand="block" color="primary"\n        (click)="onSend()"\n        *ngIf="!code_sent"\n        data-test="'+db.submitButton+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Submit\') }}</ion-button>\n      <ion-button expand="block" color="primary"\n      *ngIf="code_sent"\n      (click)="onSubmit()"\n      >{{ this.amplifyService.i18n().get(\'Verify\') }}</ion-button>\n    </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a class="amplify-form-link" (click)="onSignIn()">\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSend()"\n          data-test="'+db.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',Bw=(Lw(Vw,Fw=Rw),Vw.prototype.onCodeChange=function(e){this.country_code=e},Vw.prototype.onNumberChange=function(e){this.local_phone_number=e},Vw.prototype.setUsername=function(e){this.username=e},Vw.prototype.setEmail=function(e){this.email=e},Vw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-forgot-password-ionic",template:jw}]}],Vw.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},Vw);function Vw(e){var t=Fw.call(this,e)||this;return t.amplifyService=e,t}var qw=(zw.prototype.ngOnInit=function(){this.loadComponent()},zw.prototype.ngOnDestroy=function(){},zw.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new ws(Bw,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new ws(Rw,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},zw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-forgot-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],zw.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},zw.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[vs]}]},zw);function zw(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var Hw=function(){return(Hw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Kw='\n<div class="amplify-amplify-form-row amplify-signin-username">\n    <div *ngIf="this._usernameAttributes === \'email\'">\n        <label class="amplify-input-label" for="emailField"> {{ this.amplifyService.i18n().get(\'Email\') }} *</label>\n        <input\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setEmail($event.target.value)"\n            data-test="'+ub.emailInput+'"\n        />\n    </div>\n    <div *ngIf="this._usernameAttributes === \'phone_number\'">\n        <amplify-auth-phone-field-core\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-core>\n    </div>\n    <div *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <label class="amplify-input-label" for="usernameField"> {{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</label>\n        <input\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            value="{{this.username}}"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setUsername($event.target.value)"\n            data-test="'+ub.usernameInput+'"\n        />\n    </div>\n</div>\n',Gw=(Object.defineProperty(Ww.prototype,"data",{set:function(e){this._usernameAttributes=e.usernameAttributes,this._placeholder=e.placeholder},enumerable:!0,configurable:!0}),Object.defineProperty(Ww.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Object.defineProperty(Ww.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),Ww.prototype.ngOnInit=function(){var e,t;window&&window.location&&window.location.search&&"email"!==this._usernameAttributes&&"phone_number"!==this._usernameAttributes&&(t=(e=new URLSearchParams(window.location.search))?e.get("username"):void 0,this.setUsername(t),this.username=t)},Ww.prototype.ngOnDestroy=function(){},Ww.prototype.setUsername=function(e){this.usernameFieldChanged.emit({username:e})},Ww.prototype.setEmail=function(e){this.usernameFieldChanged.emit({email:e})},Ww.prototype.getUsernameLabel=function(){return Ab[this._usernameAttributes]||this._usernameAttributes},Ww.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get(""+this.getUsernameLabel()||this._placeholder)},Ww.prototype.onPhoneFieldChanged=function(e){this.usernameFieldChanged.emit(Hw({},e))},Ww.decorators=[{type:h.Component,args:[{selector:"amplify-auth-username-field-core",template:Kw}]}],Ww.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},Ww.propDecorators={data:[{type:h.Input}],usernameAttributes:[{type:h.Input}],placeholder:[{type:h.Input}],usernameFieldChanged:[{type:h.Output}]},Ww);function Ww(e){this.amplifyService=e,this._usernameAttributes=Db.USERNAME,this._placeholder="",this.usernameFieldChanged=new h.EventEmitter,this.onPhoneFieldChanged=this.onPhoneFieldChanged.bind(this)}var $w=[{countryCode:"US",value:"1",label:"USA (+1)"},{countryCode:"GB",value:"44",label:"UK (+44)"},{countryCode:"DZ",value:"213",label:"Algeria (+213)"},{countryCode:"AD",value:"376",label:"Andorra (+376)"},{countryCode:"AO",value:"244",label:"Angola (+244)"},{countryCode:"AI",value:"1264",label:"Anguilla (+1264)"},{countryCode:"AG",value:"1268",label:"Antigua & Barbuda (+1268)"},{countryCode:"AR",value:"54",label:"Argentina (+54)"},{countryCode:"AM",value:"374",label:"Armenia (+374)"},{countryCode:"AW",value:"297",label:"Aruba (+297)"},{countryCode:"AU",value:"61",label:"Australia (+61)"},{countryCode:"AT",value:"43",label:"Austria (+43)"},{countryCode:"AZ",value:"994",label:"Azerbaijan (+994)"},{countryCode:"BS",value:"1242",label:"Bahamas (+1242)"},{countryCode:"BH",value:"973",label:"Bahrain (+973)"},{countryCode:"BD",value:"880",label:"Bangladesh (+880)"},{countryCode:"BB",value:"1246",label:"Barbados (+1246)"},{countryCode:"BY",value:"375",label:"Belarus (+375)"},{countryCode:"BE",value:"32",label:"Belgium (+32)"},{countryCode:"BZ",value:"501",label:"Belize (+501)"},{countryCode:"BJ",value:"229",label:"Benin (+229)"},{countryCode:"BM",value:"1441",label:"Bermuda (+1441)"},{countryCode:"BT",value:"975",label:"Bhutan (+975)"},{countryCode:"BO",value:"591",label:"Bolivia (+591)"},{countryCode:"BA",value:"387",label:"Bosnia Herzegovina (+387)"},{countryCode:"BW",value:"267",label:"Botswana (+267)"},{countryCode:"BR",value:"55",label:"Brazil (+55)"},{countryCode:"BN",value:"673",label:"Brunei (+673)"},{countryCode:"BG",value:"359",label:"Bulgaria (+359)"},{countryCode:"BF",value:"226",label:"Burkina Faso (+226)"},{countryCode:"BI",value:"257",label:"Burundi (+257)"},{countryCode:"KH",value:"855",label:"Cambodia (+855)"},{countryCode:"CM",value:"237",label:"Cameroon (+237)"},{countryCode:"CA",value:"1",label:"Canada (+1)"},{countryCode:"CV",value:"238",label:"Cape Verde Islands (+238)"},{countryCode:"KY",value:"1345",label:"Cayman Islands (+1345)"},{countryCode:"CF",value:"236",label:"Central African Republic (+236)"},{countryCode:"CL",value:"56",label:"Chile (+56)"},{countryCode:"CN",value:"86",label:"China (+86)"},{countryCode:"CO",value:"57",label:"Colombia (+57)"},{countryCode:"KM",value:"269",label:"Comoros (+269)"},{countryCode:"CG",value:"242",label:"Congo (+242)"},{countryCode:"CK",value:"682",label:"Cook Islands (+682)"},{countryCode:"CR",value:"506",label:"Costa Rica (+506)"},{countryCode:"HR",value:"385",label:"Croatia (+385)"},{countryCode:"CU",value:"53",label:"Cuba (+53)"},{countryCode:"CW",value:"599",label:"Curacao (+599)"},{countryCode:"CY",value:"90392",label:"Cyprus North (+90392)"},{countryCode:"CY",value:"357",label:"Cyprus South (+357)"},{countryCode:"CZ",value:"420",label:"Czech Republic (+420)"},{countryCode:"DK",value:"45",label:"Denmark (+45)"},{countryCode:"DJ",value:"253",label:"Djibouti (+253)"},{countryCode:"DM",value:"1809",label:"Dominica (+1809)"},{countryCode:"DO",value:"1809",label:"Dominican Republic (+1809)"},{countryCode:"EC",value:"593",label:"Ecuador (+593)"},{countryCode:"EG",value:"20",label:"Egypt (+20)"},{countryCode:"SV",value:"503",label:"El Salvador (+503)"},{countryCode:"GQ",value:"240",label:"Equatorial Guinea (+240)"},{countryCode:"ER",value:"291",label:"Eritrea (+291)"},{countryCode:"EE",value:"372",label:"Estonia (+372)"},{countryCode:"ET",value:"251",label:"Ethiopia (+251)"},{countryCode:"FK",value:"500",label:"Falkland Islands (+500)"},{countryCode:"FO",value:"298",label:"Faroe Islands (+298)"},{countryCode:"FJ",value:"679",label:"Fiji (+679)"},{countryCode:"FI",value:"358",label:"Finland (+358)"},{countryCode:"FR",value:"33",label:"France (+33)"},{countryCode:"GF",value:"594",label:"French Guiana (+594)"},{countryCode:"PF",value:"689",label:"French Polynesia (+689)"},{countryCode:"GA",value:"241",label:"Gabon (+241)"},{countryCode:"GM",value:"220",label:"Gambia (+220)"},{countryCode:"GE",value:"7880",label:"Georgia (+7880)"},{countryCode:"DE",value:"49",label:"Germany (+49)"},{countryCode:"GH",value:"233",label:"Ghana (+233)"},{countryCode:"GI",value:"350",label:"Gibraltar (+350)"},{countryCode:"GR",value:"30",label:"Greece (+30)"},{countryCode:"GL",value:"299",label:"Greenland (+299)"},{countryCode:"GD",value:"1473",label:"Grenada (+1473)"},{countryCode:"GP",value:"590",label:"Guadeloupe (+590)"},{countryCode:"GU",value:"671",label:"Guam (+671)"},{countryCode:"GT",value:"502",label:"Guatemala (+502)"},{countryCode:"GN",value:"224",label:"Guinea (+224)"},{countryCode:"GW",value:"245",label:"Guinea - Bissau (+245)"},{countryCode:"GY",value:"592",label:"Guyana (+592)"},{countryCode:"HT",value:"509",label:"Haiti (+509)"},{countryCode:"HN",value:"504",label:"Honduras (+504)"},{countryCode:"HK",value:"852",label:"Hong Kong (+852)"},{countryCode:"HU",value:"36",label:"Hungary (+36)"},{countryCode:"IS",value:"354",label:"Iceland (+354)"},{countryCode:"IN",value:"91",label:"India (+91)"},{countryCode:"ID",value:"62",label:"Indonesia (+62)"},{countryCode:"IR",value:"98",label:"Iran (+98)"},{countryCode:"IQ",value:"964",label:"Iraq (+964)"},{countryCode:"IE",value:"353",label:"Ireland (+353)"},{countryCode:"IL",value:"972",label:"Israel (+972)"},{countryCode:"IT",value:"39",label:"Italy (+39)"},{countryCode:"JM",value:"1876",label:"Jamaica (+1876)"},{countryCode:"JP",value:"81",label:"Japan (+81)"},{countryCode:"JO",value:"962",label:"Jordan (+962)"},{countryCode:"KZ",value:"7",label:"Kazakhstan (+7)"},{countryCode:"KE",value:"254",label:"Kenya (+254)"},{countryCode:"KI",value:"686",label:"Kiribati (+686)"},{countryCode:"KP",value:"850",label:"Korea North (+850)"},{countryCode:"KR",value:"82",label:"Korea South (+82)"},{countryCode:"KW",value:"965",label:"Kuwait (+965)"},{countryCode:"KG",value:"996",label:"Kyrgyzstan (+996)"},{countryCode:"LA",value:"856",label:"Laos (+856)"},{countryCode:"LV",value:"371",label:"Latvia (+371)"},{countryCode:"LB",value:"961",label:"Lebanon (+961)"},{countryCode:"LS",value:"266",label:"Lesotho (+266)"},{countryCode:"LR",value:"231",label:"Liberia (+231)"},{countryCode:"LY",value:"218",label:"Libya (+218)"},{countryCode:"LI",value:"417",label:"Liechtenstein (+417)"},{countryCode:"LT",value:"370",label:"Lithuania (+370)"},{countryCode:"LU",value:"352",label:"Luxembourg (+352)"},{countryCode:"MO",value:"853",label:"Macao (+853)"},{countryCode:"MK",value:"389",label:"Macedonia (+389)"},{countryCode:"MG",value:"261",label:"Madagascar (+261)"},{countryCode:"MW",value:"265",label:"Malawi (+265)"},{countryCode:"MY",value:"60",label:"Malaysia (+60)"},{countryCode:"MV",value:"960",label:"Maldives (+960)"},{countryCode:"ML",value:"223",label:"Mali (+223)"},{countryCode:"MT",value:"356",label:"Malta (+356)"},{countryCode:"MH",value:"692",label:"Marshall Islands (+692)"},{countryCode:"MQ",value:"596",label:"Martinique (+596)"},{countryCode:"MR",value:"222",label:"Mauritania (+222)"},{countryCode:"YT",value:"269",label:"Mayotte (+269)"},{countryCode:"MX",value:"52",label:"Mexico (+52)"},{countryCode:"FM",value:"691",label:"Micronesia (+691)"},{countryCode:"MD",value:"373",label:"Moldova (+373)"},{countryCode:"MC",value:"377",label:"Monaco (+377)"},{countryCode:"MN",value:"976",label:"Mongolia (+976)"},{countryCode:"MS",value:"1664",label:"Montserrat (+1664)"},{countryCode:"MA",value:"212",label:"Morocco (+212)"},{countryCode:"MZ",value:"258",label:"Mozambique (+258)"},{countryCode:"MN",value:"95",label:"Myanmar (+95)"},{countryCode:"NA",value:"264",label:"Namibia (+264)"},{countryCode:"NR",value:"674",label:"Nauru (+674)"},{countryCode:"NP",value:"977",label:"Nepal (+977)"},{countryCode:"NL",value:"31",label:"Netherlands (+31)"},{countryCode:"NC",value:"687",label:"New Caledonia (+687)"},{countryCode:"NZ",value:"64",label:"New Zealand (+64)"},{countryCode:"NI",value:"505",label:"Nicaragua (+505)"},{countryCode:"NE",value:"227",label:"Niger (+227)"},{countryCode:"NG",value:"234",label:"Nigeria (+234)"},{countryCode:"NU",value:"683",label:"Niue (+683)"},{countryCode:"NF",value:"672",label:"Norfolk Islands (+672)"},{countryCode:"NP",value:"670",label:"Northern Marianas (+670)"},{countryCode:"NO",value:"47",label:"Norway (+47)"},{countryCode:"OM",value:"968",label:"Oman (+968)"},{countryCode:"PW",value:"680",label:"Palau (+680)"},{countryCode:"PA",value:"507",label:"Panama (+507)"},{countryCode:"PG",value:"675",label:"Papua New Guinea (+675)"},{countryCode:"PY",value:"595",label:"Paraguay (+595)"},{countryCode:"PE",value:"51",label:"Peru (+51)"},{countryCode:"PH",value:"63",label:"Philippines (+63)"},{countryCode:"PL",value:"48",label:"Poland (+48)"},{countryCode:"PT",value:"351",label:"Portugal (+351)"},{countryCode:"PR",value:"1787",label:"Puerto Rico (+1787)"},{countryCode:"QA",value:"974",label:"Qatar (+974)"},{countryCode:"RE",value:"262",label:"Reunion (+262)"},{countryCode:"RO",value:"40",label:"Romania (+40)"},{countryCode:"RU",value:"7",label:"Russia (+7)"},{countryCode:"RW",value:"250",label:"Rwanda (+250)"},{countryCode:"SM",value:"378",label:"San Marino (+378)"},{countryCode:"ST",value:"239",label:"Sao Tome & Principe (+239)"},{countryCode:"SA",value:"966",label:"Saudi Arabia (+966)"},{countryCode:"SN",value:"221",label:"Senegal (+221)"},{countryCode:"CS",value:"381",label:"Serbia (+381)"},{countryCode:"SC",value:"248",label:"Seychelles (+248)"},{countryCode:"SL",value:"232",label:"Sierra Leone (+232)"},{countryCode:"SX",value:"1",label:"Sint Maarten (+1)"},{countryCode:"SG",value:"65",label:"Singapore (+65)"},{countryCode:"SK",value:"421",label:"Slovak Republic (+421)"},{countryCode:"SI",value:"386",label:"Slovenia (+386)"},{countryCode:"SB",value:"677",label:"Solomon Islands (+677)"},{countryCode:"SO",value:"252",label:"Somalia (+252)"},{countryCode:"ZA",value:"27",label:"South Africa (+27)"},{countryCode:"ES",value:"34",label:"Spain (+34)"},{countryCode:"LK",value:"94",label:"Sri Lanka (+94)"},{countryCode:"SH",value:"290",label:"St. Helena (+290)"},{countryCode:"KN",value:"1869",label:"St. Kitts (+1869)"},{countryCode:"SC",value:"1758",label:"St. Lucia (+1758)"},{countryCode:"SD",value:"249",label:"Sudan (+249)"},{countryCode:"SR",value:"597",label:"Suriname (+597)"},{countryCode:"SZ",value:"268",label:"Swaziland (+268)"},{countryCode:"SE",value:"46",label:"Sweden (+46)"},{countryCode:"CH",value:"41",label:"Switzerland (+41)"},{countryCode:"SI",value:"963",label:"Syria (+963)"},{countryCode:"TW",value:"886",label:"Taiwan (+886)"},{countryCode:"TJ",value:"7",label:"Tajikstan (+7)"},{countryCode:"TH",value:"66",label:"Thailand (+66)"},{countryCode:"TG",value:"228",label:"Togo (+228)"},{countryCode:"TO",value:"676",label:"Tonga (+676)"},{countryCode:"TT",value:"1868",label:"Trinidad & Tobago (+1868)"},{countryCode:"TN",value:"216",label:"Tunisia (+216)"},{countryCode:"TR",value:"90",label:"Turkey (+90)"},{countryCode:"TM",value:"7",label:"Turkmenistan (+7)"},{countryCode:"TM",value:"993",label:"Turkmenistan (+993)"},{countryCode:"TC",value:"1649",label:"Turks & Caicos Islands (+1649)"},{countryCode:"TV",value:"688",label:"Tuvalu (+688)"},{countryCode:"UG",value:"256",label:"Uganda (+256)"},{countryCode:"UA",value:"380",label:"Ukraine (+380)"},{countryCode:"AE",value:"971",label:"United Arab Emirates (+971)"},{countryCode:"UY",value:"598",label:"Uruguay (+598)"},{countryCode:"UZ",value:"7",label:"Uzbekistan (+7)"},{countryCode:"VU",value:"678",label:"Vanuatu (+678)"},{countryCode:"VA",value:"379",label:"Vatican City (+379)"},{countryCode:"VE",value:"58",label:"Venezuela (+58)"},{countryCode:"VN",value:"84",label:"Vietnam (+84)"},{countryCode:"VG",value:"84",label:"Virgin Islands - British (+1284)"},{countryCode:"VI",value:"84",label:"Virgin Islands - US (+1340)"},{countryCode:"WF",value:"681",label:"Wallis and Futuna (+681)"},{countryCode:"YE",value:"969",label:"Yemen (North) (+969)"},{countryCode:"YE",value:"967",label:"Yemen (South) (+967)"},{countryCode:"ZM",value:"260",label:"Zambia (+260)"},{countryCode:"ZW",value:"263",label:"Zimbabwe (+263)"}],Yw='\n<div>\n    <label class="amplify-input-label" for="localPhoneNumberField">\n        {{ this.amplifyService.i18n().get(this._label) }}\n        <span *ngIf="_required">*</span>\n    </label>\n    <div class="amplify-input-group">\n        <div class="amplify-input-group-item">\n            <select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [(ngModel)]="_country_code"\n            (change)="setCountryCode($event.target.value)"\n            data-test="'+ub.dialCodeSelect+'"\n            >\n            <option *ngFor="let country of _countries"\n                value={{country.value}}>\n                {{country.label}}\n            </option>\n            </select>\n        </div>\n        <div class="amplify-input-group-item">\n            <input\n                #localPhoneNumberField\n                class="amplify-form-input"\n                placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n                name="local_phone_number"\n                type="tel"\n                (keyup)="setLocalPhoneNumber($event.target.value)"\n                data-test="'+ub.phoneNumberInput+'"\n            />\n        </div>\n    </div>\n</div>\n',Jw=(Object.defineProperty(Zw.prototype,"data",{set:function(e){this._placeholder=e.placeholder||this._placeholder,this._label=e.label||this._label,this._country_code=e.defaultCountryCode||this._country_code,this._required=void 0===e.required?this._required:e.required},enumerable:!0,configurable:!0}),Object.defineProperty(Zw.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(Zw.prototype,"label",{set:function(e){this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(Zw.prototype,"required",{set:function(e){this._required=e},enumerable:!0,configurable:!0}),Object.defineProperty(Zw.prototype,"defaultCountryCode",{set:function(e){this._country_code=e},enumerable:!0,configurable:!0}),Zw.prototype.ngOnInit=function(){},Zw.prototype.ngOnDestroy=function(){},Zw.prototype.setCountryCode=function(e){this._country_code=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},Zw.prototype.setLocalPhoneNumber=function(e){this._local_phone_number=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},Zw.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get("Enter your phone number")},Zw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-phone-field-core",template:Yw}]}],Zw.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},Zw.propDecorators={data:[{type:h.Input}],placeholder:[{type:h.Input}],label:[{type:h.Input}],required:[{type:h.Input}],defaultCountryCode:[{type:h.Input}],phoneFieldChanged:[{type:h.Output}]},Zw);function Zw(e){this.amplifyService=e,this._placeholder="",this._label="Phone Number",this._required=!0,this._country_code="1",this._local_phone_number="",this.phoneFieldChanged=new h.EventEmitter,this._countries=$w}var Qw=(Xw.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getList(this._path,this._options)},Xw.prototype.onImageSelected=function(e){this.selected.emit(e)},Object.defineProperty(Xw.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(Xw.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(Xw.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),Xw.prototype.getList=function(e,t){var n=this;e&&this.amplifyService.storage().list(e,t).then(function(e){n.list=e.map(function(e){return{path:e.key}})}).catch(function(e){return console.error(e)})},Xw.decorators=[{type:h.Component,args:[{selector:"amplify-s3-album-core",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      [options]="_options"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],Xw.ctorParameters=function(){return[{type:jv}]},Xw.propDecorators={selected:[{type:h.Output}],data:[{type:h.Input}],path:[{type:h.Input}],options:[{type:h.Input}]},Xw);function Xw(e){this.amplifyService=e,this._options={},this.selected=new h.EventEmitter,this.logger=this.amplifyService.logger("S3AlbumComponent")}var eS,tS,nS=(eS=function(e,t){return(eS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}eS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),rS=(nS(oS,tS=Qw),oS.decorators=[{type:h.Component,args:[{selector:"amplify-s3-album-ionic",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],oS.ctorParameters=function(){return[{type:jv}]},oS);function oS(e){var t=tS.call(this,e)||this;return t.amplifyService=e,t}var iS=(sS.prototype.ngOnInit=function(){this.loadComponent()},sS.prototype.ngOnDestroy=function(){},sS.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new ws(rS,{path:this.path,options:this.options}):new ws(Qw,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();var o=r.createComponent(n);o.instance.data=e.data,o.instance.selected.subscribe(function(e){t.selected.emit(e)})},sS.decorators=[{type:h.Component,args:[{selector:"amplify-s3-album",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],sS.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},sS.propDecorators={framework:[{type:h.Input}],path:[{type:h.Input}],options:[{type:h.Input}],selected:[{type:h.Output}],componentHost:[{type:h.ViewChild,args:[vs]}]},sS);function sS(e){this.componentFactoryResolver=e,this.selected=new h.EventEmitter}var aS=(Object.defineProperty(uS.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(uS.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(uS.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),uS.prototype.ngOnInit=function(){if(this._path){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getImage(this._path,this._options)}},uS.prototype.onImageClicked=function(){this.selected.emit(this.url)},uS.prototype.getImage=function(e,t){var n=this;this.amplifyService.storage().get(e,t).then(function(e){return n.url=e}).catch(function(e){return console.error(e)})},uS.decorators=[{type:h.Component,args:[{selector:"amplify-s3-image-core",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],uS.ctorParameters=function(){return[{type:jv}]},uS.propDecorators={selected:[{type:h.Output}],data:[{type:h.Input}],path:[{type:h.Input}],options:[{type:h.Input}]},uS);function uS(e){this.amplifyService=e,this._options={},this.selected=new h.EventEmitter,this.logger=this.amplifyService.logger("S3ImageComponent")}var cS,lS,pS=(cS=function(e,t){return(cS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}cS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),dS=(pS(hS,lS=aS),hS.decorators=[{type:h.Component,args:[{selector:"amplify-s3-image-ionic",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],hS.ctorParameters=function(){return[{type:jv}]},hS);function hS(e){var t=lS.call(this,e)||this;return t.amplifyService=e,t}var fS=(mS.prototype.ngOnInit=function(){this.loadComponent()},mS.prototype.ngOnDestroy=function(){},mS.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new ws(dS,{path:this.path,options:this.options}):new ws(aS,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();var o=r.createComponent(n);o.instance.data=e.data,o.instance.selected.subscribe(function(e){t.selected.emit(e)})},mS.decorators=[{type:h.Component,args:[{selector:"amplify-s3-image",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],mS.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},mS.propDecorators={framework:[{type:h.Input}],path:[{type:h.Input}],options:[{type:h.Input}],selected:[{type:h.Output}],componentHost:[{type:h.ViewChild,args:[vs]}]},mS);function mS(e){this.componentFactoryResolver=e,this.selected=new h.EventEmitter}var gS=(Object.defineProperty(yS.prototype,"url",{set:function(e){this.photoUrl=e,this.hasPhoto=!0},enumerable:!0,configurable:!0}),Object.defineProperty(yS.prototype,"storageOptions",{set:function(e){this._storageOptions=Object.assign(this._storageOptions,e)},enumerable:!0,configurable:!0}),Object.defineProperty(yS.prototype,"path",{set:function(e){this.s3ImagePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(yS.prototype,"data",{set:function(e){this.photoUrl=e.url,this.s3ImagePath=e.path,this._storageOptions=Object.assign(this._storageOptions,e.storageOptions),this.hasPhoto=!0},enumerable:!0,configurable:!0}),yS.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider")},yS.prototype.pick=function(e){var n,t,r=e.target.files[0];r&&(this._storageOptions.contentType||(this._storageOptions.contentType=r.type),r.name,r.size,r.type,this.picked.emit(r),this.s3ImagePath=this.s3ImagePath+"/"+r.name,this.s3ImageFile=r,n=this,(t=new FileReader).onload=function(e){var t=e.target.result;n.photoUrl=t,n.hasPhoto=!0,n.loaded.emit(t)},t.readAsDataURL(r))},yS.prototype.uploadFile=function(){var t=this;this.uploading=!0,this.amplifyService.storage().put(this.s3ImagePath,this.s3ImageFile,this._storageOptions).then(function(e){t.uploaded.emit(e),t.completeFileUpload()}).catch(function(e){t.completeFileUpload(e)})},yS.prototype.completeFileUpload=function(e){if(e)return this._setError(e);this.s3ImagePath="",this.photoUrl=null,this.s3ImageFile=null,this.uploading=!1},yS.prototype.onPhotoError=function(){this.hasPhoto=!1},yS.prototype.onAlertClose=function(){this._setError(null)},yS.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},yS.decorators=[{type:h.Component,args:[{selector:"amplify-photo-picker-core",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],yS.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},yS.propDecorators={url:[{type:h.Input}],storageOptions:[{type:h.Input}],path:[{type:h.Input}],data:[{type:h.Input}],picked:[{type:h.Output}],loaded:[{type:h.Output}],uploaded:[{type:h.Output}]},yS);function yS(e){this.amplifyService=e,this.hasPhoto=!1,this.uploading=!1,this.s3ImageFile=null,this.s3ImagePath="",this._storageOptions={},this.picked=new h.EventEmitter,this.loaded=new h.EventEmitter,this.uploaded=new h.EventEmitter,this.logger=this.amplifyService.logger("PhotoPickerComponent")}var vS,bS,wS=(vS=function(e,t){return(vS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}vS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),SS=(wS(_S,bS=gS),_S.decorators=[{type:h.Component,args:[{selector:"amplify-photo-picker-ionic",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],_S.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},_S);function _S(e){var t=bS.call(this,e)||this;return t.amplifyService=e,t}var CS=(ES.prototype.ngOnInit=function(){this.loadComponent()},ES.prototype.ngOnDestroy=function(){},ES.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new ws(SS,{url:this.url,path:this.path,storageOptions:this.storageOptions}):new ws(gS,{url:this.url,path:this.path,storageOptions:this.storageOptions}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();var o=r.createComponent(n);o.instance.data=e.data,o.instance.picked.subscribe(function(e){t.picked.emit(e)}),o.instance.loaded.subscribe(function(e){t.loaded.emit(e)}),o.instance.uploaded.subscribe(function(e){t.uploaded.emit(e)})},ES.decorators=[{type:h.Component,args:[{selector:"amplify-photo-picker",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],ES.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},ES.propDecorators={framework:[{type:h.Input}],url:[{type:h.Input}],path:[{type:h.Input}],storageOptions:[{type:h.Input}],picked:[{type:h.Output}],loaded:[{type:h.Output}],uploaded:[{type:h.Output}],componentHost:[{type:h.ViewChild,args:[vs]}]},ES);function ES(e){this.componentFactoryResolver=e,this.picked=new h.EventEmitter,this.loaded=new h.EventEmitter,this.uploaded=new h.EventEmitter}var IS=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},AS=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};require("./aws-lex-audio.js");var PS={INITIAL:{MESSAGE:"Type your message or click  ðŸŽ¤",ICON:"ðŸŽ¤"},LISTENING:{MESSAGE:"Listening... click ðŸ”´ again to cancel",ICON:"ðŸ”´"},SENDING:{MESSAGE:"Please wait...",ICON:"ðŸ”Š"},SPEAKING:{MESSAGE:"Speaking...",ICON:"..."}},kS={silenceDetectionConfig:{time:2e3,amplitude:.2}},OS=(Object.defineProperty(TS.prototype,"data",{set:function(e){this.botName=e.bot,this.chatTitle=e.title,this.clearComplete=e.clearComplete,this.conversationModeOn=!Xl(e.conversationModeOn)&&e.conversationModeOn,this.voiceEnabled=!Xl(e.voiceEnabled)&&e.voiceEnabled,this.textEnabled=!!Xl(e.textEnabled)||e.textEnabled,this.voiceConfig=e.voiceConfig||this.voiceConfig,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(this.botName,this.performOnComplete),!this.textEnabled&&this.voiceEnabled&&(this.currentVoiceState="Click the mic button",PS.INITIAL.MESSAGE="Click the mic button"),!this.voiceEnabled&&this.textEnabled&&(this.currentVoiceState="Type a message",PS.INITIAL.MESSAGE="Type a message"),this.voiceEnabled&&(this.audioControl=new LexAudio.audioControl)},enumerable:!0,configurable:!0}),Object.defineProperty(TS.prototype,"bot",{set:function(e){this.botName=e,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(e,this.performOnComplete)},enumerable:!0,configurable:!0}),Object.defineProperty(TS.prototype,"title",{set:function(e){this.chatTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(TS.prototype,"clearOnComplete",{set:function(e){this.clearComplete=e},enumerable:!0,configurable:!0}),TS.prototype.ngOnInit=function(){if(!this.amplifyService.interactions())throw new Error("Interactions module not registered on AmplifyService provider")},TS.prototype.performOnComplete=function(e){this.complete.emit(e),this.clearComplete&&(this.messages=[])},TS.prototype.onInputChange=function(e){this.inputText=e},TS.prototype.onSubmit=function(e){var t,n=this;this.inputText&&(t={me:this.inputText,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.amplifyService.interactions().send(this.botName,this.inputText).then(function(e){n.inputText="",t.bot=e.message,t.botSentTime=(new Date).toLocaleTimeString(),n.messages.push(t)}).catch(function(e){return n.logger.error(e)}))},TS.prototype.reset=function(){this.audioControl.clear(),this.inputText="",this.currentVoiceState=PS.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=PS.INITIAL.ICON,this.continueConversation=!1,this.micButtonDisabled=!1,this.ref.detectChanges()},TS.prototype.onError=function(e){this.logger.error(e)},TS.prototype.lexResponseHandler=function(){return IS(this,void 0,void 0,function(){var t,n,r;return AS(this,function(e){switch(e.label){case 0:return this.continueConversation?(t={content:this.audioInput,options:{messageType:"voice"}},[4,this.amplifyService.interactions().send(this.botName,t)]):[2];case 1:return n=e.sent(),this.lexResponse=n,this.currentVoiceState=PS.SPEAKING.MESSAGE,this.micText=PS.SPEAKING.ICON,this.micButtonDisabled=!0,r={me:this.lexResponse.inputTranscript,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.inputText="",r.bot=this.lexResponse.message,r.botSentTime=(new Date).toLocaleTimeString(),this.messages.push(r),this.doneSpeakingHandler(),this.ref.detectChanges(),[2]}})})},TS.prototype.doneSpeakingHandler=function(){var e=this;this.continueConversation&&("audio/mpeg"===this.lexResponse.contentType?this.audioControl.play(this.lexResponse.audioStream,function(){"ReadyForFulfillment"!==e.lexResponse.dialogState&&"Fulfilled"!==e.lexResponse.dialogState&&"Failed"!==e.lexResponse.dialogState&&e.conversationModeOn?(e.currentVoiceState=PS.LISTENING.MESSAGE,e.micText=PS.LISTENING.ICON,e.micButtonDisabled=!1,e.audioControl.startRecording(e.onSilenceHandler,null,e.voiceConfig.silenceDetectionConfig)):(e.inputDisabled=!1,e.currentVoiceState=PS.INITIAL.MESSAGE,e.micText=PS.INITIAL.ICON,e.micButtonDisabled=!1,e.continueConversation=!1),e.ref.detectChanges()}):(this.inputDisabled=!1,this.currentVoiceState=PS.INITIAL.MESSAGE,this.micText=PS.INITIAL.ICON,this.micButtonDisabled=!1,this.continueConversation=!1,this.ref.detectChanges()))},TS.prototype.micButtonHandler=function(){return IS(this,void 0,void 0,function(){return AS(this,function(e){return this.continueConversation?this.reset():(this.inputDisabled=!0,this.continueConversation=!0,this.currentVoiceState=PS.LISTENING.MESSAGE,this.micText=PS.LISTENING.ICON,this.micButtonDisabled=!1,this.audioControl.startRecording(this.onSilenceHandler,null,this.voiceConfig.silenceDetectionConfig)),this.ref.detectChanges(),[2]})})},TS.decorators=[{type:h.Component,args:[{selector:"amplify-interactions-core",template:'\n<div class="amplify-interactions">\n\t<div class="amplify-interactions-container">\n\t\t<div class="amplify-form-container">\n\t\t\t<div class="amplify-form-row">\n\t\t\t\t<div class="amplify-interactions-conversation">\n\t\t\t\t\t<div *ngFor="let message of messages">\n\t\t\t\t\t\t<div class="amplify-interactions-input">{{message.me}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-input-timestamp">{{message.meSentTime}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response">{{message.bot}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response-timestamp">{{message.botSentTime}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="amplify-interactions-actions">\n\t\t\t\t<input #inputValue\n\t\t\t\t\tdata-test="chatbot-message-input"\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[value]="inputText"\n\t\t\t\t\t(keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t\t(change)="onInputChange($event.target.value)"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\t*ngIf="textEnabled">\n\t\t\t\t<input #inputValue\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t\t*ngIf="!textEnabled">\n\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t\t>\n\t\t\t\t\t{{micText}}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="textEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\tclass="amplify-interactions-button"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\tng-click="!inputDisabled || onSubmit(inputValue.value)"\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'}]}],TS.ctorParameters=function(){return[{type:h.ChangeDetectorRef},{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},TS.propDecorators={complete:[{type:h.Output}],data:[{type:h.Input}],bot:[{type:h.Input}],title:[{type:h.Input}],clearOnComplete:[{type:h.Input}]},TS);function TS(e,t){var n=this;this.amplifyService=t,this.inputText="",this.clearComplete=!1,this.messages=[],this.completions={},this.currentVoiceState=PS.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=PS.INITIAL.ICON,this.voiceConfig=kS,this.continueConversation=!1,this.micButtonDisabled=!1,this.conversationModeOn=!1,this.voiceEnabled=!1,this.textEnabled=!0,this.complete=new h.EventEmitter,this.onSilenceHandler=function(){n.continueConversation&&(n.audioControl.exportWAV(function(e){n.currentVoiceState=PS.SENDING.MESSAGE,n.audioInput=e,n.micText=PS.SENDING.ICON,n.micButtonDisabled=!0,n.lexResponseHandler()}),n.ref.detectChanges())},this.ref=e,this.continueConversation=!1,this.logger=this.amplifyService.logger("ChatbotComponent")}var xS,NS,US=(xS=function(e,t){return(xS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}xS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),RS=(US(MS,NS=OS),MS.decorators=[{type:h.Component,args:[{selector:"amplify-interactions-ionic",template:'\n<div class="amplify-interactions-container">\n\t<div class="amplify-form-container">\n\t\t<ion-grid>\n\t\t\t<ion-row *ngIf="chatTitle"> \n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t\t<ion-label>{{chatTitle}}</ion-label>\n\t\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t\t<ion-row *ngFor="let message of messages">\n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<ion-chip style="float:right">\n\t\t\t\t\t\t\t\t<ion-label>{{message.me}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t<ion-label>{{message.bot}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t</ion-grid>\n\t\t<div class="amplify-form-row">\n\t\t    <ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t        class="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t        placeholder="{{currentVoiceState}}"\n\t\t        [value]="inputText"\n\t\t        (keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t(ionChange)="onInputChange($event.target.value)"\n\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t*ngIf="textEnabled"></ion-input>\n\t\t\t<ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t\t\tclass="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t*ngIf="!textEnabled"></ion-input>\n\t\t\t<ion-button \n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t>\n\t\t\t\t{{micText}}\n\t\t\t</ion-button>\n\t\t\t<ion-button\n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="textEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="inputDisabled === false || onSubmit(inputValue.value)"\n\t\t\t>\n\t\t\t\tSend\n\t\t\t</ion-button>\n\t\t</div>\n\t</div>\n</div>\n'}]}],MS.ctorParameters=function(){return[{type:h.ChangeDetectorRef},{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},MS);function MS(e,t){var n=NS.call(this,e,t)||this;return n.amplifyService=t,n}var DS=(FS.prototype.ngOnInit=function(){this.loadComponent()},FS.prototype.ngOnDestroy=function(){},FS.prototype.loadComponent=function(){var t=this,e={bot:this.bot,title:this.title,clearComplete:this.clearComplete,conversationModeOn:this.conversationModeOn,voiceConfig:this.voiceConfig,voiceEnabled:this.voiceEnabled,textEnabled:this.textEnabled},n=this.framework&&"ionic"===this.framework.toLowerCase()?new ws(RS,e):new ws(OS,e),r=this.componentFactoryResolver.resolveComponentFactory(n.component),o=this.componentHost.viewContainerRef;o.clear();var i=o.createComponent(r);i.instance.data=n.data,i.instance.complete.subscribe(function(e){t.complete.emit(e)})},FS.decorators=[{type:h.Component,args:[{selector:"amplify-interactions",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],FS.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},FS.propDecorators={framework:[{type:h.Input}],bot:[{type:h.Input}],title:[{type:h.Input}],clearComplete:[{type:h.Input}],conversationModeOn:[{type:h.Input}],voiceConfig:[{type:h.Input}],voiceEnabled:[{type:h.Input}],textEnabled:[{type:h.Input}],complete:[{type:h.Output}],componentHost:[{type:h.ViewChild,args:[vs]}]},FS);function FS(e){this.componentFactoryResolver=e,this.complete=new h.EventEmitter}var LS=(Object.defineProperty(jS.prototype,"title",{set:function(e){this.title=e},enumerable:!0,configurable:!0}),jS.decorators=[{type:h.Component,args:[{selector:"amplify-form",template:'\n<div class="amplify-form">\n  <div class="form-header">\n    <div class="form-title">{{ title }}</div>\n  </div>\n  <div class="form-body">\n    <ng-content select="[form-body]"></ng-content>\n  </div>\n  <div class="form-footer">\n    <ng-content select="[form-footer]"></ng-content>\n  </div>\n</div>\n'}]}],jS.propDecorators={title:[{type:h.Input}]},jS);function jS(){}var BS=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})},VS=function(n,r){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},qS='\n<div id="sumerian-scene-container" class={{amplifyUI.sumerianSceneContainer}} data-test="'+Jv+'">\n  <div id="sumerian-scene-dom-id" class={{amplifyUI.sumerianScene}} data-test="'+Zv+'">\n    <sumerian-scene-loading-core *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} sceneError={{sceneError}} data-test="'+Qv+'"></sumerian-scene-loading-core>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+rb+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+ob+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',zS=(Object.defineProperty(HS.prototype,"data",{set:function(e){this.sceneName=e.sceneName},enumerable:!0,configurable:!0}),HS.prototype.ngOnInit=function(){if(document.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this)),!this.amplifyService.xr())throw new Error("XR module not registered on AmplifyService provider");this.loadAndStartScene()},HS.prototype.ngOnDestroy=function(){document.removeEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this))},HS.prototype.loadAndStartScene=function(){return BS(this,void 0,void 0,function(){var t,n,r=this;return VS(this,function(e){switch(e.label){case 0:this.loading=!0,t={progressCallback:this.progressCallback},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.amplifyService.xr().loadScene(this.sceneName,"sumerian-scene-dom-id",t)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),this.sceneError="Failed to load scene",this.logger.error(this.sceneError,n),[2];case 4:return this.amplifyService.xr().start(this.sceneName),this.loading=!1,this.muted=this.amplifyService.xr().isMuted(this.sceneName),this.isVRCapable=this.amplifyService.xr().isVRCapable(this.sceneName),this.isVRPresentationActive=this.amplifyService.xr().isVRPresentationActive(this.sceneName),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioEnabled",function(){return r.showEnableAudio=!1}),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioDisabled",function(){return r.showEnableAudio=!0}),[2]}})})},HS.prototype.setMuted=function(e){this.muted=e,this.amplifyService.xr().setMuted(this.sceneName,e),this.showEnableAudio&&(this.amplifyService.xr().enableAudio(this.sceneName),this.showEnableAudio=!1)},HS.prototype.toggleVRPresentation=function(){try{this.isVRPresentationActive?this.amplifyService.xr().exitVR(this.sceneName):this.amplifyService.xr().enterVR(this.sceneName)}catch(e){return void this.logger.error("Unable to start/stop WebVR System: "+e.message)}this.isVRPresentationActive=!this.isVRPresentationActive},HS.prototype.onFullscreenChange=function(){var e=document;this.isFullscreen=null!==e.fullscreenElement},HS.prototype.maximize=function(){return BS(this,void 0,void 0,function(){var t;return VS(this,function(e){return((t=document.getElementById("sumerian-scene-container")).requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen).call(t),[2]})})},HS.prototype.minimize=function(){return BS(this,void 0,void 0,function(){var t;return VS(this,function(e){return(t=document).exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen(),[2]})})},HS.decorators=[{type:h.Component,args:[{selector:"sumerian-scene-core",template:qS}]}],HS.ctorParameters=function(){return[{type:jv}]},HS.propDecorators={sceneName:[{type:h.Input}],data:[{type:h.Input}]},HS);function HS(e){var n=this;this.amplifyService=e,this.loading=!1,this.loadPercentage=0,this.muted=!1,this.showEnableAudio=!1,this.isVRCapable=!1,this.isVRPresentationActive=!1,this.isFullscreen=!1,this.sceneError=null,this.progressCallback=function(e){var t=100*e;n.loadPercentage=t},this.amplifyUI=J,this.logger=this.amplifyService.logger("SumerianSceneComponentCore")}var KS,GS,WS=(KS=function(e,t){return(KS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}KS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),$S='\n<div id="sumerian-scene-container" [ngClass]="amplifyUI.sumerianSceneContainer" data-test="'+Jv+'">\n  <div id="sumerian-scene-dom-id" [class]="amplifyUI.sumerianScene" data-test="'+Zv+'">\n    <sumerian-scene-loading-ionic *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} data-test="'+Qv+'"></sumerian-scene-loading-ionic>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+rb+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+ob+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',YS=(WS(JS,GS=zS),JS.decorators=[{type:h.Component,args:[{selector:"sumerian-scene-ionic",template:$S}]}],JS.ctorParameters=function(){return[{type:jv}]},JS);function JS(e){var t=GS.call(this,e)||this;return t.amplifyService=e,t}var ZS=(QS.prototype.ngOnInit=function(){this.loadComponent()},QS.prototype.ngOnDestroy=function(){},QS.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new ws(YS,{sceneName:this.sceneName}):new ws(zS,{sceneName:this.sceneName}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},QS.decorators=[{type:h.Component,args:[{selector:"amplify-sumerian-scene",template:"\n\t\t<ng-template component-host></ng-template>\n\t"}]}],QS.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},QS.propDecorators={framework:[{type:h.Input}],sceneName:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[vs]}]},QS);function QS(e){this.componentFactoryResolver=e}var XS='\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+Xv+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+eb+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+nb+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+tb+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n",e_=(t_.decorators=[{type:h.Component,args:[{selector:"sumerian-scene-loading-core",template:XS}]}],t_.ctorParameters=function(){return[]},t_.propDecorators={loadPercentage:[{type:h.Input}],sceneName:[{type:h.Input}],sceneError:[{type:h.Input}]},t_);function t_(){this.AmplifyUI=J}var n_=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},r_=[$v,Vv,_b,fb,Lb,kb,Yb,Vb,cw,tw,ww,dw,xw,Cw,qw,Rw,Gw,Jw,iS,Qw,fS,aS,CS,gS,DS,OS,LS,ZS,zS,e_],o_=(i_.decorators=[{type:h.NgModule,args:[{imports:[t.CommonModule,fs],declarations:n_([vs],r_),entryComponents:n_(r_),providers:[],exports:n_(r_)}]}],i_);function i_(){}var s_,a_,u_=(s_=function(e,t){return(s_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c_='\n<ion-grid class="amplify-ionic-grid-padding-left">\n    <ion-row>\n        <ion-col size="6" class="amplify-ionic-grid-padding-left">\n            <ion-label class="amplify-input-label push-right"\n                position="stacked" \n                for="localPhoneNumberField">\n                {{ this.amplifyService.i18n().get(this._label) }}\n                <span *ngIf="_required">*</span>\n            </ion-label>\n            <ion-select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [value]="_country_code"\n            (ionChange)="setCountryCode($event.target.value)"\n            data-test="'+ub.dialCodeSelect+'">\n            <ion-select-option *ngFor="let country of _countries"\n            value={{country.value}}>\n                {{country.label}}\n            </ion-select-option>\n            </ion-select>\n        </ion-col>\n        <ion-col size="6">\n            <ion-label class="amplify-input-label push-right">&nbsp;</ion-label>\n            <ion-input\n            #localPhoneNumberField\n            class="amplify-form-input-phone-ionic"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            name="local_phone_number"\n            type="tel"\n            (ionChange)="setLocalPhoneNumber($event.target.value)"\n            data-test="'+ub.phoneNumberInput+'"\n            ></ion-input>\n        </ion-col>\n    </ion-row>\n</ion-grid>',l_=(u_(p_,a_=Jw),p_.decorators=[{type:h.Component,args:[{selector:"amplify-auth-phone-field-ionic",template:c_}]}],p_.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},p_);function p_(e){var t=a_.call(this,e)||this;return t.amplifyService=e,t}var d_,h_,f_=(d_=function(e,t){return(d_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}d_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m_='\n\n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'email\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="emailField" position="stacked">{{ this.amplifyService.i18n().get(\'Email *\') }}</ion-label>\n        <ion-input type="text"\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setEmail($event.target.value)"\n            data-test="'+ub.emailInput+'"\n        ></ion-input>\n    </ion-item> \n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'phone_number\'">\n       <amplify-auth-phone-field-ionic\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-ionic>\n    </ion-item>\n    <ion-item lines="none" *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="usernameField" position="stacked">{{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</ion-label>\n        <ion-input type="text"\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setUsername($event.target.value)"\n            data-test="'+ub.usernameInput+'"\n        ></ion-input>\n    </ion-item>\n\n',g_=(f_(y_,h_=Gw),y_.decorators=[{type:h.Component,args:[{selector:"amplify-auth-username-field-ionic",template:m_}]}],y_.ctorParameters=function(){return[{type:jv,decorators:[{type:h.Inject,args:[jv]}]}]},y_);function y_(e){var t=h_.call(this,e)||this;return t.amplifyService=e,t}var v_,b_,w_=(v_=function(e,t){return(v_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}v_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),S_='\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+Xv+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+eb+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+nb+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+tb+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n",__=(w_(C_,b_=e_),C_.decorators=[{type:h.Component,args:[{selector:"sumerian-scene-loading-ionic",template:S_}]}],C_.ctorParameters=function(){return[]},C_);function C_(){return b_.call(this)||this}var E_=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},I_=[Gv,wb,Rb,Bw,Ow,Wb,aw,g_,l_,vw,SS,rS,dS,RS,YS,__],A_=(P_.decorators=[{type:h.NgModule,args:[{imports:[t.CommonModule,fs],declarations:E_(I_),entryComponents:E_(I_),providers:[jv],schemas:[h.CUSTOM_ELEMENTS_SCHEMA],exports:E_(I_)}]}],P_);function P_(){}e.AmplifyAngularModule=o_,e.AmplifyIonicModule=A_,e.AmplifyModules=function(e){return new jv(e)},e.AmplifyService=jv,Object.defineProperty(e,"__esModule",{value:!0})});
